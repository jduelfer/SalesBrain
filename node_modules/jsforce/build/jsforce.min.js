/*! jsforce - v1.5.1 - 2016-01-14 */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.jsforce=a()}}(function(){var define,module,exports;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("underscore"),e=(a("../promise"),function(a,b){this._report=a,this._conn=a._conn,this.id=b});e.prototype.retrieve=function(a){var b=this._conn,c=this._report,d=[b._baseUrl(),"analytics","reports",c.id,"instances",this.id].join("/");return b.request(d).thenCall(a)};var f=function(a,b){this._conn=a,this.id=b};f.prototype.describe=function(a){var b=[this._conn._baseUrl(),"analytics","reports",this.id,"describe"].join("/");return this._conn.request(b).thenCall(a)},f.prototype.explain=function(a){var b="/query/?explain="+this.id;return this._conn.request(b).thenCall(a)},f.prototype.run=f.prototype.exec=f.prototype.execute=function(a,b){a=a||{},d.isFunction(a)&&(b=a,a={});var c=[this._conn._baseUrl(),"analytics","reports",this.id].join("/");c+="?includeDetails="+(a.details?"true":"false");var e={method:a.metadata?"POST":"GET",url:c};return a.metadata&&(e.headers={"Content-Type":"application/json"},e.body=JSON.stringify(a.metadata)),this._conn.request(e).thenCall(b)},f.prototype.executeAsync=function(a,b){a=a||{},d.isFunction(a)&&(b=a,a={});var c=[this._conn._baseUrl(),"analytics","reports",this.id,"instances"].join("/");a.details&&(c+="?includeDetails=true");var e={method:"POST",url:c,body:""};return a.metadata&&(e.headers={"Content-Type":"application/json"},e.body=JSON.stringify(a.metadata)),this._conn.request(e).thenCall(b)},f.prototype.instance=function(a){return new e(this,a)},f.prototype.instances=function(a){var b=[this._conn._baseUrl(),"analytics","reports",this.id,"instances"].join("/");return this._conn.request(b).thenCall(a)};var g=function(a){this._conn=a};g.prototype.report=function(a){return new f(this._conn,a)},g.prototype.reports=function(a){var b=[this._conn._baseUrl(),"analytics","reports"].join("/");return this._conn.request(b).thenCall(a)},b.exports=g},{"../promise":24,underscore:82}],2:[function(a,b,c){"use strict";var d=function(a){this._conn=a};d.prototype._baseUrl=function(){return this._conn.instanceUrl+"/services/apexrest"},d.prototype._createRequestParams=function(a,b,c){var d={method:a,url:this._baseUrl()+b};return/^(GET|DELETE)$/i.test(a)||(d.headers={"Content-Type":"application/json"}),c&&(d.body=JSON.stringify(c)),d},d.prototype.get=function(a,b){return this._conn.request(this._createRequestParams("GET",a)).thenCall(b)},d.prototype.post=function(a,b,c){"function"==typeof b&&(c=b,b=void 0);var d=this._createRequestParams("POST",a,b);return this._conn.request(d).thenCall(c)},d.prototype.put=function(a,b,c){"function"==typeof b&&(c=b,b=void 0);var d=this._createRequestParams("PUT",a,b);return this._conn.request(d).thenCall(c)},d.prototype.patch=function(a,b,c){"function"==typeof b&&(c=b,b=void 0);var d=this._createRequestParams("PATCH",a,b);return this._conn.request(d).thenCall(c)},d.prototype.del=d.prototype["delete"]=function(a,b){return this._conn.request(this._createRequestParams("DELETE",a)).thenCall(b)},b.exports=d},{}],3:[function(a,b,c){(function(c){"use strict";var d=a("inherits"),e=a("readable-stream"),f=e.Duplex,g=a("events"),h=a("underscore"),i=a("../record-stream"),j=(a("../csv"),a("../promise")),k=a("../http-api"),l=function(a,b,c,d,e){this._bulk=a,this.type=b,this.operation=c,this.options=d||{},this.id=e,this.state=this.id?"Open":"Unknown",this._batches={}};d(l,g.EventEmitter),l.prototype.info=function(a){return this._jobInfo||(this._jobInfo=this.check()),this._jobInfo.thenCall(a)},l.prototype.open=function(a){var b=this,c=this._bulk;c._logger;if(!this._jobInfo){var d=this.operation.toLowerCase();"harddelete"===d&&(d="hardDelete");var e=['<?xml version="1.0" encoding="UTF-8"?>','<jobInfo  xmlns="http://www.force.com/2009/06/asyncapi/dataload">',"<operation>"+d+"</operation>","<object>"+this.type+"</object>",this.options.extIdField?"<externalIdFieldName>"+this.options.extIdField+"</externalIdFieldName>":"",this.options.concurrencyMode?"<concurrencyMode>"+this.options.concurrencyMode+"</concurrencyMode>":"",this.options.assignmentRuleId?"<assignmentRuleId>"+this.options.assignmentRuleId+"</assignmentRuleId>":"","<contentType>CSV</contentType>","</jobInfo>"].join("");this._jobInfo=c._request({method:"POST",path:"/job",body:e,headers:{"Content-Type":"application/xml; charset=utf-8"},responseType:"application/xml"}).then(function(a){return b.emit("open",a.jobInfo),b.id=a.jobInfo.id,b.state=a.jobInfo.state,a.jobInfo},function(a){throw b.emit("error",a),a})}return this._jobInfo.thenCall(a)},l.prototype.createBatch=function(){var a=new m(this),b=this;return a.on("queue",function(){b._batches[a.id]=a}),a},l.prototype.batch=function(a){var b=this._batches[a];return b||(b=new m(this,a),this._batches[a]=b),b},l.prototype.check=function(a){var b=this,c=this._bulk,d=c._logger;return this._jobInfo=this._waitAssign().then(function(){return c._request({method:"GET",path:"/job/"+b.id,responseType:"application/xml"})}).then(function(a){return d.debug(a.jobInfo),b.id=a.jobInfo.id,b.type=a.jobInfo.object,b.operation=a.jobInfo.operation,b.state=a.jobInfo.state,a.jobInfo}),this._jobInfo.thenCall(a)},l.prototype._waitAssign=function(a){return(this.id?j.resolve({id:this.id}):this.open()).thenCall(a)},l.prototype.list=function(a){var b=this,c=this._bulk,d=c._logger;return this._waitAssign().then(function(){return c._request({method:"GET",path:"/job/"+b.id+"/batch",responseType:"application/xml"})}).then(function(a){d.debug(a.batchInfoList.batchInfo);var b=a.batchInfoList;return b=h.isArray(b.batchInfo)?b.batchInfo:[b.batchInfo]}).thenCall(a)},l.prototype.close=function(){var a=this;return this._changeState("Closed").then(function(b){return a.id=null,a.emit("close",b),b},function(b){throw a.emit("error",b),b})},l.prototype.abort=function(){var a=this;return this._changeState("Aborted").then(function(b){return a.id=null,a.emit("abort",b),b},function(b){throw a.emit("error",b),b})},l.prototype._changeState=function(a,b){var c=this,d=this._bulk,e=d._logger;return this._jobInfo=this._waitAssign().then(function(){var b=['<?xml version="1.0" encoding="UTF-8"?>','<jobInfo xmlns="http://www.force.com/2009/06/asyncapi/dataload">',"<state>"+a+"</state>","</jobInfo>"].join("");return d._request({method:"POST",path:"/job/"+c.id,body:b,headers:{"Content-Type":"application/xml; charset=utf-8"},responseType:"application/xml"})}).then(function(a){return e.debug(a.jobInfo),c.state=a.jobInfo.state,a.jobInfo}),this._jobInfo.thenCall(b)};var m=function(a,b){m.super_.call(this,{objectMode:!0}),this.job=a,this.id=b,this._bulk=a._bulk,this._deferred=j.defer(),this._setupDataStreams()};d(m,e.Writable),m.prototype._setupDataStreams=function(){var a=this,b={nullValue:"#N/A"};this._uploadStream=new i.Serializable,this._uploadDataStream=this._uploadStream.stream("csv",b),this._downloadStream=new i.Parsable,this._downloadDataStream=this._downloadStream.stream("csv",b),this.on("finish",function(){a._uploadStream.end()}),this._uploadDataStream.once("readable",function(){a.job.open().then(function(){a._uploadDataStream.pipe(a._createRequestStream())})});var c=this._dataStream=new f;c._write=function(b,c,d){a._uploadDataStream.write(b,c,d)},c.on("finish",function(){a._uploadDataStream.end()}),this._downloadDataStream.on("readable",function(){c.read(0)}),this._downloadDataStream.on("end",function(){c.push(null)}),c._read=function(b){for(var d;null!==(d=a._downloadDataStream.read());)c.push(d)}},m.prototype._createRequestStream=function(){var a=this,b=a._bulk,c=b._logger;return b._request({method:"POST",path:"/job/"+a.job.id+"/batch",headers:{"Content-Type":"text/csv"},responseType:"application/xml"},function(b,d){b?a.emit("error",b):(c.debug(d.batchInfo),a.id=d.batchInfo.id,a.emit("queue",d.batchInfo))}).stream()},m.prototype._write=function(a,b,c){a=h.clone(a),"insert"===this.job.operation?delete a.Id:"delete"===this.job.operation&&(a={Id:a.Id}),delete a.type,delete a.attributes,this._uploadStream.write(a,b,c)},m.prototype.stream=function(){return this._dataStream},m.prototype.run=m.prototype.exec=m.prototype.execute=function(a,b){var c=this;if("function"==typeof a&&(b=a,a=null),this._result)throw new Error("Batch already executed.");var d=j.defer();if(this._result=d.promise,this._result.then(function(a){c._deferred.resolve(a)},function(a){c._deferred.reject(a)}),this.once("response",function(a){d.resolve(a)}),this.once("error",function(a){d.reject(a)}),h.isObject(a)&&h.isFunction(a.pipe))a.pipe(this._dataStream);else{var e;h.isArray(a)?(h.forEach(a,function(a){c.write(a)}),c.end()):h.isString(a)&&(e=a,this._dataStream.write(e,"utf8"),this._dataStream.end())}return this.thenCall(b)},m.prototype.then=function(a,b,c){return this._deferred.promise.then(a,b,c)},m.prototype.thenCall=function(a){return h.isFunction(a)&&this.then(function(b){c.nextTick(function(){a(null,b)})},function(b){c.nextTick(function(){a(b)})}),this},m.prototype.check=function(a){var b=this._bulk,c=b._logger,d=this.job.id,e=this.id;if(!d||!e)throw new Error("Batch not started.");return b._request({method:"GET",path:"/job/"+d+"/batch/"+e,responseType:"application/xml"}).then(function(a){return c.debug(a.batchInfo),a.batchInfo}).thenCall(a)},m.prototype.poll=function(a,b){var c=this,d=this.job.id,e=this.id;if(!d||!e)throw new Error("Batch not started.");var f=(new Date).getTime(),g=function(){var h=(new Date).getTime();if(h>f+b){var i=new Error("Polling time out. Job Id = "+d+" , batch Id = "+e);return i.name="PollingTimeout",void c.emit("error",i)}c.check(function(b,d){b?c.emit("error",b):"Failed"===d.state?parseInt(d.numberRecordsProcessed,10)>0?c.retrieve():c.emit("error",new Error(d.stateMessage)):"Completed"===d.state?c.retrieve():(c.emit("progress",d),setTimeout(g,a))})};setTimeout(g,a)},m.prototype.retrieve=function(a){var b=this,c=this._bulk,d=this.job.id,e=this.job,f=this.id;if(!d||!f)throw new Error("Batch not started.");return e.info().then(function(a){return c._request({method:"GET",path:"/job/"+d+"/batch/"+f+"/result"})}).then(function(a){var g;if("query"===e.operation){c._conn,a["result-list"].result;g=a["result-list"].result,g=h.map(h.isArray(g)?g:[g],function(a){return{id:a,batchId:f,jobId:d}})}else g=h.map(a,function(a){return{id:a.Id||null,success:"true"===a.Success,errors:a.Error?[a.Error]:[]}});return b.emit("response",g),g}).fail(function(a){throw b.emit("error",a),a}).thenCall(a)},m.prototype.result=function(a){var b=this.job.id,c=this.id;if(!b||!c)throw new Error("Batch not started.");var d=new i.Parsable,e=d.stream("csv");this._bulk._request({method:"GET",path:"/job/"+b+"/batch/"+c+"/result/"+a}).stream().pipe(e);return d};var n=function(){n.super_.apply(this,arguments)};d(n,k),n.prototype.beforeSend=function(a){a.headers=a.headers||{},a.headers["X-SFDC-SESSION"]=this._conn.accessToken},n.prototype.isSessionExpired=function(a){return 400===a.statusCode&&/<exceptionCode>InvalidSessionId<\/exceptionCode>/.test(a.body)},n.prototype.hasErrorInResponseBody=function(a){return!!a.error},n.prototype.parseError=function(a){return{errorCode:a.error.exceptionCode,message:a.error.exceptionMessage}};var o=function(a){this._conn=a,this._logger=a._logger};o.prototype.pollInterval=1e3,o.prototype.pollTimeout=1e4,o.prototype._request=function(a,b){var c=this._conn;a=h.clone(a);var d=[c.instanceUrl,"services/async",c.version].join("/");a.url=d+a.path;var e={responseType:a.responseType};return delete a.path,delete a.responseType,new n(this._conn,e).request(a).thenCall(b)},o.prototype.load=function(a,b,c,d,e){var f=this;if(!a||!b)throw new Error("Insufficient arguments. At least, 'type' and 'operation' are required.");h.isObject(c)&&c.constructor===Object||(e=d,d=c,c=null);var g=this.createJob(a,b,c);g.once("error",function(a){i&&i.emit("error",a)});var i=g.createBatch(),j=function(){i=null,g.close()},k=function(a){"PollingTimeout"!==a.name&&j()};return i.on("response",j),i.on("error",k),i.on("queue",function(){i.poll(f.pollInterval,f.pollTimeout)}),i.execute(d,e)},o.prototype.query=function(a){var b=a.replace(/\([\s\S]+\)/g,"").match(/FROM\s+(\w+)/i);if(!b)throw new Error("No sobject type found in query, maybe caused by invalid SOQL.");var c=b[1],d=this,e=new i.Parsable,f=e.stream("csv");return this.load(c,"query",a).then(function(a){var b=a[0],c=d.job(b.jobId).batch(b.batchId).result(b.id);c.stream().pipe(f)}).fail(function(a){e.emit("error",a)}),e},o.prototype.createJob=function(a,b,c){return new l(this,a,b,c)},o.prototype.job=function(a){return new l(this,null,null,null,a)},b.exports=o}).call(this,a("_process"))},{"../csv":17,"../http-api":19,"../promise":24,"../record-stream":27,_process:44,events:42,inherits:53,"readable-stream":69,underscore:82}],4:[function(a,b,c){"use strict";var d=a("inherits"),e=a("underscore"),f=a("../promise"),g=b.exports=function(a){this._conn=a};g.prototype._request=function(a,b){return/^(put|post|patch)$/i.test(a.method)&&e.isObject(a.body)&&(a.headers={"Content-Type":"application/json"},a.body=JSON.stringify(a.body)),a.url=this._normalizeUrl(a.url),this._conn.request(a,b)},g.prototype._normalizeUrl=function(a){return 0===a.indexOf("/chatter/")||0===a.indexOf("/connect/")?"/services/data/v"+this._conn.version+a:/^\/v[\d]+\.[\d]+\//.test(a)?"/services/data"+a:0!==a.indexOf("/services/")&&"/"===a[0]?"/services/data/v"+this._conn.version+"/chatter"+a:a},g.prototype.request=function(a,b){return new h(this,a).thenCall(b)},g.prototype.resource=function(a,b){return new i(this,a,b)},g.prototype.batch=function(a,b){var c=[],d=[];e.forEach(a,function(a){var b=f.defer();a._promise=b.promise,c.push(a.batchParams()),d.push(b)});var g={method:"POST",url:this._normalizeUrl("/connect/batch"),body:{batchRequests:c}};return this.request(g).then(function(a){return e.forEach(a.results,function(a,b){var c=d[b];a.statusCode>=400?c.reject(a.result):c.resolve(a.result)}),a}).thenCall(b)};var h=function(a,b){this._chatter=a,this._params=b,this._promise=null};h.prototype.batchParams=function(){var a=this._params,b={method:a.method,url:this._chatter._normalizeUrl(a.url)};return this._params.body&&(b.richInput=this._params.body),b},h.prototype.promise=function(){return this._promise||this._chatter._request(this._params)},h.prototype.stream=function(){return this._chatter._request(this._params).stream()},h.prototype.then=function(a,b){return this.promise().then(a,b)},h.prototype.thenCall=function(a){return e.isFunction(a)?this.promise().thenCall(a):this};var i=function(a,b,c){if(c){var d=e.map(e.keys(c),function(a){return a+"="+encodeURIComponent(c[a])}).join("&");b+=(b.indexOf("?")>0?"&":"?")+d}i.super_.call(this,a,{method:"GET",url:b}),this._url=b};d(i,h),i.prototype.create=function(a,b){return this._chatter.request({method:"POST",url:this._url,body:a}).thenCall(b)},i.prototype.retrieve=function(a){return this.thenCall(a)},i.prototype.update=function(a,b){return this._chatter.request({method:"POST",url:this._url,body:a}).thenCall(b)},i.prototype.del=i.prototype["delete"]=function(a){return this._chatter.request({method:"DELETE",url:this._url}).thenCall(a)}},{"../promise":24,inherits:53,underscore:82}],5:[function(a,b,c){(function(c,d){"use strict";function e(a){var b=k.clone(a);return b.success="true"===b.success,b}function f(a){var b=e(a);return b.created="true"===b.created,b}function g(a){var b=k.clone(a);return delete b.$,b}var h=a("inherits"),i=a("events"),j=a("readable-stream"),k=a("underscore"),l=a("../promise"),m=a("../soap"),n=b.exports=function(a){this._conn=a};n.prototype.pollInterval=1e3,n.prototype.pollTimeout=1e4,n.prototype._invoke=function(a,b,c){var d=new m(this._conn,{xmlns:"http://soap.sforce.com/2006/04/metadata",endpointUrl:this._conn.instanceUrl+"/services/Soap/m/"+this._conn.version});return d.invoke(a,b).then(function(a){return a.result}).thenCall(c)},n.prototype.createAsync=function(a,b,c){if(Number(this._conn.version)>30)throw new Error("Async metadata CRUD calls are not supported on ver 31.0 or later.");var d=function(b){return b["@xsi:type"]=a,b},e=k.isArray(b);b=e?k.map(b,d):d(b);var f=this._invoke("create",{metadata:b});return new o(this,f,e).thenCall(c)},n.prototype.createSync=n.prototype.create=function(a,b,c){var d=function(b){return b["@xsi:type"]=a,b},f=k.isArray(b);return b=f?k.map(b,d):d(b),this._invoke("createMetadata",{metadata:b}).then(function(a){return k.isArray(a)?k.map(a,e):e(a)}).thenCall(c)},n.prototype.readSync=n.prototype.read=function(a,b,c){return this._invoke("readMetadata",{type:a,fullNames:b}).then(function(a){return k.isArray(a.records)?k.map(a.records,g):g(a.records)}).thenCall(c)},n.prototype.updateAsync=function(a,b,c){if(Number(this._conn.version)>30)throw new Error("Async metadata CRUD calls are not supported on ver 31.0 or later.");var d=function(b){return b.metadata["@xsi:type"]=a,b},e=k.isArray(b);b=e?k.map(b,d):d(b);var f=this._invoke("update",{updateMetadata:b});return new o(this,f,e).thenCall(c)},n.prototype.updateSync=n.prototype.update=function(a,b,c){var d=function(b){return b["@xsi:type"]=a,b},f=k.isArray(b);return b=f?k.map(b,d):d(b),this._invoke("updateMetadata",{metadata:b}).then(function(a){return k.isArray(a)?k.map(a,e):e(a)}).thenCall(c)},n.prototype.upsertSync=n.prototype.upsert=function(a,b,c){var d=function(b){return b["@xsi:type"]=a,b},e=k.isArray(b);return b=e?k.map(b,d):d(b),this._invoke("upsertMetadata",{metadata:b}).then(function(a){return k.isArray(a)?k.map(a,f):f(a)}).thenCall(c)},n.prototype.deleteAsync=function(a,b,c){if(Number(this._conn.version)>30)throw new Error("Async metadata CRUD calls are not supported on ver 31.0 or later.");var d=function(b){return k.isString(b)&&(b={fullName:b}),b["@xsi:type"]=a,b},e=k.isArray(b);b=e?k.map(b,d):d(b);var f=this._invoke("delete",{metadata:b});return new o(this,f,e).thenCall(c)},n.prototype.del=n.prototype.deleteSync=n.prototype["delete"]=function(a,b,c){return this._invoke("deleteMetadata",{type:a,fullNames:b}).then(function(a){return k.isArray(a)?k.map(a,e):e(a)}).thenCall(c)},n.prototype.rename=function(a,b,c,d){return this._invoke("renameMetadata",{type:a,oldFullName:b,newFullName:c}).then(function(a){return e(a)}).thenCall(d)},n.prototype.checkStatus=function(a,b){var c=k.isArray(a),d=this._invoke("checkStatus",{asyncProcessId:a});return new o(this,d,c).thenCall(b)},n.prototype.describe=function(a,b){return k.isString(a)||(b=a,a=this._conn.version),this._invoke("describeMetadata",{asOfVersion:a}).then(function(a){return a.metadataObjects=k.isArray(a.metadataObjects)?a.metadataObjects:[a.metadataObjects],a.metadataObjects=k.map(a.metadataObjects,function(a){return a.childXmlNames&&(a.childXmlNames=k.isArray(a.childXmlNames)?a.childXmlNames:[a.childXmlNames]),a.inFolder="true"===a.inFolder,a.metaFile="true"===a.metaFile,a}),a.partialSaveAllowed="true"===a.partialSaveAllowed,a.testRequired="true"===a.testRequired,a}).thenCall(b)},n.prototype.list=function(a,b,c){return k.isString(b)||(c=b,b=this._conn.version),k.isArray(a)||(a=[a]),this._invoke("listMetadata",{queries:a,asOfVersion:b},c)},n.prototype.retrieve=function(a,b){var c=this._invoke("retrieve",{request:a});return new p(this,c).thenCall(b)},n.prototype.checkRetrieveStatus=function(a,b){return this._invoke("checkRetrieveStatus",{asyncProcessId:a},b)},n.prototype.deploy=function(a,b,c){(!b||k.isFunction(b))&&(c=b,b={});var e=l.defer();if(k.isObject(a)&&k.isFunction(a.pipe)){var f=[];a.on("data",function(a){f.push(a)}),a.on("end",function(){e.resolve(d.concat(f).toString("base64"))})}else if(a instanceof d)e.resolve(a.toString("base64"));else{if(!(a instanceof String||"string"==typeof a))throw"Unexpected zipInput type";e.resolve(a)}var g=this,h=e.promise.then(function(a){return g._invoke("deploy",{ZipFile:a,DeployOptions:b},c)});return new q(this,h).thenCall(c)},n.prototype.checkDeployStatus=function(a,b,c){return k.isObject(b)||k.isBoolean(b)?b=!!b:(c=b,b=!1),this._invoke("checkDeployStatus",{asyncProcessId:a,includeDetails:b}).then(function(a){return a.done="true"===a.done,a.success="true"===a.success,a.checkOnly="true"===a.checkOnly,a.ignoreWarnings&&(a.ignoreWarnings="true"===a.ignoreWarnings),a.rollbackOnError&&(a.rollbackOnError="true"===a.rollbackOnError),a.numberComponentErrors=Number(a.numberComponentErrors),a.numberComponentsDeployed=Number(a.numberComponentsDeployed),a.numberComponentsTotal=Number(a.numberComponentsTotal),a.numberTestErrors=Number(a.numberTestErrors),a.numberTestsCompleted=Number(a.numberTestsCompleted),a.numberTestsTotal=Number(a.numberTestsTotal),a}).thenCall(c)};var o=function(a,b,c){this._meta=a,this._results=b,this._isArray=c};h(o,i.EventEmitter),o.prototype.then=function(a,b){var c=this;return this._results.then(function(b){var d=function(a){return a.$&&"true"===a.$["xsi:nil"]?null:(a.done="true"===a.done,a)};return b=k.isArray(b)?k.map(b,d):d(b),c._isArray&&!k.isArray(b)&&(b=[b]),a(b)},b)},o.prototype.thenCall=function(a){return k.isFunction(a)?this.then(function(b){c.nextTick(function(){a(null,b)})},function(b){c.nextTick(function(){a(b)})}):this},o.prototype.check=function(a){var b=this,c=this._meta;return this.then(function(a){var d=k.isArray(a)?k.map(a,function(a){return a.id}):a.id;return b._ids=d,c.checkStatus(d)}).thenCall(a)},o.prototype.poll=function(a,b){var c=this,d=(new Date).getTime(),e=function(){var f=(new Date).getTime();if(f>d+b){var g="Polling time out.";return c._ids&&(g+=" Process Id = "+c._ids),void c.emit("error",new Error(g))}c.check().then(function(b){for(var d=!0,f=k.isArray(b)?b:[b],g=0,h=f.length;h>g;g++){var i=f[g];i&&!i.done&&(c.emit("progress",i),d=!1)}d?c.emit("complete",b):setTimeout(e,a)},function(a){c.emit("error",a)})};setTimeout(e,a)},o.prototype.complete=function(a){var b=l.defer();this.on("complete",function(a){b.resolve(a)}),this.on("error",function(a){b.reject(a)});var c=this._meta;return this.poll(c.pollInterval,c.pollTimeout),b.promise.thenCall(a)};var p=function(a,b){p.super_.call(this,a,b)};h(p,o),p.prototype.complete=function(a){var b=this._meta;return p.super_.prototype.complete.call(this).then(function(a){return b.checkRetrieveStatus(a.id)}).thenCall(a)},p.prototype.stream=function(){var a=this,b=new j.Readable,c=!1;return b._read=function(){c||(c=!0,a.complete(function(a,c){a?b.emit("error",a):(b.push(new d(c.zipFile,"base64")),b.push(null))}))},b};var q=function(a,b){q.super_.call(this,a,b)};h(q,o),q.prototype.complete=function(a,b){k.isFunction(a)&&(b=a,a=!1);var c=this._meta;return q.super_.prototype.complete.call(this).then(function(b){return c.checkDeployStatus(b.id,a)}).thenCall(b)}}).call(this,a("_process"),a("buffer").Buffer)},{"../promise":24,"../soap":31,_process:44,buffer:38,events:42,inherits:53,"readable-stream":69,underscore:82}],6:[function(a,b,c){"use strict";var d=a("underscore"),e=a("../soap"),f=b.exports=function(a){this._conn=a};f.prototype._invoke=function(a,b,c,d){var f=new e(this._conn,{xmlns:"urn:partner.soap.sforce.com",endpointUrl:this._conn.instanceUrl+"/services/Soap/u/"+this._conn.version});return f.invoke(a,b,{result:c}).then(function(a){return a.result}).thenCall(d)};var g={};f.prototype.convertLead=function(a,b){var c=d.isArray(a)?[g.LeadConvertResult]:g.LeadConvertResult;return this._invoke("convertLead",{leadConverts:a},c,b)},g.LeadConvertResult={success:"boolean",errors:[],leadId:"string",accountId:"string",contactId:"string",opportunityId:"string"},f.prototype.merge=function(a,b){var c=d.isArray(a)?[g.MergeResult]:g.MergeResult;return this._invoke("merge",{mergeRequests:a},c,b)},g.MergeResult={success:"boolean",errors:[],id:"string",mergedRecordIds:["string"],updatedRelatedIds:["string"]},f.prototype.emptyRecycleBin=function(a,b){return this._invoke("emptyRecycleBin",{ids:a},[g.EmptyRecycleBinResult],b)},g.EmptyRecycleBinResult={id:"string",success:"boolean",errors:[]},f.prototype.describeTabs=function(a){return this._invoke("describeTabs",{},[g.DescribeTabSetResult],a)},g.DescribeTabSetResult={label:"string",logoUrl:"string",namespace:"string",selected:"boolean",tabs:[{colors:[{theme:"string",color:"string",context:"string"}],iconUrl:"string",icons:[{theme:"string",height:"number",width:"number",url:"string",contentType:"string"}],label:"string",custom:"boolean",miniIconUrl:"string",name:"string",sobjectName:"string",url:"string"}]},f.prototype.getServerTimestamp=function(a){return this._invoke("getServerTimestamp",{},g.GetServerTimestampResult,a)},g.GetServerTimestampResult={timestamp:"string"},f.prototype.getUserInfo=function(a){return this._invoke("getUserInfo",{},g.GetUserInfoResult,a)},g.GetUserInfoResult={accessibilityMode:"boolean",currencySymbol:"string",orgAttachmentFileSizeLimit:"number",orgDefaultCurrencyIsoCode:"string",orgDisallowHtmlAttachments:"boolean",orgHasPersonAccounts:"boolean",organizationId:"string",organizationMultiCurrency:"boolean",organizationName:"string",profileId:"string",roleId:"string",sessionSecondsValid:"number",userDefaultCurrencyIsoCode:"string",userEmail:"string",userFullName:"string",userId:"string",userLanguage:"string",userLocale:"string",userName:"string",userTimeZone:"string",userType:"string",userUiSkin:"string"},f.prototype.setPassword=function(a,b,c){return this._invoke("setPassword",{userId:a,password:b},c)},f.prototype.resetPassword=function(a,b){return this._invoke("resetPassword",{userId:a},b)},b.exports=f},{"../soap":31,underscore:82}],7:[function(a,b,c){"use strict";var d=a("events"),e=a("inherits"),f=a("underscore"),g=a("faye"),h=function(a,b){this._streaming=a,this.name=b};h.prototype.subscribe=function(a){return this._streaming.subscribe(this.name,a)},h.prototype.unsubscribe=function(a){return this._streaming.unsubscribe(this.name,a),this};var i=function(a,b){this._streaming=a,this._name=b};i.prototype.subscribe=function(a){return this._streaming.subscribe(this._name,a)},i.prototype.unsubscribe=function(a){return this._streaming.unsubscribe(this._name,a),this},i.prototype.push=function(a,b){var c=f.isArray(a);a=c?a:[a];var d=this._streaming._conn;return this._id||(this._id=d.sobject("StreamingChannel").findOne({Name:this._name},"Id").then(function(a){return a.Id})),this._id.then(function(b){var c="/sobjects/StreamingChannel/"+b+"/push";return d.requestPost(c,{pushEvents:a})}).then(function(a){return c?a:a[0]}).thenCall(b)};var j=function(a){this._conn=a};e(j,d.EventEmitter),j.prototype._createClient=function(){var a=[this._conn.instanceUrl,"cometd",this._conn.version].join("/"),b=new g.Client(a,{});return b.setHeader("Authorization","OAuth "+this._conn.accessToken),b},j.prototype.topic=function(a){this._topics=this._topics||{};var b=this._topics[a]=this._topics[a]||new h(this,a);return b},j.prototype.channel=function(a){return new i(this,a)},j.prototype.subscribe=function(a,b){this._fayeClient||(g.Transport.NodeHttp&&(g.Transport.NodeHttp.prototype.batching=!1),this._fayeClient=this._createClient());var c=0===a.indexOf("/")?a:"/topic/"+a;return this._fayeClient.subscribe(c,b)},j.prototype.unsubscribe=function(a,b){if(this._fayeClient){var c=0===a.indexOf("/")?a:"/topic/"+a;this._fayeClient.unsubscribe(c,b)}return this},b.exports=j},{events:42,faye:52,inherits:53,underscore:82}],8:[function(a,b,c){"use strict";var d=a("underscore"),e=a("../cache"),f=function(a){this._conn=a,this._logger=a._logger;var b=["query","queryMore","create","insert","retrieve","update","upsert","del","delete","destroy","describe","describeGlobal","sobject"];b.forEach(function(b){this[b]=a.constructor.prototype[b]},this),this.cache=new e;var c={key:function(a){return a?"describe."+a:"describe"}};this.describe$=this.cache.makeCacheable(this.describe,this,c),this.describe=this.cache.makeResponseCacheable(this.describe,this,c),this.describeSObject$=this.describe$,this.describeSObject=this.describe,c={key:"describeGlobal"},this.describeGlobal$=this.cache.makeCacheable(this.describeGlobal,this,c),this.describeGlobal=this.cache.makeResponseCacheable(this.describeGlobal,this,c),this.initialize()};f.prototype.initialize=function(){this.sobjects={},this.cache.clear(),this.cache.get("describeGlobal").on("value",d.bind(function(a){if(a.result){var b=d.map(a.result.sobjects,function(a){return a.name});d.each(b,this.sobject,this)}},this))},f.prototype._baseUrl=function(){return this._conn._baseUrl()+"/tooling"},f.prototype.request=function(){return this._conn.request.apply(this._conn,arguments)},f.prototype.executeAnonymous=function(a,b){var c=this._baseUrl()+"/executeAnonymous?anonymousBody="+encodeURIComponent(a);return this.request(c).thenCall(b)},f.prototype.runTestsAsynchronous=function(a,b){var c=this._baseUrl()+"/runTestsAsynchronous/?classids="+a.join(",");return this.request(c).thenCall(b)},f.prototype.completions=function(a,b){d.isString(a)||(b=a,a="apex");var c=this._baseUrl()+"/completions?type="+encodeURIComponent(a);return this.request(c).thenCall(b)},b.exports=f},{"../cache":14,underscore:82}],9:[function(a,b,c){"use strict";function d(a){var b={};return a.split(/\n/).forEach(function(a){var c=a.split(/\s*:\s*/),d=c[0].toLowerCase(),e=c[1];b[d]=e}),b}var e=a("readable-stream").Duplex,f=a("underscore");b.exports={supported:"object"==typeof Sfdc&&"undefined"!=typeof Sfdc.canvas,createRequest:function(a){return function(b,c){function g(e){var g={client:a.client,method:b.method,data:e};if(b.headers){g.headers={};for(var j in b.headers)"content-type"===j.toLowerCase()?g.contentType=b.headers[j]:g.headers[j]=b.headers[j]}g.success=function(a){var b=d(a.responseHeaders),e=a.payload;f.isString(e)||(e=JSON.stringify(e)),h={statusCode:a.status,headers:b,body:e},c&&c(null,h,h.body),i.end()},g.failure=function(a){c&&c(a)},Sfdc.canvas.client.ajax(b.url,g)}var h,i=new e;i._read=function(a){h&&i.push(h.body)};var j=[],k=!1;return i._write=function(a,b,c){j.push(a.toString(b)),c()},i.on("finish",function(){k||(g(j.join("")),k=!0)}),(b.body||""===b.body||!/^(put|post|patch)$/i.test(b.method))&&(g(b.body),k=!0),i}}}},{"readable-stream":69,underscore:82}],10:[function(a,b,c){"use strict";function d(a,b,c){var d=screen.width/2-b/2,e=screen.height/2-c/2;return window.open(a,null,"location=yes,toolbar=no,status=no,menubar=no,width="+b+",height="+c+",top="+e+",left="+d)}function e(){var a=f(),b=localStorage.getItem("jsforce_state");if(a&&b&&a.body.state===b){localStorage.removeItem("jsforce_state");var c=b.split("."),d=c[0],e=c[1],g=new n(d);return a.success?(g._storeTokens(a.body),location.hash=""):g._storeError(a.body),"popup"===e&&window.close(),!0}}function f(){var a;if(window.location.hash){if(a=i.parse(window.location.hash.substring(1)),a.access_token)return{success:!0,body:a}}else if(window.location.search&&(a=i.parse(window.location.search.substring(1)),a.error))return{success:!1,body:a}}var g=a("events"),h=a("inherits"),i=a("querystring"),j=a("underscore"),k=a("../connection"),l=a("../oauth2"),m=0,n=function(a){this._prefix=a||"jsforce"+m++,this.connection=null};h(n,g.EventEmitter),n.prototype.init=function(a){if(!e()){this.config=a,this.connection=new k(a);var b=this._getTokens();if(b){this.connection.initialize(b);var c=this;setTimeout(function(){c.emit("connect",c.connection)},10)}}},n.prototype.login=function(a,b){j.isFunction(a)&&(b=a,a={}),a=a||{},b=b||function(){},j.extend(a,this.config);this._prompt(a,b)},n.prototype._prompt=function(a,b){var c=this,e=new l(a),f=Math.random().toString(36).substring(2),g=[this._prefix,"popup",f].join(".");localStorage.setItem("jsforce_state",g);var h=e.getAuthorizationUrl({response_type:"token",
scope:a.scope,state:g}),i=a.size||{},j=d(h,i.width||912,i.height||513);if(!j)return g=[this._prefix,"redirect",f].join("."),localStorage.setItem("jsforce_state",g),h=e.getAuthorizationUrl({response_type:"token",scope:a.scope,state:g}),void(location.href=h);c._removeTokens();var k=setInterval(function(){try{if(!j||j.closed){clearInterval(k);var a=c._getTokens();if(a)c.connection.initialize(a),c.emit("connect",c.connection),b(null,{status:"connect"});else{var d=c._getError();d?b(new Error(d.error+": "+d.error_description)):b(null,{status:"cancel"})}}}catch(e){}},1e3)},n.prototype.isLoggedIn=function(){return!(!this.connection||!this.connection.accessToken)},n.prototype.logout=function(){this.connection.logout(),this._removeTokens(),this.emit("disconnect")},n.prototype._getTokens=function(){var a=new RegExp("(^|;\\s*)"+this._prefix+"_loggedin=true(;|$)");if(document.cookie.match(a)){var b=Number(localStorage.getItem(this._prefix+"_issued_at"));if(Date.now()<b+72e5){var c,d=localStorage.getItem(this._prefix+"_id");if(d){var e=d.split("/");c={id:e.pop(),organizationId:e.pop(),url:d}}return{accessToken:localStorage.getItem(this._prefix+"_access_token"),instanceUrl:localStorage.getItem(this._prefix+"_instance_url"),userInfo:c}}}return null},n.prototype._storeTokens=function(a){localStorage.setItem(this._prefix+"_access_token",a.access_token),localStorage.setItem(this._prefix+"_instance_url",a.instance_url),localStorage.setItem(this._prefix+"_issued_at",a.issued_at),localStorage.setItem(this._prefix+"_id",a.id),document.cookie=this._prefix+"_loggedin=true;"},n.prototype._removeTokens=function(){localStorage.removeItem(this._prefix+"_access_token"),localStorage.removeItem(this._prefix+"_instance_url"),localStorage.removeItem(this._prefix+"_issued_at"),localStorage.removeItem(this._prefix+"_id"),document.cookie=this._prefix+"_loggedin="},n.prototype._getError=function(){try{var a=JSON.parse(localStorage.getItem(this._prefix+"_error"));return localStorage.removeItem(this._prefix+"_error"),a}catch(b){}},n.prototype._storeError=function(a){localStorage.setItem(this._prefix+"_error",JSON.stringify(a))},b.exports=new n,b.exports.Client=n},{"../connection":15,"../oauth2":22,events:42,inherits:53,querystring:47,underscore:82}],11:[function(a,b,c){"use strict";var d,e=a("../jsforce");try{d=a("../core-require")}catch(f){}e.browser=a("./client"),e.modules=e.modules||{},e.require=function(a){try{return d(a)}catch(b){if("jsforce"===a||"./jsforce"===a)return e;if("./"===a.substring(0,2)){var c=a.substring(2).split("/"),f=c.pop();c.push(f.replace(/(^|\-)([a-zA-Z])/g,function(a,b,c){return c.toUpperCase()}));for(var g=e.modules;g&&c.length>0;)g=g[c.shift()];return g}}},b.exports=e},{"../core-require":16,"../jsforce":20,"./client":10}],12:[function(a,b,c){"use strict";var d=0;b.exports={supported:"undefined"!=typeof window,createRequest:function(a,b){return a=a||"callback",b=b||1e4,function(c,e){if("GET"!==c.method.toUpperCase())return e(new Error("JSONP only supports GET request."));var f="_jsforce_jsonpCallback_"+ ++d,g=window,h=c.url;h+=h.indexOf("?")>0?"&":"?",h+=a+"="+f;var i=document.createElement("script");i.type="text/javascript",i.src=h,document.documentElement.appendChild(i);var j=setTimeout(function(){k(),e(new Error("JSONP call time out."))},b);g[f]=function(a){k(),e(null,{statusCode:200,headers:{"content-type":"application/json"},body:JSON.stringify(a)})};var k=function(){clearTimeout(j),document.documentElement.removeChild(i),delete g[f]}}}}},{}],13:[function(a,b,c){"use strict";function d(a){var b=(a.getAllResponseHeaders()||"").split(/[\r\n]+/);return f.map(b,function(a){return a.split(/\s*:/)[0].toLowerCase()})}var e=a("readable-stream").Duplex,f=a("underscore");b.exports=function(a,b){var c=new XMLHttpRequest;if(c.open(a.method,a.url),a.headers)for(var g in a.headers)c.setRequestHeader(g,a.headers[g]);c.setRequestHeader("Accept","*/*");var h,i=new e;i._read=function(a){h&&i.push(h.body)};var j=[],k=!1;return i._write=function(a,b,c){j.push(a.toString("buffer"===b?"binary":b)),c()},i.on("finish",function(){k||(c.send(j.join("")),k=!0)}),(a.body||""===a.body||!/^(put|post|patch)$/i.test(a.method))&&(c.send(a.body),k=!0),c.onreadystatechange=function(){if(4===c.readyState){var a=d(c),e={};f.forEach(a,function(a){a&&(e[a]=c.getResponseHeader(a))}),h={statusCode:c.status,headers:e,body:c.response},h.statusCode||(h.statusCode=400,h.body="Access Declined"),b&&b(null,h,h.body),i.end()}},i}},{"readable-stream":69,underscore:82}],14:[function(a,b,c){"use strict";function d(a,b){return b=Array.prototype.slice.apply(b),a+"("+g.map(b,function(a){return JSON.stringify(a)}).join(",")+")"}var e=a("events"),f=a("inherits"),g=a("underscore")._,h=function(){this.fetching=!1};f(h,e.EventEmitter),h.prototype.get=function(a){return a?(this.once("value",a),void(g.isUndefined(this._value)||this.emit("value",this._value))):this._value},h.prototype.set=function(a){this._value=a,this.emit("value",this._value)},h.prototype.clear=function(){this.fetching=!1,delete this._value};var i=function(){this._entries={}};i.prototype.get=function(a){if(a&&this._entries[a])return this._entries[a];var b=new h;return this._entries[a]=b,b},i.prototype.clear=function(a){for(var b in this._entries)a&&0!==b.indexOf(a)||this._entries[b].clear()},i.prototype.makeResponseCacheable=function(a,b,c){var e=this;return c=c||{},function(){var f=Array.prototype.slice.apply(arguments),h=f.pop();g.isFunction(h)||(f.push(h),h=null);var i=g.isString(c.key)?c.key:g.isFunction(c.key)?c.key.apply(b,f):d(c.namespace,f),j=e.get(i);j.fetching=!0,h&&f.push(function(a,b){j.set({error:a,result:b}),h(a,b)});var k,l;try{k=a.apply(b||this,f)}catch(m){l=m}if(k&&g.isFunction(k.then))return h?k:k.then(function(a){return j.set({error:void 0,result:a}),a},function(a){throw j.set({error:a,result:void 0}),a});if(j.set({error:l,result:k}),l)throw l;return k}},i.prototype.makeCacheable=function(a,b,c){var e=this;c=c||{};var f=function(){var f=Array.prototype.slice.apply(arguments),h=f.pop();g.isFunction(h)||f.push(h);var i=g.isString(c.key)?c.key:g.isFunction(c.key)?c.key.apply(b,f):d(c.namespace,f),j=e.get(i);if(!g.isFunction(h)){var k=j.get();if(!k)throw new Error("Function call result is not cached yet.");if(k.error)throw k.error;return k.result}j.get(function(a){h(a.error,a.result)}),j.fetching||(j.fetching=!0,f.push(function(a,b){j.set({error:a,result:b})}),a.apply(b||this,f))};return f.clear=function(){var a=g.isString(c.key)?c.key:g.isFunction(c.key)?c.key.apply(b,arguments):d(c.namespace,arguments);e.clear(a)},f},b.exports=i},{events:42,inherits:53,underscore:82}],15:[function(a,b,c){(function(c){"use strict";function d(a,b){a.oauth2.refreshToken(a.refreshToken,function(c,d){if(c)return b(c);var e=g(d.id);a.initialize({instanceUrl:d.instance_url,accessToken:d.access_token,userInfo:e}),b(null,d.access_token,d)})}function e(a){if(l.isString(a)){if("{"===a[0])return JSON.parse(a);var b=a.split(".").pop(),d=new c(b,"base64").toString("utf-8");return JSON.parse(d)}return a}function f(a){function b(a){return 10>a?"0"+a:a}return a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"+00:00"}function g(a){var b=a.split("/"),c=b.pop(),d=b.pop();return{id:c,organizationId:d,url:a}}function h(a,b){return function(c,d){c.login(a,b,function(a){return a?d(a):void d(null,c.accessToken)})}}function i(a){return a&&String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}var j=a("events"),k=a("inherits"),l=a("underscore")._,m=a("./promise"),n=a("./logger"),o=a("./oauth2"),p=a("./query"),q=a("./sobject"),r=a("./quick-action"),s=a("./http-api"),t=a("./transport"),u=a("./cache"),v={loginUrl:"https://login.salesforce.com",instanceUrl:"",version:"34.0"},w=b.exports=function(b){var c=a("./api/bulk"),e=a("./api/streaming"),f=a("./api/tooling"),g=a("./api/analytics"),h=a("./api/chatter"),i=a("./api/apex"),j=a("./api/metadata"),k=a("./api/soap"),l=a("./process");b=b||{},this._logger=new n(b.logLevel);var m=b.oauth2||{loginUrl:b.loginUrl,clientId:b.clientId,clientSecret:b.clientSecret,redirectUri:b.redirectUri};this.oauth2=m=m instanceof o?m:new o(m),this.loginUrl=b.loginUrl||m.loginUrl||v.loginUrl,this.version=b.version||v.version,this.maxRequest=b.maxRequest||this.maxRequest||10,this._transport=b.proxyUrl?new t.ProxyTransport(b.proxyUrl):new t,this.callOptions=b.callOptions,e&&(this.streaming=new e(this)),c&&(this.bulk=new c(this)),f&&(this.tooling=new f(this)),g&&(this.analytics=new g(this)),h&&(this.chatter=new h(this)),j&&(this.metadata=new j(this)),k&&(this.soap=new k(this)),i&&(this.apex=new i(this)),this.process=new l(this),this.cache=new u;var p=b.refreshFn;!p&&this.oauth2.clientId&&this.oauth2.clientSecret&&(p=d),p&&(this._refreshDelegate=new s.SessionRefreshDelegate(this,p));var q={key:function(a){return a?"describe."+a:"describe"}};this.describe$=this.cache.makeCacheable(this.describe,this,q),this.describe=this.cache.makeResponseCacheable(this.describe,this,q),this.describeSObject$=this.describe$,this.describeSObject=this.describe,q={key:"describeGlobal"},this.describeGlobal$=this.cache.makeCacheable(this.describeGlobal,this,q),this.describeGlobal=this.cache.makeResponseCacheable(this.describeGlobal,this,q),this.initialize(b)};k(w,j.EventEmitter),w.prototype.initialize=function(a){if(!a.instanceUrl&&a.serverUrl&&(a.instanceUrl=a.serverUrl.split("/").slice(0,3).join("/")),this.instanceUrl=a.instanceUrl||a.serverUrl||this.instanceUrl||v.instanceUrl,this.accessToken=a.sessionId||a.accessToken||this.accessToken,this.refreshToken=a.refreshToken||this.refreshToken,this.refreshToken&&!this._refreshDelegate)throw new Error("Refresh token is specified without oauth2 client information or refresh function");this.signedRequest=a.signedRequest&&e(a.signedRequest),this.signedRequest&&(this.accessToken=this.signedRequest.client.oauthToken),a.userInfo&&(this.userInfo=a.userInfo),this.limitInfo={},this.sobjects={},this.cache.clear(),this.cache.get("describeGlobal").on("value",l.bind(function(a){if(a.result){var b=l.map(a.result.sobjects,function(a){return a.name});l.each(b,this.sobject,this)}},this)),this.tooling&&this.tooling.initialize(),this._sessionType=a.sessionId?"soap":"oauth2"},w.prototype._baseUrl=function(){return[this.instanceUrl,"services/data","v"+this.version].join("/")},w.prototype._normalizeUrl=function(a){return"/"===a[0]?0===a.indexOf("/services/")?this.instanceUrl+a:this._baseUrl()+a:a},w.prototype.request=function(a,b,c){"function"==typeof b&&(c=b,b=null),b=b||{};var d=this;l.isString(a)&&(a={method:"GET",url:a}),a.url=this._normalizeUrl(a.url);var e=new s(this,b);return e.on("response",function(a){if(a.headers&&a.headers["sforce-limit-info"]){var b=a.headers["sforce-limit-info"].match(/api\-usage=(\d+)\/(\d+)/);b&&(d.limitInfo={apiUsage:{used:parseInt(b[1],10),limit:parseInt(b[2],10)}})}}),e.request(a).thenCall(c)},w.prototype.requestGet=function(a,b,c){var d={method:"GET",url:a};return this.request(d,b,c)},w.prototype.requestPost=function(a,b,c,d){var e={method:"POST",url:a,body:JSON.stringify(b),headers:{"content-type":"application/json"}};return this.request(e,c,d)},w.prototype.requestPut=function(a,b,c,d){var e={method:"PUT",url:a,body:JSON.stringify(b),headers:{"content-type":"application/json"}};return this.request(e,c,d)},w.prototype.requestPatch=function(a,b,c,d){var e={method:"PATCH",url:a,body:JSON.stringify(b),headers:{"content-type":"application/json"}};return this.request(e,c,d)},w.prototype.requestDelete=function(a,b,c){var d={method:"DELETE",url:a};return this.request(d,b,c)},w.prototype.query=function(a,b){var c=new p(this,a);return b&&c.run(b),c},w.prototype.queryAll=function(a,b){var c=new p(this,a);return c.scanAll(!0),b&&c.run(b),c},w.prototype.queryMore=function(a,b){var c=new p(this,null,a);return b&&c.run(b),c},w.prototype.retrieve=function(a,b,c,d){"function"==typeof c&&(d=c,c={});var e=this,f=l.isArray(b);return b=f?b:[b],b.length>e.maxRequest?m.reject(new Error("Exceeded max limit of concurrent call")).thenCall(d):m.all(l.map(b,function(b){if(!b)return m.reject(new Error("Invalid record ID. Specify valid record ID value")).thenCall(d);var c=[e._baseUrl(),"sobjects",a,b].join("/");return e.request(c)})).then(function(a){return!f&&l.isArray(a)?a[0]:a}).thenCall(d)},w.prototype.insert=w.prototype.create=function(a,b,c,d){l.isString(a)||(d=c,c=b,b=a,a=null),"function"==typeof c&&(d=c,c={}),c=c||{};var e=this,f=l.isArray(b);return b=f?b:[b],b.length>e.maxRequest?m.reject(new Error("Exceeded max limit of concurrent call")).thenCall(d):m.all(l.map(b,function(b){var d=a||b.attributes&&b.attributes.type||b.type;if(!d)throw new Error("No SObject Type defined in record");b=l.clone(b),delete b.Id,delete b.type,delete b.attributes;var f=[e._baseUrl(),"sobjects",d].join("/");return e.request({method:"POST",url:f,body:JSON.stringify(b),headers:l.defaults(c.headers||{},{"Content-Type":"application/json"})})})).then(function(a){return!f&&l.isArray(a)?a[0]:a}).thenCall(d)},w.prototype.update=function(a,b,c,d){l.isString(a)||(d=c,c=b,b=a,a=null),"function"==typeof c&&(d=c,c={}),c=c||{};var e=this,f=l.isArray(b);return b=f?b:[b],b.length>e.maxRequest?m.reject(new Error("Exceeded max limit of concurrent call")).thenCall(d):m.all(l.map(b,function(b){var d=b.Id;if(!d)throw new Error("Record id is not found in record.");var f=a||b.attributes&&b.attributes.type||b.type;if(!f)throw new Error("No SObject Type defined in record");b=l.clone(b),delete b.Id,delete b.type,delete b.attributes;var g=[e._baseUrl(),"sobjects",f,d].join("/");return e.request({method:"PATCH",url:g,body:JSON.stringify(b),headers:l.defaults(c.headers||{},{"Content-Type":"application/json"})},{noContentResponse:{id:d,success:!0,errors:[]}})})).then(function(a){return!f&&l.isArray(a)?a[0]:a}).thenCall(d)},w.prototype.upsert=function(a,b,c,d,e){l.isString(a)||(e=d,d=c,c=b,b=a,a=null),"function"==typeof d&&(e=d,d={}),d=d||{};var f=this,g=l.isArray(b);return b=g?b:[b],b.length>f.maxRequest?m.reject(new Error("Exceeded max limit of concurrent call")).thenCall(e):m.all(l.map(b,function(b){var e=a||b.attributes&&b.attributes.type||b.type,g=b[c];if(!g)return m.reject(new Error("External ID is not defined in the record"));b=l.clone(b),delete b[c],delete b.type,delete b.attributes;var h=[f._baseUrl(),"sobjects",e,c,g].join("/");return f.request({method:"PATCH",url:h,body:JSON.stringify(b),headers:l.defaults(d.headers||{},{"Content-Type":"application/json"})},{noContentResponse:{success:!0,errors:[]}})})).then(function(a){return!g&&l.isArray(a)?a[0]:a}).thenCall(e)},w.prototype["delete"]=w.prototype.del=w.prototype.destroy=function(a,b,c,d){"function"==typeof c&&(d=c,c={}),c=c||{};var e=this,f=l.isArray(b);return b=f?b:[b],b.length>e.maxRequest?m.reject(new Error("Exceeded max limit of concurrent call")).thenCall(d):m.all(l.map(b,function(b){var d=[e._baseUrl(),"sobjects",a,b].join("/");return e.request({method:"DELETE",url:d,headers:c.headers||null},{noContentResponse:{id:b,success:!0,errors:[]}})})).then(function(a){return!f&&l.isArray(a)?a[0]:a}).thenCall(d)},w.prototype.search=function(a,b){var c=this._baseUrl()+"/search?q="+encodeURIComponent(a);return this.request(c).thenCall(b)},w.prototype.describe=w.prototype.describeSObject=function(a,b){var c=[this._baseUrl(),"sobjects",a,"describe"].join("/");return this.request(c).thenCall(b)},w.prototype.describeGlobal=function(a){var b=this._baseUrl()+"/sobjects";return this.request(b).thenCall(a)},w.prototype.sobject=function(a){this.sobjects=this.sobjects||{};var b=this.sobjects[a]=this.sobjects[a]||new q(this,a);return b},w.prototype.identity=function(a){var b=this,c=this.userInfo&&this.userInfo.url;return m.resolve(c?{identity:c}:this.request(this._baseUrl())).then(function(a){var c=a.identity;return c+="?format=json&oauth_token="+encodeURIComponent(b.accessToken),b.request(c,null,{jsonp:"callback"})}).then(function(a){return b.userInfo={id:a.user_id,organizationId:a.organization_id,url:a.id},a}).thenCall(a)},w.prototype.authorize=function(a,b){var c=this,d=this._logger;return this.oauth2.requestToken(a).then(function(a){d.debug("OAuth2 token response = "+JSON.stringify(a));var b=g(a.id);return c.initialize({instanceUrl:a.instance_url,accessToken:a.access_token,refreshToken:a.refresh_token,userInfo:b}),d.debug("<login> completed. user id = "+b.id+", org id = "+b.organizationId),b}).thenCall(b)},w.prototype.login=function(a,b,c){return this._refreshDelegate=new s.SessionRefreshDelegate(this,h(a,b)),this.oauth2&&this.oauth2.clientId&&this.oauth2.clientSecret?this.loginByOAuth2(a,b,c):this.loginBySoap(a,b,c)},w.prototype.loginByOAuth2=function(a,b,c){var d=this,e=this._logger;return this.oauth2.authenticate(a,b).then(function(a){e.debug("OAuth2 token response = "+JSON.stringify(a));var b=g(a.id);return d.initialize({instanceUrl:a.instance_url,accessToken:a.access_token,userInfo:b}),e.debug("<login> completed. user id = "+b.id+", org id = "+b.organizationId),b}).thenCall(c)},w.prototype.loginBySoap=function(a,b,c){var d=this,e=this._logger,f=['<se:Envelope xmlns:se="http://schemas.xmlsoap.org/soap/envelope/">',"<se:Header/>","<se:Body>",'<login xmlns="urn:partner.soap.sforce.com">',"<username>"+i(a)+"</username>","<password>"+i(b)+"</password>","</login>","</se:Body>","</se:Envelope>"].join(""),g=[this.loginUrl,"services/Soap/u",this.version].join("/");return this._transport.httpRequest({method:"POST",url:g,body:f,headers:{"Content-Type":"text/xml",SOAPAction:'""'}}).then(function(a){var b;if(a.statusCode>=400){b=a.body.match(/<faultstring>([^<]+)<\/faultstring>/);var c=b&&b[1];throw new Error(c||a.body)}e.debug("SOAP response = "+a.body),b=a.body.match(/<serverUrl>([^<]+)<\/serverUrl>/);var f=b&&b[1];b=a.body.match(/<sessionId>([^<]+)<\/sessionId>/);var h=b&&b[1];b=a.body.match(/<userId>([^<]+)<\/userId>/);var i=b&&b[1];b=a.body.match(/<organizationId>([^<]+)<\/organizationId>/);var j=b&&b[1],k=g.split("/").slice(0,3).join("/");k+="/id/"+j+"/"+i;var l={id:i,organizationId:j,url:k};return d.initialize({serverUrl:f.split("/").slice(0,3).join("/"),sessionId:h,userInfo:l}),e.debug("<login> completed. user id = "+i+", org id = "+j),l}).thenCall(c)},w.prototype.logout=function(a){return"oauth2"===this._sessionType?this.logoutByOAuth2(a):this.logoutBySoap(a)},w.prototype.logoutByOAuth2=function(a){var b=this;this._logger;return this.oauth2.revokeToken(this.accessToken).then(function(){return b.accessToken=null,b.userInfo=null,b.refreshToken=null,b.instanceUrl=null,void b.cache.clear()}).thenCall(a)},w.prototype.logoutBySoap=function(a){var b=this,c=this._logger,d=['<se:Envelope xmlns:se="http://schemas.xmlsoap.org/soap/envelope/">',"<se:Header>",'<SessionHeader xmlns="urn:partner.soap.sforce.com">',"<sessionId>"+i(this.accessToken)+"</sessionId>","</SessionHeader>","</se:Header>","<se:Body>",'<logout xmlns="urn:partner.soap.sforce.com"/>',"</se:Body>","</se:Envelope>"].join("");return this._transport.httpRequest({method:"POST",url:[this.instanceUrl,"services/Soap/u",this.version].join("/"),body:d,headers:{"Content-Type":"text/xml",SOAPAction:'""'}}).then(function(a){if(c.debug("SOAP statusCode = "+a.statusCode+", response = "+a.body),a.statusCode>=400){var d=a.body.match(/<faultstring>([^<]+)<\/faultstring>/),e=d&&d[1];throw new Error(e||a.body)}return b.accessToken=null,b.userInfo=null,b.refreshToken=null,b.instanceUrl=null,void b.cache.clear()}).thenCall(a)},w.prototype.recent=function(a,b,c){l.isString(a)||(c=b,b=a,a=void 0),l.isNumber(b)||(c=b,b=void 0);var d;return a?(d=[this._baseUrl(),"sobjects",a].join("/"),this.request(d).then(function(a){return b?a.recentItems.slice(0,b):a.recentItems}).thenCall(c)):(d=this._baseUrl()+"/recent",b&&(d+="?limit="+b),this.request(d).thenCall(c))},w.prototype.updated=function(a,b,c,d){var e=[this._baseUrl(),"sobjects",a,"updated"].join("/");return"string"==typeof b&&(b=new Date(b)),b instanceof Date&&(b=f(b)),b&&(e+="?start="+encodeURIComponent(b)),"string"==typeof c&&(c=new Date(c)),c instanceof Date&&(c=f(c)),c&&(e+="&end="+encodeURIComponent(c)),this.request(e).thenCall(d)},w.prototype.deleted=function(a,b,c,d){var e=[this._baseUrl(),"sobjects",a,"deleted"].join("/");return"string"==typeof b&&(b=new Date(b)),b instanceof Date&&(b=f(b)),b&&(e+="?start="+encodeURIComponent(b)),"string"==typeof c&&(c=new Date(c)),c instanceof Date&&(c=f(c)),c&&(e+="&end="+encodeURIComponent(c)),this.request(e).thenCall(d)},w.prototype.tabs=function(a){var b=[this._baseUrl(),"tabs"].join("/");return this.request(b).thenCall(a)},w.prototype.limits=function(a){var b=[this._baseUrl(),"limits"].join("/");return this.request(b).thenCall(a)},w.prototype.theme=function(a){var b=[this._baseUrl(),"theme"].join("/");return this.request(b).thenCall(a)},w.prototype.quickActions=function(a){return this.request("/quickActions").thenCall(a)},w.prototype.quickAction=function(a){return new r(this,"/quickActions/"+a)}}).call(this,a("buffer").Buffer)},{"./api/analytics":1,"./api/apex":2,"./api/bulk":3,"./api/chatter":4,"./api/metadata":5,"./api/soap":6,"./api/streaming":7,"./api/tooling":8,"./cache":14,"./http-api":19,"./logger":21,"./oauth2":22,"./process":23,"./promise":24,"./query":25,"./quick-action":26,"./sobject":32,"./transport":34,buffer:38,events:42,inherits:53,underscore:82}],16:[function(a,b,c){b.exports=function(b){return a(b)},a("events"),a("inherits"),a("underscore"),a("./promise"),a("./logger"),a("./oauth2"),a("./query"),a("./sobject"),a("./quick-action"),a("./http-api"),a("./transport"),a("./cache"),a("./process"),a("./date"),a("xml2js"),a("./csv"),a("../package.json"),a("./connection"),a("./record-stream"),a("./registry/file-registry"),a("querystring"),a("promise/lib/es6-extensions"),a("readable-stream"),a("./soql-builder"),a("through2"),a("./record"),a("request"),a("./browser/canvas"),a("./browser/jsonp")},{"../package.json":35,"./browser/canvas":9,"./browser/jsonp":12,"./cache":14,"./connection":15,"./csv":17,"./date":18,"./http-api":19,"./logger":21,"./oauth2":22,"./process":23,"./promise":24,"./query":25,"./quick-action":26,"./record":28,"./record-stream":27,"./registry/file-registry":29,"./sobject":32,"./soql-builder":33,"./transport":34,events:42,inherits:53,"promise/lib/es6-extensions":55,querystring:47,"readable-stream":69,request:13,through2:81,underscore:82,xml2js:85}],17:[function(a,b,c){"use strict";function d(a,b,c){c=c||{},b||(b=e(a,c));var d=j.map(a,function(a){return f(a,b,c)});return g(b)+"\n"+d.join("\n")}function e(a,b){b=b||{};var c={};return j.forEach(a,function(a){for(var b in a){var d=a[b];!a.hasOwnProperty(b)||null!==d&&"object"==typeof d||(c[b]=!0)}}),j.keys(c)}function f(a,b,c){c=c||{};var d=[];return j.forEach(b,function(b){var e=a[b];null===e&&"undefined"!=typeof c.nullValue&&(e=c.nullValue),"undefined"==typeof e&&(e=null),d.push(e)}),g(d)}function g(a){return j.map(a,h).join(",")}function h(a){return(null===a||"undefined"==typeof a)&&(a=""),a=String(a),(a.indexOf('"')>=0||a.indexOf(",")>=0||/[\n\r]/.test(a))&&(a='"'+a.replace(/"/g,'""')+'"'),a}function i(a){var b,c=new k(a),d=[];if(c.nextLine())for(b=c.nextToken();!j.isUndefined(b)&&!j.isNull(b);)d.push(b),b=c.nextToken();for(var e=[];c.nextLine();){var f={};b=c.nextToken();for(var g=0;!j.isUndefined(b)&&!j.isNull(b);){var h=d[g++];f[h]=b,b=c.nextToken()}e.push(f)}return e}var j=a("underscore"),k=(a("./date"),function(a){this.text=a,this.cursor=0});k.prototype={nextToken:function(){var a,b=!1,c=this.text.charAt(this.cursor);if(""===c||"\r"===c||"\n"===c)return null;if('"'===c&&(b=!0),b){for(var d=this.cursor;;){if(d++,d=this.text.indexOf('"',d),0>d||'"'!==this.text.charAt(d+1))break;d++}if(d>=0){var e=this.text.charAt(d+1);a=this.text.substring(this.cursor,d+1),this.cursor=d+(","===e?2:1)}else a=this.text.substring(this.cursor),this.cursor=this.text.length;return a.replace(/""/g,'"').replace(/^"/,"").replace(/"$/,"")}var f=this.text.indexOf(",",this.cursor),g=this.text.indexOf("\r",this.cursor),h=this.text.indexOf("\n",this.cursor);f=0>f?this.text.length+1:f,g=0>g?this.text.length+1:g,h=0>h?this.text.length+1:h;var i=Math.min(f,g,h,this.text.length);return a=this.text.substring(this.cursor,i),this.cursor=i,f===i&&this.cursor++,a},nextLine:function(){for(var a=this.text.charAt(this.cursor);"\r"===a||"\n"===a;a=this.text.charAt(++this.cursor));return this.cursor!==this.text.length}},b.exports={toCSV:d,extractHeaders:e,recordToCSV:f,arrayToCSV:g,parseCSV:i}},{"./date":18,underscore:82}],18:[function(a,b,c){"use strict";function d(a){return(10>a?"0":"")+a}function e(a){return function(b){return new g(a+":"+b)}}var f=a("underscore")._,g=b.exports=function(a){this._literal=a};g.prototype.toString=g.prototype.toJSON=function(){return this._literal},g.toDateLiteral=function(a){f.isNumber(a)?a=new Date(a):f.isString(a)&&(a=g.parseDate(a));var b=a.getFullYear(),c=a.getMonth()+1,e=a.getDate(),h=[b,d(c),d(e)].join("-");return new g(h)},g.toDateTimeLiteral=function(a){f.isNumber(a)?a=new Date(a):f.isString(a)&&(a=g.parseDate(a));var b=a.getUTCFullYear(),c=a.getUTCMonth()+1,e=a.getUTCDate(),h=a.getUTCHours(),i=a.getUTCMinutes(),j=a.getUTCSeconds(),k=[b,d(c),d(e)].join("-")+"T"+[d(h),d(i),d(j)].join(":")+"Z";return new g(k)},g.parseDate=function(a){var b=new Date,c=/^([\d]{4})-?([\d]{2})-?([\d]{2})(T([\d]{2}):?([\d]{2}):?([\d]{2})(.([\d]{3}))?(Z|([\+\-])([\d]{2}):?([\d]{2})))?$/,d=a.match(c);if(d){if(b=new Date(0),d[4]){if(b.setUTCFullYear(parseInt(d[1],10)),b.setUTCDate(parseInt(d[3],10)),b.setUTCMonth(parseInt(d[2],10)-1),b.setUTCHours(parseInt(d[5],10)),b.setUTCMinutes(parseInt(d[6],10)),b.setUTCSeconds(parseInt(d[7],10)),b.setUTCMilliseconds(parseInt(d[9]||"0",10)),d[10]&&"Z"!==d[10]){var e=60*parseInt(d[12],10)+parseInt(d[13],10);b.setTime(("+"===d[11]?-1:1)*e*60*1e3+b.getTime())}}else b.setFullYear(parseInt(d[1],10)),b.setDate(parseInt(d[3],10)),b.setMonth(parseInt(d[2],10)-1),b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0);return b}throw new Error("Invalid date format is specified : "+a)};var h={YESTERDAY:1,TODAY:1,TOMORROW:1,LAST_WEEK:1,THIS_WEEK:1,NEXT_WEEK:1,LAST_MONTH:1,THIS_MONTH:1,NEXT_MONTH:1,LAST_90_DAYS:1,NEXT_90_DAYS:1,LAST_N_DAYS:2,NEXT_N_DAYS:2,NEXT_N_WEEKS:2,LAST_N_WEEKS:2,NEXT_N_MONTHS:2,LAST_N_MONTHS:2,THIS_QUARTER:1,LAST_QUARTER:1,NEXT_QUARTER:1,NEXT_N_QUARTERS:2,LAST_N_QUARTERS:2,THIS_YEAR:1,LAST_YEAR:1,NEXT_YEAR:1,NEXT_N_YEARS:2,LAST_N_YEARS:2,THIS_FISCAL_QUARTER:1,LAST_FISCAL_QUARTER:1,NEXT_FISCAL_QUARTER:1,NEXT_N_FISCAL_QUARTERS:2,LAST_N_FISCAL_QUARTERS:2,THIS_FISCAL_YEAR:1,LAST_FISCAL_YEAR:1,NEXT_FISCAL_YEAR:1,NEXT_N_FISCAL_YEARS:2,LAST_N_FISCAL_YEARS:2};for(var i in h){var j=h[i];g[i]=1===j?new g(i):e(i)}},{underscore:82}],19:[function(a,b,c){"use strict";function d(a){return JSON.parse(a)}function e(b){var c={};if(a("xml2js").parseString(b,{explicitArray:!1},function(a,b){c={error:a,result:b}}),c.error)throw c.error;return c.result}function f(b){return a("./csv").parseCSV(b)}function g(a){return a}var h=a("inherits"),i=a("events"),j=a("underscore"),k=a("./promise"),l=function(a,b){b=b||{},this._conn=a,this.on("resume",function(b){a.emit("resume",b)}),this._responseType=b.responseType,this._transport=b.transport||a._transport,this._noContentResponse=b.noContentResponse};h(l,i.EventEmitter),l.prototype.request=function(a,b){var c=this,d=this._conn,e=d._logger,f=this.getRefreshDelegate(),g=d.instanceUrl,h=k.defer(),i=function(b){return b?void h.reject(b):(g!==d.instanceUrl&&(a.url=a.url.replace(g,d.instanceUrl)),void c.request(a).then(function(a){h.resolve(a)},function(a){h.reject(a)}))};if(f&&f._refreshing)return f.once("resume",i),h.promise.thenCall(b);c.beforeSend(a),c.emit("request",a),e.debug("<request> method="+a.method+", url="+a.url);var j=Date.now();return this._transport.httpRequest(a).then(function(b){var d=Date.now();if(e.debug("elappsed time : "+(d-j)+"msec"),e.debug("<response> status="+b.statusCode+", url="+a.url),c.emit("response",b),c.isSessionExpired(b)&&f)return f.refresh(j,i),h.promise;if(c.isErrorResponse(b)){var g=c.getError(b);throw g}return c.getResponseBody(b)},function(a){var b=Date.now();throw e.debug("elappsed time : "+(b-j)+"msec"),e.error(a),a}).thenCall(b)},l.prototype.getRefreshDelegate=function(){return this._conn._refreshDelegate},l.prototype.beforeSend=function(a){if(a.headers=a.headers||{},this._conn.accessToken&&(a.headers.Authorization="Bearer "+this._conn.accessToken),this._conn.callOptions){var b=[];for(var c in this._conn.callOptions)b.push(c+"="+this._conn.callOptions[c]);a.headers["Sforce-Call-Options"]=b.join(", ")}},l.prototype.getResponseContentType=function(a){return this._responseType||a.headers&&a.headers["content-type"]},l.prototype.parseResponseBody=function(a){var b=this.getResponseContentType(a),c=/^(text|application)\/xml(;|$)/.test(b)?e:/^application\/json(;|$)/.test(b)?d:/^text\/csv(;|$)/.test(b)?f:g;try{return c(a.body)}catch(h){return a.body}},l.prototype.getResponseBody=function(a){if(204===a.statusCode)return this._noContentResponse;var b,c=this.parseResponseBody(a);if(this.hasErrorInResponseBody(c))throw b=this.getError(a,c);if(300===a.statusCode)throw b=new Error("Multiple records found"),b.name="MULTIPLE_CHOICES",b.content=c,b;return c},l.prototype.isSessionExpired=function(a){return 401===a.statusCode},l.prototype.isErrorResponse=function(a){return a.statusCode>=400},l.prototype.hasErrorInResponseBody=function(a){return!1},l.prototype.parseError=function(a){var b=a;return j.isArray(b)?b[0]:b},l.prototype.getError=function(a,b){var c;try{c=this.parseError(b||this.parseResponseBody(a))}catch(d){}c=j.isObject(c)&&j.isString(c.message)?c:{errorCode:"ERROR_HTTP_"+a.statusCode,message:a.body};var e=new Error(c.message);e.name=c.errorCode;for(var f in c)e[f]=c[f];return e};var m=function(a,b){this._conn=a,this._refreshFn=b,this._refreshing=!1};h(m,i.EventEmitter),m.prototype.refresh=function(a,b){if(this._lastRefreshedAt>a)return b();var c=this,d=this._conn,e=d._logger;return c.once("resume",b),c._refreshing?void 0:(e.debug("<refresh token>"),c._refreshing=!0,c._refreshFn(d,function(a,b,f){a||(e.debug("Connection refresh completed. Refreshed access token = "+b),d.accessToken=b,d.emit("refresh",b,f)),c._lastRefreshedAt=Date.now(),c._refreshing=!1,c.emit("resume",a)}))},l.SessionRefreshDelegate=m,b.exports=l},{"./csv":17,"./promise":24,events:42,inherits:53,underscore:82,xml2js:85}],20:[function(a,b,c){"use strict";var d=a("../package.json");c.VERSION=d.version,c.Connection=a("./connection"),c.OAuth2=a("./oauth2"),c.Date=c.SfDate=a("./date"),c.RecordStream=a("./record-stream"),c.Promise=a("./promise");var e=a("./registry/file-registry");c.registry=new e},{"../package.json":35,"./connection":15,"./date":18,"./oauth2":22,"./promise":24,"./record-stream":27,"./registry/file-registry":29}],21:[function(a,b,c){"use strict";function d(a){return function(b){this.log(a,b)}}var e=b.exports=function(a){"string"==typeof a&&(a=f[a]),a||(a=f.INFO),this._logLevel=a},f=e.LogLevels={DEBUG:1,INFO:2,WARN:3,ERROR:4,FATAL:5};e.prototype.log=function(a,b){this._logLevel<=a&&(a<f.ERROR?console.log(b):console.error(b))};for(var g in f)e.prototype[g.toLowerCase()]=d(f[g])},{}],22:[function(a,b,c){"use strict";var d=a("querystring"),e=a("underscore"),f=a("./transport"),g={loginUrl:"https://login.salesforce.com"},h=b.exports=function(a){a.authzServiceUrl&&a.tokenServiceUrl?(this.loginUrl=a.authzServiceUrl.split("/").slice(0,3).join("/"),this.authzServiceUrl=a.authzServiceUrl,this.tokenServiceUrl=a.tokenServiceUrl,this.revokeServiceUrl=a.revokeServiceUrl):(this.loginUrl=a.loginUrl||g.loginUrl,this.authzServiceUrl=this.loginUrl+"/services/oauth2/authorize",this.tokenServiceUrl=this.loginUrl+"/services/oauth2/token",this.revokeServiceUrl=this.loginUrl+"/services/oauth2/revoke"),this.clientId=a.clientId,this.clientSecret=a.clientSecret,this.redirectUri=a.redirectUri,this._transport=a.proxyUrl?new f.ProxyTransport(a.proxyUrl):new f};e.extend(h.prototype,{getAuthorizationUrl:function(a){return a=e.extend({
response_type:"code",client_id:this.clientId,redirect_uri:this.redirectUri},a||{}),this.authzServiceUrl+(this.authzServiceUrl.indexOf("?")>=0?"&":"?")+d.stringify(a)},refreshToken:function(a,b){return this._postParams({grant_type:"refresh_token",refresh_token:a,client_id:this.clientId,client_secret:this.clientSecret},b)},requestToken:function(a,b){return this._postParams({grant_type:"authorization_code",code:a,client_id:this.clientId,client_secret:this.clientSecret,redirect_uri:this.redirectUri},b)},authenticate:function(a,b,c){return this._postParams({grant_type:"password",username:a,password:b,client_id:this.clientId,client_secret:this.clientSecret,redirect_uri:this.redirectUri},c)},revokeToken:function(a,b){return this._transport.httpRequest({method:"POST",url:this.revokeServiceUrl,body:d.stringify({token:a}),headers:{"content-type":"application/x-www-form-urlencoded"}}).then(function(a){if(a.statusCode>=400){var b=d.parse(a.body);b&&b.error||(b={error:"ERROR_HTTP_"+a.statusCode,error_description:a.body});var c=new Error(b.error_description);throw c.name=b.error,c}}).thenCall(b)},_postParams:function(a,b){return this._transport.httpRequest({method:"POST",url:this.tokenServiceUrl,body:d.stringify(a),headers:{"content-type":"application/x-www-form-urlencoded"}}).then(function(a){var b;try{b=JSON.parse(a.body)}catch(c){}if(a.statusCode>=400){b=b||{error:"ERROR_HTTP_"+a.statusCode,error_description:a.body};var d=new Error(b.error_description);throw d.name=b.error,d}return b}).thenCall(b)}})},{"./transport":34,querystring:47,underscore:82}],23:[function(a,b,c){"use strict";var d=a("underscore"),e=(a("./promise"),a("./connection"),b.exports=function(a){this.rule=new e(a),this.approval=new f(a)},function(a){this._conn=a});e.prototype.list=function(a){return this._conn.request("/process/rules").then(function(a){return a.rules}).thenCall(a)},e.prototype.trigger=function(a,b){return a=d.isArray(a)?a:[a],this._conn.request({method:"POST",url:"/process/rules/",body:JSON.stringify({contextIds:a}),headers:{"content-type":"application/json"}}).thenCall(b)};var f=function(a){this._conn=a};f.prototype.list=function(a){return this._conn.request("/process/approvals").then(function(a){return a.approvals}).thenCall(a)},f.prototype.request=function(a,b){return a=a.map(function(a){return a._request?a._request:a}),this._conn.request({method:"POST",url:"/process/approvals",headers:{"content-type":"application/json"},body:JSON.stringify({requests:a})}).thenCall(b)},f.prototype._createRequest=function(a,b,c,e,f){"function"==typeof c&&(f=c,e=null,c=null),"function"==typeof e&&(f=e,e=null),e=e||{};var h={actionType:a,contextId:b,comments:c};return d.extend(h,e),new g(this,h).thenCall(f)},f.prototype.submit=function(a,b,c,d){return this._createRequest("Submit",a,b,c,d)},f.prototype.approve=function(a,b,c,d){return this._createRequest("Approve",a,b,c,d)},f.prototype.reject=function(a,b,c,d){return this._createRequest("Reject",a,b,c,d)};var g=function(a,b){this._process=a,this._request=b};g.prototype.then=function(a,b){this._promise||(this._promise=this._process.request([this]).then(function(a){return a[0]})),this._promise.then(a,b)},g.prototype.thenCall=function(a){return a?this.then(function(b){a(null,b)},function(b){a(b)}):this}},{"./connection":15,"./promise":24,underscore:82}],24:[function(a,b,c){(function(c){"use strict";var d=a("underscore"),e=a("promise/lib/es6-extensions");e.prototype.thenCall=function(a){return d.isFunction(a)&&this.then(function(b){c.nextTick(function(){a(null,b)})},function(b){c.nextTick(function(){a(b)})}),this},e.prototype.fail=e.prototype["catch"],e.defer=function(){return new f};var f=function(){var a=this;this.promise=new e(function(b,c){a.resolve=b,a.reject=c})};b.exports=e}).call(this,a("_process"))},{_process:44,"promise/lib/es6-extensions":55,underscore:82}],25:[function(a,b,c){(function(c){"use strict";var d=a("inherits"),e=(a("events"),a("readable-stream")),f=a("underscore"),g=a("./promise"),h=(a("./date"),a("./soql-builder")),i=a("./record-stream"),j=b.exports=function(a,b,c){j.super_.call(this,{objectMode:!0}),this._conn=a,b&&(f.isString(b)?this._soql=b:(this._config=b,this.select(b.fields),b.includes&&this.include(b.includes))),c&&c.indexOf("/")>=0&&(c=c.split("/").pop()),this._locator=c,this._executed=!1,this._finished=!1,this._chaining=!1,this._deferred=g.defer()};d(j,e.Readable),j.prototype.select=function(a){if(this._soql)throw Error("Cannot set select fields for the query which has already built SOQL.");if(a=a||"*",f.isString(a))a=a.split(/\s*,\s*/);else if(f.isObject(a)&&!f.isArray(a)){var b=[];for(var c in a)a[c]&&b.push(c);a=b}return this._config.fields=a,this},j.prototype.where=function(a){if(this._soql)throw Error("Cannot set where conditions for the query which has already built SOQL.");return this._config.conditions=a,this},j.prototype.limit=function(a){if(this._soql)throw Error("Cannot set limit for the query which has already built SOQL.");return this._config.limit=a,this},j.prototype.skip=j.prototype.offset=function(a){if(this._soql)throw Error("Cannot set skip/offset for the query which has already built SOQL.");return this._config.offset=a,this},j.prototype.sort=j.prototype.orderby=function(a,b){if(this._soql)throw Error("Cannot set sort for the query which has already built SOQL.");return f.isString(a)&&f.isString(b)&&(a=[[a,b]]),this._config.sort=a,this},j.prototype.include=function(a,b,c,d){if(this._soql)throw Error("Cannot include child relationship into the query which has already built SOQL.");{if(!f.isObject(a)){var e={table:a,conditions:b,fields:c,limit:d&&d.limit,offset:d&&(d.offset||d.skip)};this._config.includes=this._config.includes||[],this._config.includes.push(e);var g=new l(this._conn,this,e);return this._children=this._children||[],this._children.push(g),g}var h=a;for(var i in h){var j=h[i];this.include(i,j.conditions,j.fields,j)}}},j.prototype._maxFetch=1e4,j.prototype.maxFetch=function(a){return this._maxFetch=a,this},j.prototype._autoFetch=!1,j.prototype.autoFetch=function(a){return this._autoFetch=a,this},j.prototype._scanAll=!1,j.prototype.scanAll=function(a){return this._scanAll=a,this};var k=j.ResponseTargets={};["QueryResult","Records","SingleRecord","Count"].forEach(function(a){k[a]=a}),j.prototype._responseTarget=k.QueryResult,j.prototype.setResponseTarget=function(a){return a in k&&(this._responseTarget=a),this},j.prototype.run=j.prototype.exec=j.prototype.execute=function(a,b){var c=this,d=this._conn._logger,e=this._deferred;if(this._executed)return e.reject(new Error("re-executing already executed query")),this;if(this._finished)return e.reject(new Error("executing already closed query")),this;"function"==typeof a&&(b=a,a={}),a=a||{},a={responseTarget:a.responseTarget||c._responseTarget,autoFetch:a.autoFetch||c._autoFetch,maxFetch:a.maxFetch||c._maxFetch,scanAll:a.scanAll||c._scanAll};var g=function(a,c){if(f.isFunction(b))try{c=b(a,c),a=null}catch(d){a=d}a?e.reject(a):e.resolve(c)};return this.once("response",function(a){g(null,a)}),this.once("error",function(a){g(a)}),this.once("fetch",function(){if(a.responseTarget===k.Records&&(c._chaining||b)){d.debug("--- collecting all fetched records ---");var e=[],f=function(a){e.push(a)};c.on("record",f),c.once("end",function(){c.removeListener("record",f),c.emit("response",e,c)})}}),this._executed=!0,d.debug(">>> Query start >>>"),this._execute(a).then(function(){d.debug("*** Query finished ***")}).fail(function(a){d.debug("--- Query error ---"),c.emit("error",a)}),this},j.prototype._execute=function(a){var b=this,c=this._conn._logger,d=a.responseTarget,e=a.autoFetch,f=a.maxFetch,h=a.scanAll;return g.resolve(b._locator?b._conn._baseUrl()+"/query/"+b._locator:b.toSOQL().then(function(a){return b.totalFetched=0,c.debug("SOQL = "+a),b._conn._baseUrl()+"/"+(h?"queryAll":"query")+"?q="+encodeURIComponent(a)})).then(function(a){return b._conn.request(a)}).then(function(c){b.emit("fetch"),b.totalSize=c.totalSize;var g;switch(d){case k.SingleRecord:g=c.records&&c.records.length>0?c.records[0]:null;break;case k.Records:g=c.records;break;case k.Count:g=c.totalSize;break;default:g=c}d!==k.Records&&b.emit("response",g,b);for(var h=0,i=c.records.length;i>h;h++){if(b.totalFetched>=f){b._finished=!0;break}var j=c.records[h];b.push(j),b.emit("record",j,b.totalFetched++,b)}return c.nextRecordsUrl&&(b._locator=c.nextRecordsUrl.split("/").pop()),b._finished=b._finished||c.done||!e,b._finished?b.push(null):b._execute(a),g})},j.prototype._read=function(a){this._finished||this._executed||this.execute({autoFetch:!0})},j.prototype.on=function(a,b){if("record"===a){var c=this;this.on("readable",function(){for(;null!==c.read(););})}return j.super_.prototype.on.call(this,a,b)},j.prototype.addListener=j.prototype.on,j.prototype._expandFields=function(){function a(a){var c=d._parent._config.table;return e.debug('finding table for relation "'+a+'" in "'+c+'"...'),b(c).then(function(b){var c=a.toUpperCase(),d=f.find(b.childRelationships,function(a){return(a.relationshipName||"").toUpperCase()===c});return d?d.childSObject:g.reject(new Error("No child relationship found: "+a))})}function b(a){e.debug("describe cache: "+a);var b=g.defer();return h.describe$(a,function(a,c){e.debug("... done."),a?b.reject(a):b.resolve(c)}),b.promise}function c(a,d){e.debug('expanding field "'+d+'" in "'+a+'"...');var h=d.split(".");return"*"===h[h.length-1]?b(a).then(function(b){if(e.debug("table "+a+"has been described"),h.length>1){var d=h.shift(),g=f.find(b.fields,function(a){return a.relationshipName&&a.relationshipName.toUpperCase()===d.toUpperCase()});if(g){var i=1===g.referenceTo.length?g.referenceTo[0]:"Name";return c(i,h.join(".")).then(function(a){return f.map(a,function(a){return d+"."+a})})}return[]}return f.map(b.fields,function(a){return a.name})}):g.resolve([d])}if(this._soql)return g.reject(new Error("Cannot expand fields for the query which has already built SOQL."));var d=this,e=d._conn._logger,h=this._conn,i=this._config.table,j=this._config.fields||[];return e.debug("_expandFields: table = "+i+", fields = "+j.join(", ")),g.all([g.resolve(d._parent?a(i):i).then(function(a){return g.all(f.map(j,function(b){return c(a,b)})).then(function(a){d._config.fields=f.flatten(a)})}),g.all(f.map(d._children||[],function(a){return a._expandFields()}))])},j.prototype.explain=function(a){var b=this,c=this._conn._logger;return b.toSOQL().then(function(a){c.debug("SOQL = "+a);var d="/query/?explain="+encodeURIComponent(a);return b._conn.request(d)}).thenCall(a)},j.prototype.toSOQL=function(a){var b=this;return g.resolve(b._soql||b._expandFields().then(function(){return h.createSOQL(b._config)})).thenCall(a)},j.prototype.stream=i.Serializable.prototype.stream,j.prototype.map=i.prototype.map,j.prototype.filter=i.prototype.map,j.prototype["delete"]=j.prototype.del=j.prototype.destroy=function(a,b){if("function"==typeof a&&(b=a,a=null),a=a||this._config&&this._config.table,!a)throw new Error("SOQL based query needs SObject type information to bulk delete.");var c=this._conn.sobject(a).deleteBulk(),d=g.defer(),e=function(a){"ClientInputError"===a.name?d.resolve([]):d.reject(a)};return this.on("error",e).pipe(c).on("response",function(a){d.resolve(a)}).on("error",e),d.promise.thenCall(b)},j.prototype.update=function(a,b,c){if("function"==typeof b&&(c=b,b=null),b=b||this._config&&this._config.table,!b)throw new Error("SOQL based query needs SObject type information to bulk update.");var d=f.isFunction(a)?i.map(a):i.recordMapStream(a),e=this._conn.sobject(b).updateBulk(),h=g.defer(),j=function(a){"ClientInputError"===a.name?h.resolve([]):h.reject(a)};return this.on("error",j).pipe(d).on("error",j).pipe(e).on("response",function(a){h.resolve(a)}).on("error",j),h.promise.thenCall(c)},j.prototype.then=function(a,b){return this._chaining=!0,this._finished||this._executed||this.execute(),this._deferred.promise.then.apply(this._deferred.promise,arguments)},j.prototype.thenCall=function(a){return f.isFunction(a)&&this.then(function(b){c.nextTick(function(){a(null,b)})},function(b){c.nextTick(function(){a(b)})}),this};var l=function(a,b,c){l.super_.call(this,a,c),this._parent=b};d(l,j),l.prototype.include=function(){throw new Error("Not allowed to include another subquery in subquery.")},l.prototype.end=function(){return this._parent},l.prototype.run=l.prototype.exec=l.prototype.execute=function(){return this._parent.execute.apply(this._parent,arguments)}}).call(this,a("_process"))},{"./date":18,"./promise":24,"./record-stream":27,"./soql-builder":33,_process:44,events:42,inherits:53,"readable-stream":69,underscore:82}],26:[function(a,b,c){"use strict";var d=b.exports=function(a,b){this._conn=a,this._path=b};d.prototype.describe=function(a){var b=this._path+"/describe";return this._conn.request(b).thenCall(a)},d.prototype.defaultValues=function(a,b){"function"==typeof a&&(b=a,a=null);var c=this._path+"/defaultValues";return a&&(c+="/"+a),this._conn.request(c).thenCall(b)},d.prototype.execute=function(a,b,c){var d={contextId:a,record:b};return this._conn.requestPost(this._path,d).thenCall(c)}},{}],27:[function(a,b,c){"use strict";var d=(a("events"),a("readable-stream")),e=(d.Duplex,d.Transform),f=d.PassThrough,g=a("through2"),h=a("inherits"),i=a("underscore"),j=a("./csv"),k=b.exports=function(){k.super_.call(this,{objectMode:!0})};h(k,e),k.prototype._transform=function(a,b,c){this.emit("record",a),this.push(a),c()},k.prototype.map=function(a){return this.pipe(k.map(a))},k.prototype.filter=function(a){return this.pipe(k.filter(a))};var l=k.Serializable=function(){l.super_.call(this),this._dataStream=null};h(l,k),l.prototype.stream=function(a,b){a=a||"csv";var c=o[a];if(!c)throw new Error("Converting ["+a+"] data stream is not supported.");return this._dataStream||(this._dataStream=new f,this.pipe(c.serialize(b)).pipe(this._dataStream)),this._dataStream};var m=k.Parsable=function(){m.super_.call(this),this._dataStream=null};h(m,k),m.prototype.stream=function(a,b){a=a||"csv";var c=o[a];if(!c)throw new Error("Converting ["+a+"] data stream is not supported.");return this._dataStream||(this._dataStream=new f,this._parserStream=c.parse(b),this._parserStream.pipe(this).pipe(new f({objectMode:!0}))),this._dataStream},m.prototype.on=function(a,b){return("readable"===a||"record"===a)&&this._dataStream.pipe(this._parserStream),m.super_.prototype.on.call(this,a,b)},m.prototype.addListener=m.prototype.on,k.map=function(a){var b=new k.Serializable;return b._transform=function(b,c,d){var e=a(b)||b;this.push(e),d()},b},k.recordMapStream=function(a,b){function c(a,b){if(i.isString(a)){var c=/^\$\{(\w+)\}$/.exec(a);return c?b[c[1]]:a.replace(/\$\{(\w+)\}/g,function(a,c){var d=b[c];return i.isNull(d)||i.isUndefined(d)?"":String(d)})}return a}return k.map(function(d){var e={Id:d.Id};for(var f in a)e[f]=b?a[f]:c(a[f],d);return e})},k.filter=function(a){var b=new k.Serializable;return b._transform=function(b,c,d){a(b)&&this.push(b),d()},b};var n={serialize:function(a){a=a||{};var b=!1,c=a.headers;return g({writableObjectMode:!0},function(d,e,f){b||(c||(c=j.extractHeaders([d])),this.push(j.arrayToCSV(c)+"\n","utf8"),b=!0),this.push(j.recordToCSV(d,c,{nullValue:a.nullValue})+"\n","utf8"),f()})},parse:function(){var a=[];return g({readableObjectMode:!0},function(b,c,d){a.push(b),d()},function(b){var c=a.map(function(a){return a.toString("utf8")}).join(""),d=j.parseCSV(c),e=this;d.forEach(function(a){e.push(a)}),this.push(null),b()})}},o=k.DataStreamConverters={csv:n}},{"./csv":17,events:42,inherits:53,"readable-stream":69,through2:81,underscore:82}],28:[function(a,b,c){"use strict";var d=a("underscore")._,e=b.exports=function(a,b,c){this._conn=a,this.type=b,this.id=c};e.prototype.retrieve=function(a,b){return"function"==typeof a&&(b=a,a={}),this._conn.retrieve(this.type,this.id,a,b)},e.prototype.update=function(a,b,c){return"function"==typeof b&&(c=b,b={}),a=d.clone(a),a.Id=this.id,this._conn.update(this.type,a,b,c)},e.prototype["delete"]=e.prototype.del=e.prototype.destroy=function(a,b){return"function"==typeof a&&(b=a,a={}),this._conn.destroy(this.type,this.id,a,b)},e.prototype.blob=function(a){var b=[this._conn._baseUrl(),"sobjects",this.type,this.id,a].join("/");return this._conn.request(b).stream()}},{underscore:82}],29:[function(a,b,c){(function(c){var d=a("inherits"),e=a("fs"),f=a("path"),g=a("./registry"),h=function(a){h.super_.call(this),this._configFilePath=a||this._getDefaultConfigFilePath();try{var b=e.readFileSync(this._configFilePath,"utf-8");this._registryConfig=JSON.parse(b)}catch(c){}};d(h,g),h.prototype._getDefaultConfigFilePath=function(){var a=c.env["win32"===c.platform?"USERPROFILE":"HOME"],b=a+"/.jsforce";return b+"/config.json"},h.prototype._saveConfig=function(){var a=JSON.stringify(this._registryConfig,null,4);try{e.writeFileSync(this._configFilePath,a),e.chmodSync(this._configFilePath,"600")}catch(b){var c=f.dirname(this._configFilePath);e.mkdirSync(c),e.chmodSync(c,"700"),e.writeFileSync(this._configFilePath,a),e.chmodSync(this._configFilePath,"600")}},b.exports=h}).call(this,a("_process"))},{"./registry":30,_process:44,fs:36,inherits:53,path:43}],30:[function(a,b,c){"use strict";var d=a("underscore"),e=a("../connection"),f=function(a){this._registryConfig={}};f.prototype._saveConfig=function(){throw new Error("_saveConfig must be implemented in subclass")},f.prototype._getClients=function(){return this._registryConfig.clients||(this._registryConfig.clients={})},f.prototype._getConnections=function(){return this._registryConfig.connections||(this._registryConfig.connections={})},f.prototype.getConnectionNames=function(){return Object.keys(this._getConnections())},f.prototype.getConnection=function(a){return new e(this.getConnectionConfig(a))},f.prototype.getConnectionConfig=function(a){a||(a=this._registryConfig["default"]);var b=this._getConnections(),c=b[a];return c&&(c=d.clone(c),c.client&&(c.oauth2=d.clone(this.getClient(c.client))),delete c.client),c},f.prototype.saveConnectionConfig=function(a,b){var c=this._getConnections();if(b=d.clone(b),b.oauth2){var e=this._findClientName(b.oauth2);e&&(b.client=e),delete b.oauth2}c[a]=b,this._saveConfig()},f.prototype._findClientName=function(a){var b=this._getClients();for(var c in b){var d=b[c];if(d.clientId===a.clientId&&(d.loginUrl||"https://login.salesforce.com")===a.loginUrl)return c}return null},f.prototype.setDefaultConnection=function(a){this._registryConfig["default"]=a,this._saveConfig()},f.prototype.removeConnectionConfig=function(a){var b=this._getConnections();delete b[a],this._saveConfig()},f.prototype.getClient=function(a){var b=this._getClients()[a];return b&&d.clone(b)},f.prototype.getClientNames=function(){return Object.keys(this._getClients())},f.prototype.registerClient=function(a,b){var c=this._getClients();c[a]=b,this._saveConfig()},b.exports=f},{"../connection":15,underscore:82}],31:[function(a,b,c){"use strict";function d(a,b){if(h.isArray(a))return a.map(function(a){return d(a,b&&b[0])});if(h.isObject(a)){if(a.$&&"true"===a.$["xsi:nil"])return null;if(h.isArray(b))return[d(a,b[0])];var c={};for(var e in a)c[e]=d(a[e],b&&b[e]);return c}if(h.isArray(b))return[d(a,b[0])];if(h.isObject(b))return{};switch(b){case"string":return String(a);case"number":return Number(a);case"boolean":return"true"===a;default:return a}}function e(a,b){var c=b.shift();if(c){for(var d in a)if(c.test(d))return e(a[d],b);return null}return a}function f(a,b){if(h.isObject(a)&&(b=a,a=null),h.isArray(b))return h.map(b,function(b){return f(a,b)}).join("");var c=[],d=[];if(h.isObject(b)){for(var e in b){var g=b[e];"@"===e[0]?(e=e.substring(1),c.push(e+'="'+g+'"')):d.push(f(e,g))}b=d.join("")}else b=String(b).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;");var i=a?"<"+a+(c.length>0?" "+c.join(" "):"")+">":"",j=a?"</"+a+">":"";return i+b+j}var g=a("inherits"),h=a("underscore"),i=(a("xml2js"),a("./http-api")),j=b.exports=function(a,b){j.super_.apply(this,arguments),this._endpointUrl=b.endpointUrl,this._xmlns=b.xmlns||"urn:partner.soap.sforce.com"};g(j,i),j.prototype.invoke=function(a,b,c,e){"function"==typeof c&&(e=c,c=null);var f={};return f[a]=b,this.request({method:"POST",url:this._endpointUrl,headers:{"Content-Type":"text/xml",SOAPAction:'""'},message:f}).then(function(a){return c?d(a,c):a}).thenCall(e)},j.prototype.beforeSend=function(a){a.body=this._createEnvelope(a.message)},j.prototype.isSessionExpired=function(a){return 500===a.statusCode&&/<faultcode>[a-zA-Z]+:INVALID_SESSION_ID<\/faultcode>/.test(a.body)},j.prototype.parseError=function(a){var b=e(a,[/:Envelope$/,/:Body$/,/:Fault$/]);return{errorCode:b.faultcode,message:b.faultstring}},j.prototype.getResponseBody=function(a){var b=j.super_.prototype.getResponseBody.call(this,a);return e(b,[/:Envelope$/,/:Body$/,/.+/])},j.prototype._createEnvelope=function(a){var b={},c=this._conn;return c.accessToken&&(b.SessionHeader={sessionId:this._conn.accessToken}),c.callOptions&&(b.CallOptions=c.callOptions),['<?xml version="1.0" encoding="UTF-8"?>','<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"',' xmlns:xsd="http://www.w3.org/2001/XMLSchema"',' xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">','<soapenv:Header xmlns="'+this._xmlns+'">',f(b),"</soapenv:Header>",'<soapenv:Body xmlns="'+this._xmlns+'">',f(a),"</soapenv:Body>","</soapenv:Envelope>"].join("")}},{"./http-api":19,inherits:53,underscore:82,xml2js:85}],32:[function(a,b,c){"use strict";var d=a("underscore"),e=a("./record"),f=a("./query"),g=(a("./cache"),a("./quick-action")),h=b.exports=function(a,b){this._conn=a,this.type=b;var c={key:"describe."+this.type};this.describe$=a.cache.makeCacheable(this.describe,this,c),this.describe=a.cache.makeResponseCacheable(this.describe,this,c),c={key:"layouts."+this.type},this.layouts$=a.cache.makeCacheable(this.layouts,this,c),this.layouts=a.cache.makeResponseCacheable(this.layouts,this,c),c={key:"compactLayouts."+this.type},this.compactLayouts$=a.cache.makeCacheable(this.compactLayouts,this,c),this.compactLayouts=a.cache.makeResponseCacheable(this.compactLayouts,this,c),c={key:"approvalLayouts."+this.type},this.approvalLayouts$=a.cache.makeCacheable(this.approvalLayouts,this,c),this.approvalLayouts=a.cache.makeResponseCacheable(this.approvalLayouts,this,c)};h.prototype.insert=h.prototype.create=function(a,b,c){return"function"==typeof b&&(c=b,b={}),this._conn.create(this.type,a,b,c)},h.prototype.retrieve=function(a,b,c){return"function"==typeof b&&(c=b,b={}),this._conn.retrieve(this.type,a,b,c)},h.prototype.update=function(a,b,c){return"function"==typeof b&&(c=b,b={}),this._conn.update(this.type,a,b,c)},h.prototype.upsert=function(a,b,c,d){return"function"==typeof c&&(d=c,c={}),this._conn.upsert(this.type,a,b,c,d)},h.prototype["delete"]=h.prototype.del=h.prototype.destroy=function(a,b,c){return"function"==typeof b&&(c=b,b={}),this._conn.destroy(this.type,a,b,c)},h.prototype.describe=function(a){return this._conn.describe(this.type,a)},h.prototype.record=function(a){return new e(this._conn,this.type,a)},h.prototype.find=function(a,b,c,d){"function"==typeof a?(d=a,a={},b=null,c=null):"function"==typeof b?(d=b,b=null,c=null):"function"==typeof c&&(d=c,c=null),c=c||{};var e={fields:b,includes:c.includes,table:this.type,conditions:a,limit:c.limit,offset:c.offset||c.skip},g=new f(this._conn,e);return g.setResponseTarget(f.ResponseTargets.Records),d&&g.run(d),g},h.prototype.findOne=function(a,b,c,e){"function"==typeof a?(e=a,a={},b=null,c=null):"function"==typeof b?(e=b,b=null,c=null):"function"==typeof c&&(e=c,c=null),c=d.extend(c||{},{limit:1});var g=this.find(a,b,c);return g.setResponseTarget(f.ResponseTargets.SingleRecord),e&&g.run(e),g},h.prototype.select=function(a,b){return this.find(null,a,null,b)},h.prototype.count=function(a,b){"function"==typeof a&&(b=a,a={});var c=this.find(a,{"count()":!0});return c.setResponseTarget("Count"),b&&c.run(b),c},h.prototype.bulkload=function(a,b,c,d){return this._conn.bulk.load(this.type,a,b,c,d)},h.prototype.insertBulk=h.prototype.createBulk=function(a,b){return this.bulkload("insert",a,b)},h.prototype.updateBulk=function(a,b){return this.bulkload("update",a,b)},h.prototype.upsertBulk=function(a,b,c){return this.bulkload("upsert",{extIdField:b},a,c)},h.prototype.deleteBulk=h.prototype.destroyBulk=function(a,b){return this.bulkload("delete",a,b)},h.prototype.deleteHardBulk=h.prototype.destroyHardBulk=function(a,b){return this.bulkload("hardDelete",a,b)},h.prototype.recent=function(a){return this._conn.recent(this.type,a)},h.prototype.updated=function(a,b,c){return this._conn.updated(this.type,a,b,c)},h.prototype.deleted=function(a,b,c){return this._conn.deleted(this.type,a,b,c)},h.prototype.layouts=function(a,b){"function"==typeof a&&(b=a,a=null);var c="/sobjects/"+this.type+"/describe/"+(a?"namedLayouts/"+a:"layouts");return this._conn.request(c,b)},h.prototype.compactLayouts=function(a){var b="/sobjects/"+this.type+"/describe/compactLayouts";return this._conn.request(b,a)},h.prototype.approvalLayouts=function(a){var b="/sobjects/"+this.type+"/describe/approvalLayouts";return this._conn.request(b,a)},h.prototype.listviews=function(a){var b=this._conn._baseUrl()+"/sobjects/"+this.type+"/listviews";return this._conn.request(b,a)},h.prototype.listview=function(a){return new i(this._conn,this.type,a)},h.prototype.quickActions=function(a){return this._conn.request("/sobjects/"+this.type+"/quickActions").thenCall(a)},h.prototype.quickAction=function(a){return new g(this._conn,"/sobjects/"+this.type+"/quickActions/"+a)};var i=function(a,b,c){this._conn=a,this.type=b,this.id=c};i.prototype.results=function(a){var b=this._conn._baseUrl()+"/sobjects/"+this.type+"/listviews/"+this.id+"/results";return this._conn.request(b,a)},i.prototype.describe=function(a){var b=this._conn._baseUrl()+"/sobjects/"+this.type+"/listviews/"+this.id+"/describe";return this._conn.request(b,a)},i.prototype.explain=function(a){var b="/query/?explain="+this.id;return this._conn.request(b,a)}},{"./cache":14,"./query":25,"./quick-action":26,"./record":28,underscore:82}],33:[function(a,b,c){"use strict";function d(a){var b=["SELECT ",e(a.fields,a.includes)," FROM ",a.table].join(""),c=f(a.conditions);c&&(b+=" WHERE "+c);var d=k(a.sort);return d&&(b+=" ORDER BY "+d),a.limit&&(b+=" LIMIT "+a.limit),a.offset&&(b+=" OFFSET "+a.offset),b}function e(a,b){return b=l.map(l.values(b||{}),function(a){return"("+d(a)+")"}),(a||["Id"]).concat(b).join(", ")}function f(a,b,c){if(l.isString(a))return a;a=a||[],b=b||"AND",c=c||0,a=j(a)?a.map(function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b.length>1?b:b[0]}):l.keys(a).map(function(b){return{key:b,value:a[b]}}),a=a.map(function(d){var e,h=c+1;switch(d.key){case"$or":case"$and":case"$not":return"NOT"!==b&&1===a.length&&(h=c),e="$or"===d.key?"OR":"$and"===d.key?"AND":"NOT",f(d.value,e,h);default:return g(d.key,d.value)}}).filter(function(a){return a});var d;return"NOT"===b?(d=c>0,(d?"(":"")+"NOT "+a[0]+(d?")":"")):(d=c>0&&a.length>1,(d?"(":"")+a.join(" "+b+" ")+(d?")":""))}function g(a,b){var c="$eq";if(l.isArray(b))c="$in";else if(l.isObject(b)){for(var d in b)if("$"===d[0]){c=d,b=b[d];break}}var e=n[c];if(!e||l.isUndefined(b))return null;var f=h(b);if(l.isUndefined(f))return null;switch(e){case"NOT LIKE":return"("+["NOT",a,"LIKE",f].join(" ")+")";case"EXISTS":return[a,b?"!=":"=","null"].join(" ");default:return[a,e,f].join(" ")}}function h(a){return j(a)?a.length>0?"("+a.map(h).join(", ")+")":void 0:a instanceof m?a.toString():l.isString(a)?"'"+i(a)+"'":l.isNumber(a)?a.toString():l.isNull(a)?"null":a}function i(a){return String(a||"").replace(/'/g,"\\'")}function j(a){return l.isObject(a)&&l.isFunction(a.pop)}function k(a){if(a=a||[],l.isString(a)){if(/,|\s+(asc|desc)\s*$/.test(a))return a;a=a.split(/\s+/).map(function(a){var b="ASC",c=a[0];return"-"===c?(b="DESC",a=a.substring(1)):"+"===c&&(a=a.substring(1)),[a,b]})}else j(a)||(a=l.keys(a).map(function(b){var c=a[b];return[b,c]}));return a.map(function(a){var b=a[0],c=a[1];switch(String(c)){case"DESC":case"desc":case"descending":case"-":case"-1":c="DESC";break;default:c="ASC"}return b+" "+c}).join(", ")}var l=a("underscore"),m=a("./date"),n={"=":"=",$eq:"=","!=":"!=",$ne:"!=",">":">",$gt:">","<":"<",$lt:"<",">=":">=",$gte:">=","<=":"<=",$lte:"<=",$like:"LIKE",$nlike:"NOT LIKE",$in:"IN",$nin:"NOT IN",$exists:"EXISTS"};c.createSOQL=d},{"./date":18,underscore:82}],34:[function(a,b,c){(function(c){"use strict";function d(a,b){var c=a.then;return a.then=function(){b();var e=c.apply(a,arguments);return d(e,b)},a.stream=b,a}function e(a){var b=/(\w+)\.(visual\.force|salesforce)\.com$/.exec(a);return b&&(a=b[1]+".salesforce.com"),a}var f=a("inherits"),g=a("./promise"),h=a("request"),i=a("./browser/canvas"),j=a("./browser/jsonp");if(h.defaults){var k={followAllRedirects:!0};c.env.HTTP_PROXY&&(k.proxy=c.env.HTTP_PROXY),parseInt(c.env.HTTP_TIMEOUT)&&(k.timeout=parseInt(c.env.HTTP_TIMEOUT)),h=h.defaults(k)}var l;if("undefined"==typeof window)l=c.env.LOCATION_BASE_URL||"";else{var m=e(window.location.host);l=m?"https://"+m:""}var n=b.exports=function(){};n.prototype.httpRequest=function(a,b,c){var e,f=g.defer(),k=h;c&&c.jsonp&&j.supported?k=j.createRequest(c.jsonp):c&&c.signedRequest&&i.supported&&(k=i.createRequest(c.signedRequest));var l=function(){return e||(e=k(a,function(a,b){a?f.reject(a):f.resolve(b)})),e};return d(f.promise,l).thenCall(b)};var o=n.ProxyTransport=function(a){this._proxyUrl=a};f(o,n),o.prototype.httpRequest=function(a,b){var c=a.url;0===c.indexOf("/")&&(c=l+c);var d={method:a.method,url:this._proxyUrl+"?"+Date.now()+"."+(""+Math.random()).substring(2),headers:{"salesforceproxy-endpoint":c}};if((a.body||""===a.body)&&(d.body=a.body),a.headers)for(var e in a.headers)d.headers[e]=a.headers[e];return o.super_.prototype.httpRequest.call(this,d,b)}}).call(this,a("_process"))},{"./browser/canvas":9,"./browser/jsonp":12,"./promise":24,_process:44,inherits:53,request:13}],35:[function(a,b,c){b.exports={author:"Shinichi Tomita <shinichi.tomita@gmail.com>",name:"jsforce",description:"Salesforce API Library for JavaScript",keywords:["salesforce","salesforce.com","sfdc","force.com","database.com"],homepage:"http://github.com/jsforce/jsforce",version:"1.5.1",repository:{type:"git",url:"git://github.com/jsforce/jsforce.git"},license:"MIT",licenses:[{type:"MIT",url:"http://github.com/jsforce/jsforce/raw/master/LICENSE"}],main:"./lib/jsforce",scripts:{test:"./test/bin/run-test"},directories:{test:"test/"},files:["README.md","bower.json","Gruntfile.js","LICENSE","package.json","bin","build","lib","test"],engines:{node:">=0.10.0"},bin:{jsforce:"./bin/jsforce"},dependencies:{"co-prompt":"^1.0.0","coffee-script":"^1.8.0",commander:"^2.6.0",faye:"^1.1.0",inherits:"^2.0.1",open:"0.0.5",promise:"^6.1.0","readable-stream":"^2.0.2",request:"^2.51.0",through2:"^1.1.1",underscore:"^1.7.0",xml2js:"^0.4.4"},devDependencies:{archiver:"^0.14.4",async:"^0.9.0",browserify:"^11.0.1",dotenv:"^0.4.0",envfile:"^1.0.0",envify:"^3.4.0","espower-loader":"^0.7.1",espowerify:"^0.10.1",grunt:"^0.4.5","grunt-browserify":"^4.0.0","grunt-contrib-clean":"^0.6.0","grunt-contrib-copy":"^0.5.0","grunt-contrib-uglify":"^0.5.1","grunt-contrib-watch":"^0.6.1","grunt-extract-required":"0.0.6","grunt-jsdoc":"^0.5.6","grunt-string-replace":"^1.0.0","intelli-espower-loader":"^0.2.0",mocha:"^1.21.4","power-assert":"^0.7.2","require-swapper":"^0.1.5",webdriverio:"^2.4.3"},browser:{request:"./lib/browser/request.js"}}},{}],36:[function(a,b,c){},{}],37:[function(a,b,c){arguments[4][36][0].apply(c,arguments)},{dup:36}],38:[function(a,b,c){function d(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function e(a){return this instanceof e?(this.length=0,this.parent=void 0,"number"==typeof a?f(this,a):"string"==typeof a?g(this,a,arguments.length>1?arguments[1]:"utf8"):h(this,a)):arguments.length>1?new e(a,arguments[1]):new e(a)}function f(a,b){if(a=o(a,0>b?0:0|p(b)),!e.TYPED_ARRAY_SUPPORT)for(var c=0;b>c;c++)a[c]=0;
return a}function g(a,b,c){("string"!=typeof c||""===c)&&(c="utf8");var d=0|r(b,c);return a=o(a,d),a.write(b,c),a}function h(a,b){if(e.isBuffer(b))return i(a,b);if(X(b))return j(a,b);if(null==b)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(b.buffer instanceof ArrayBuffer)return k(a,b);if(b instanceof ArrayBuffer)return l(a,b)}return b.length?m(a,b):n(a,b)}function i(a,b){var c=0|p(b.length);return a=o(a,c),b.copy(a,0,0,c),a}function j(a,b){var c=0|p(b.length);a=o(a,c);for(var d=0;c>d;d+=1)a[d]=255&b[d];return a}function k(a,b){var c=0|p(b.length);a=o(a,c);for(var d=0;c>d;d+=1)a[d]=255&b[d];return a}function l(a,b){return e.TYPED_ARRAY_SUPPORT?(b.byteLength,a=e._augment(new Uint8Array(b))):a=k(a,new Uint8Array(b)),a}function m(a,b){var c=0|p(b.length);a=o(a,c);for(var d=0;c>d;d+=1)a[d]=255&b[d];return a}function n(a,b){var c,d=0;"Buffer"===b.type&&X(b.data)&&(c=b.data,d=0|p(c.length)),a=o(a,d);for(var e=0;d>e;e+=1)a[e]=255&c[e];return a}function o(a,b){e.TYPED_ARRAY_SUPPORT?a=e._augment(new Uint8Array(b)):(a.length=b,a._isBuffer=!0);var c=0!==b&&b<=e.poolSize>>>1;return c&&(a.parent=Y),a}function p(a){if(a>=d())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d().toString(16)+" bytes");return 0|a}function q(a,b){if(!(this instanceof q))return new q(a,b);var c=new e(a,b);return delete c.parent,c}function r(a,b){"string"!=typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case"ascii":case"binary":case"raw":case"raws":return c;case"utf8":case"utf-8":return P(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return S(a).length;default:if(d)return P(a).length;b=(""+b).toLowerCase(),d=!0}}function s(a,b,c){var d=!1;if(b=0|b,c=void 0===c||c===1/0?this.length:0|c,a||(a="utf8"),0>b&&(b=0),c>this.length&&(c=this.length),b>=c)return"";for(;;)switch(a){case"hex":return D(this,b,c);case"utf8":case"utf-8":return A(this,b,c);case"ascii":return B(this,b,c);case"binary":return C(this,b,c);case"base64":return z(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function t(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;if(f%2!==0)throw new Error("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;d>g;g++){var h=parseInt(b.substr(2*g,2),16);if(isNaN(h))throw new Error("Invalid hex string");a[c+g]=h}return g}function u(a,b,c,d){return T(P(b,a.length-c),a,c,d)}function v(a,b,c,d){return T(Q(b),a,c,d)}function w(a,b,c,d){return v(a,b,c,d)}function x(a,b,c,d){return T(S(b),a,c,d)}function y(a,b,c,d){return T(R(b,a.length-c),a,c,d)}function z(a,b,c){return 0===b&&c===a.length?V.fromByteArray(a):V.fromByteArray(a.slice(b,c))}function A(a,b,c){var d="",e="";c=Math.min(a.length,c);for(var f=b;c>f;f++)a[f]<=127?(d+=U(e)+String.fromCharCode(a[f]),e=""):e+="%"+a[f].toString(16);return d+U(e)}function B(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(127&a[e]);return d}function C(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(a[e]);return d}function D(a,b,c){var d=a.length;(!b||0>b)&&(b=0),(!c||0>c||c>d)&&(c=d);for(var e="",f=b;c>f;f++)e+=O(a[f]);return e}function E(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function F(a,b,c){if(a%1!==0||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function G(a,b,c,d,f,g){if(!e.isBuffer(a))throw new TypeError("buffer must be a Buffer instance");if(b>f||g>b)throw new RangeError("value is out of bounds");if(c+d>a.length)throw new RangeError("index out of range")}function H(a,b,c,d){0>b&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);f>e;e++)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function I(a,b,c,d){0>b&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);f>e;e++)a[c+e]=b>>>8*(d?e:3-e)&255}function J(a,b,c,d,e,f){if(b>e||f>b)throw new RangeError("value is out of bounds");if(c+d>a.length)throw new RangeError("index out of range");if(0>c)throw new RangeError("index out of range")}function K(a,b,c,d,e){return e||J(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),W.write(a,b,c,d,23,4),c+4}function L(a,b,c,d,e){return e||J(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),W.write(a,b,c,d,52,8),c+8}function M(a){if(a=N(a).replace($,""),a.length<2)return"";for(;a.length%4!==0;)a+="=";return a}function N(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function O(a){return 16>a?"0"+a.toString(16):a.toString(16)}function P(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;d>g;g++){if(c=a.charCodeAt(g),c>55295&&57344>c){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(56320>c){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=e-55296<<10|c-56320|65536,e=null}else e&&((b-=3)>-1&&f.push(239,191,189),e=null);if(128>c){if((b-=1)<0)break;f.push(c)}else if(2048>c){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(65536>c){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(2097152>c))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function Q(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function R(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);g++)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function S(a){return V.toByteArray(M(a))}function T(a,b,c,d){for(var e=0;d>e&&!(e+c>=b.length||e>=a.length);e++)b[e+c]=a[e];return e}function U(a){try{return decodeURIComponent(a)}catch(b){return String.fromCharCode(65533)}}var V=a("base64-js"),W=a("ieee754"),X=a("is-array");c.Buffer=e,c.SlowBuffer=q,c.INSPECT_MAX_BYTES=50,e.poolSize=8192;var Y={};e.TYPED_ARRAY_SUPPORT=function(){function a(){}try{var b=new Uint8Array(1);return b.foo=function(){return 42},b.constructor=a,42===b.foo()&&b.constructor===a&&"function"==typeof b.subarray&&0===b.subarray(1,1).byteLength}catch(c){return!1}}(),e.isBuffer=function(a){return!(null==a||!a._isBuffer)},e.compare=function(a,b){if(!e.isBuffer(a)||!e.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,f=0,g=Math.min(c,d);g>f&&a[f]===b[f];)++f;return f!==g&&(c=a[f],d=b[f]),d>c?-1:c>d?1:0},e.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(a,b){if(!X(a))throw new TypeError("list argument must be an Array of Buffers.");if(0===a.length)return new e(0);var c;if(void 0===b)for(b=0,c=0;c<a.length;c++)b+=a[c].length;var d=new e(b),f=0;for(c=0;c<a.length;c++){var g=a[c];g.copy(d,f),f+=g.length}return d},e.byteLength=r,e.prototype.length=void 0,e.prototype.parent=void 0,e.prototype.toString=function(){var a=0|this.length;return 0===a?"":0===arguments.length?A(this,0,a):s.apply(this,arguments)},e.prototype.equals=function(a){if(!e.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===e.compare(this,a)},e.prototype.inspect=function(){var a="",b=c.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... ")),"<Buffer "+a+">"},e.prototype.compare=function(a){if(!e.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?0:e.compare(this,a)},e.prototype.indexOf=function(a,b){function c(a,b,c){for(var d=-1,e=0;c+e<a.length;e++)if(a[c+e]===b[-1===d?0:e-d]){if(-1===d&&(d=e),e-d+1===b.length)return c+d}else d=-1;return-1}if(b>2147483647?b=2147483647:-2147483648>b&&(b=-2147483648),b>>=0,0===this.length)return-1;if(b>=this.length)return-1;if(0>b&&(b=Math.max(this.length+b,0)),"string"==typeof a)return 0===a.length?-1:String.prototype.indexOf.call(this,a,b);if(e.isBuffer(a))return c(this,a,b);if("number"==typeof a)return e.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,a,b):c(this,[a],b);throw new TypeError("val must be string, number or Buffer")},e.prototype.get=function(a){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(a)},e.prototype.set=function(a,b){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(a,b)},e.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b=0|b,isFinite(c)?(c=0|c,void 0===d&&(d="utf8")):(d=c,c=void 0);else{var e=d;d=b,b=0|c,c=e}var f=this.length-b;if((void 0===c||c>f)&&(c=f),a.length>0&&(0>c||0>b)||b>this.length)throw new RangeError("attempt to write outside buffer bounds");d||(d="utf8");for(var g=!1;;)switch(d){case"hex":return t(this,a,b,c);case"utf8":case"utf-8":return u(this,a,b,c);case"ascii":return v(this,a,b,c);case"binary":return w(this,a,b,c);case"base64":return x(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,a,b,c);default:if(g)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),g=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},e.prototype.slice=function(a,b){var c=this.length;a=~~a,b=void 0===b?c:~~b,0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c),0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c),a>b&&(b=a);var d;if(e.TYPED_ARRAY_SUPPORT)d=e._augment(this.subarray(a,b));else{var f=b-a;d=new e(f,void 0);for(var g=0;f>g;g++)d[g]=this[g+a]}return d.length&&(d.parent=this.parent||this),d},e.prototype.readUIntLE=function(a,b,c){a=0|a,b=0|b,c||F(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},e.prototype.readUIntBE=function(a,b,c){a=0|a,b=0|b,c||F(a,b,this.length);for(var d=this[a+--b],e=1;b>0&&(e*=256);)d+=this[a+--b]*e;return d},e.prototype.readUInt8=function(a,b){return b||F(a,1,this.length),this[a]},e.prototype.readUInt16LE=function(a,b){return b||F(a,2,this.length),this[a]|this[a+1]<<8},e.prototype.readUInt16BE=function(a,b){return b||F(a,2,this.length),this[a]<<8|this[a+1]},e.prototype.readUInt32LE=function(a,b){return b||F(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},e.prototype.readUInt32BE=function(a,b){return b||F(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},e.prototype.readIntLE=function(a,b,c){a=0|a,b=0|b,c||F(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},e.prototype.readIntBE=function(a,b,c){a=0|a,b=0|b,c||F(a,b,this.length);for(var d=b,e=1,f=this[a+--d];d>0&&(e*=256);)f+=this[a+--d]*e;return e*=128,f>=e&&(f-=Math.pow(2,8*b)),f},e.prototype.readInt8=function(a,b){return b||F(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},e.prototype.readInt16LE=function(a,b){b||F(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},e.prototype.readInt16BE=function(a,b){b||F(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},e.prototype.readInt32LE=function(a,b){return b||F(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},e.prototype.readInt32BE=function(a,b){return b||F(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},e.prototype.readFloatLE=function(a,b){return b||F(a,4,this.length),W.read(this,a,!0,23,4)},e.prototype.readFloatBE=function(a,b){return b||F(a,4,this.length),W.read(this,a,!1,23,4)},e.prototype.readDoubleLE=function(a,b){return b||F(a,8,this.length),W.read(this,a,!0,52,8)},e.prototype.readDoubleBE=function(a,b){return b||F(a,8,this.length),W.read(this,a,!1,52,8)},e.prototype.writeUIntLE=function(a,b,c,d){a=+a,b=0|b,c=0|c,d||G(this,a,b,c,Math.pow(2,8*c),0);var e=1,f=0;for(this[b]=255&a;++f<c&&(e*=256);)this[b+f]=a/e&255;return b+c},e.prototype.writeUIntBE=function(a,b,c,d){a=+a,b=0|b,c=0|c,d||G(this,a,b,c,Math.pow(2,8*c),0);var e=c-1,f=1;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=a/f&255;return b+c},e.prototype.writeUInt8=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,1,255,0),e.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),this[b]=a,b+1},e.prototype.writeUInt16LE=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[b]=a,this[b+1]=a>>>8):H(this,a,b,!0),b+2},e.prototype.writeUInt16BE=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a):H(this,a,b,!1),b+2},e.prototype.writeUInt32LE=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=a):I(this,a,b,!0),b+4},e.prototype.writeUInt32BE=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a):I(this,a,b,!1),b+4},e.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);G(this,a,b,c,e-1,-e)}var f=0,g=1,h=0>a?1:0;for(this[b]=255&a;++f<c&&(g*=256);)this[b+f]=(a/g>>0)-h&255;return b+c},e.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);G(this,a,b,c,e-1,-e)}var f=c-1,g=1,h=0>a?1:0;for(this[b+f]=255&a;--f>=0&&(g*=256);)this[b+f]=(a/g>>0)-h&255;return b+c},e.prototype.writeInt8=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,1,127,-128),e.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),0>a&&(a=255+a+1),this[b]=a,b+1},e.prototype.writeInt16LE=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[b]=a,this[b+1]=a>>>8):H(this,a,b,!0),b+2},e.prototype.writeInt16BE=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a):H(this,a,b,!1),b+2},e.prototype.writeInt32LE=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[b]=a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):I(this,a,b,!0),b+4},e.prototype.writeInt32BE=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,4,2147483647,-2147483648),0>a&&(a=4294967295+a+1),e.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a):I(this,a,b,!1),b+4},e.prototype.writeFloatLE=function(a,b,c){return K(this,a,b,!0,c)},e.prototype.writeFloatBE=function(a,b,c){return K(this,a,b,!1,c)},e.prototype.writeDoubleLE=function(a,b,c){return L(this,a,b,!0,c)},e.prototype.writeDoubleBE=function(a,b,c){return L(this,a,b,!1,c)},e.prototype.copy=function(a,b,c,d){if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&c>d&&(d=c),d===c)return 0;if(0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var f,g=d-c;if(this===a&&b>c&&d>b)for(f=g-1;f>=0;f--)a[f+b]=this[f+c];else if(1e3>g||!e.TYPED_ARRAY_SUPPORT)for(f=0;g>f;f++)a[f+b]=this[f+c];else a._set(this.subarray(c,c+g),b);return g},e.prototype.fill=function(a,b,c){if(a||(a=0),b||(b=0),c||(c=this.length),b>c)throw new RangeError("end < start");if(c!==b&&0!==this.length){if(0>b||b>=this.length)throw new RangeError("start out of bounds");if(0>c||c>this.length)throw new RangeError("end out of bounds");var d;if("number"==typeof a)for(d=b;c>d;d++)this[d]=a;else{var e=P(a.toString()),f=e.length;for(d=b;c>d;d++)this[d]=e[d%f]}return this}},e.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(e.TYPED_ARRAY_SUPPORT)return new e(this).buffer;for(var a=new Uint8Array(this.length),b=0,c=a.length;c>b;b+=1)a[b]=this[b];return a.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Z=e.prototype;e._augment=function(a){return a.constructor=e,a._isBuffer=!0,a._set=a.set,a.get=Z.get,a.set=Z.set,a.write=Z.write,a.toString=Z.toString,a.toLocaleString=Z.toString,a.toJSON=Z.toJSON,a.equals=Z.equals,a.compare=Z.compare,a.indexOf=Z.indexOf,a.copy=Z.copy,a.slice=Z.slice,a.readUIntLE=Z.readUIntLE,a.readUIntBE=Z.readUIntBE,a.readUInt8=Z.readUInt8,a.readUInt16LE=Z.readUInt16LE,a.readUInt16BE=Z.readUInt16BE,a.readUInt32LE=Z.readUInt32LE,a.readUInt32BE=Z.readUInt32BE,a.readIntLE=Z.readIntLE,a.readIntBE=Z.readIntBE,a.readInt8=Z.readInt8,a.readInt16LE=Z.readInt16LE,a.readInt16BE=Z.readInt16BE,a.readInt32LE=Z.readInt32LE,a.readInt32BE=Z.readInt32BE,a.readFloatLE=Z.readFloatLE,a.readFloatBE=Z.readFloatBE,a.readDoubleLE=Z.readDoubleLE,a.readDoubleBE=Z.readDoubleBE,a.writeUInt8=Z.writeUInt8,a.writeUIntLE=Z.writeUIntLE,a.writeUIntBE=Z.writeUIntBE,a.writeUInt16LE=Z.writeUInt16LE,a.writeUInt16BE=Z.writeUInt16BE,a.writeUInt32LE=Z.writeUInt32LE,a.writeUInt32BE=Z.writeUInt32BE,a.writeIntLE=Z.writeIntLE,a.writeIntBE=Z.writeIntBE,a.writeInt8=Z.writeInt8,a.writeInt16LE=Z.writeInt16LE,a.writeInt16BE=Z.writeInt16BE,a.writeInt32LE=Z.writeInt32LE,a.writeInt32BE=Z.writeInt32BE,a.writeFloatLE=Z.writeFloatLE,a.writeFloatBE=Z.writeFloatBE,a.writeDoubleLE=Z.writeDoubleLE,a.writeDoubleBE=Z.writeDoubleBE,a.fill=Z.fill,a.inspect=Z.inspect,a.toArrayBuffer=Z.toArrayBuffer,a};var $=/[^+\/0-9A-Za-z-_]/g},{"base64-js":39,ieee754:40,"is-array":41}],39:[function(a,b,c){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(a){"use strict";function b(a){var b=a.charCodeAt(0);return b===g||b===l?62:b===h||b===m?63:i>b?-1:i+10>b?b-i+26+26:k+26>b?b-k:j+26>b?b-j+26:void 0}function c(a){function c(a){j[l++]=a}var d,e,g,h,i,j;if(a.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=a.length;i="="===a.charAt(k-2)?2:"="===a.charAt(k-1)?1:0,j=new f(3*a.length/4-i),g=i>0?a.length-4:a.length;var l=0;for(d=0,e=0;g>d;d+=4,e+=3)h=b(a.charAt(d))<<18|b(a.charAt(d+1))<<12|b(a.charAt(d+2))<<6|b(a.charAt(d+3)),c((16711680&h)>>16),c((65280&h)>>8),c(255&h);return 2===i?(h=b(a.charAt(d))<<2|b(a.charAt(d+1))>>4,c(255&h)):1===i&&(h=b(a.charAt(d))<<10|b(a.charAt(d+1))<<4|b(a.charAt(d+2))>>2,c(h>>8&255),c(255&h)),j}function e(a){function b(a){return d.charAt(a)}function c(a){return b(a>>18&63)+b(a>>12&63)+b(a>>6&63)+b(63&a)}var e,f,g,h=a.length%3,i="";for(e=0,g=a.length-h;g>e;e+=3)f=(a[e]<<16)+(a[e+1]<<8)+a[e+2],i+=c(f);switch(h){case 1:f=a[a.length-1],i+=b(f>>2),i+=b(f<<4&63),i+="==";break;case 2:f=(a[a.length-2]<<8)+a[a.length-1],i+=b(f>>10),i+=b(f>>4&63),i+=b(f<<2&63),i+="="}return i}var f="undefined"!=typeof Uint8Array?Uint8Array:Array,g="+".charCodeAt(0),h="/".charCodeAt(0),i="0".charCodeAt(0),j="a".charCodeAt(0),k="A".charCodeAt(0),l="-".charCodeAt(0),m="_".charCodeAt(0);a.toByteArray=c,a.fromByteArray=e}("undefined"==typeof c?this.base64js={}:c)},{}],40:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],41:[function(a,b,c){var d=Array.isArray,e=Object.prototype.toString;b.exports=d||function(a){return!!a&&"[object Array]"==e.call(a)}},{}],42:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];c.apply(this,f)}else if(g(c)){for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];for(j=c.slice(),d=j.length,i=0;d>i;i++)j[i].apply(this,f)}return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned){var c;c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(0>d)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?e(a._events[b])?1:a._events[b].length:0}},{}],43:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;g>i;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return 0>b&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:44}],44:[function(a,b,c){function d(){k=!1,h.length?j=h.concat(j):l=-1,j.length&&e()}function e(){if(!k){var a=setTimeout(d);k=!0;for(var b=j.length;b;){for(h=j,j=[];++l<b;)h[l].run();l=-1,b=j.length}h=null,k=!1,clearTimeout(a)}}function f(a,b){this.fun=a,this.array=b}function g(){}var h,i=b.exports={},j=[],k=!1,l=-1;i.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];j.push(new f(a,b)),1!==j.length||k||setTimeout(e,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.binding=function(a){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],45:[function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;j>k;++k){var l,m,n,o,p=a[k].replace(h,"%20"),q=p.indexOf(c);q>=0?(l=p.substr(0,q),m=p.substr(q+1)):(l=p,m=""),n=decodeURIComponent(l),o=decodeURIComponent(m),d(g,n)?e(g[n])?g[n].push(o):g[n]=[g[n],o]:g[n]=o}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],46:[function(a,b,c){"use strict";function d(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var e=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?d(g(a),function(g){var h=encodeURIComponent(e(g))+c;return f(a[g])?d(a[g],function(a){return h+encodeURIComponent(e(a))}).join(b):h+encodeURIComponent(e(a[g]))}).join(b):h?encodeURIComponent(e(h))+c+encodeURIComponent(e(a)):""};var f=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],47:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":45,"./encode":46}],48:[function(a,b,c){function d(){e.call(this)}b.exports=d;var e=a("events").EventEmitter,f=a("inherits");f(d,e),d.Readable=a("readable-stream/readable.js"),d.Writable=a("readable-stream/writable.js"),d.Duplex=a("readable-stream/duplex.js"),d.Transform=a("readable-stream/transform.js"),d.PassThrough=a("readable-stream/passthrough.js"),d.Stream=d,d.prototype.pipe=function(a,b){function c(b){a.writable&&!1===a.write(b)&&j.pause&&j.pause()}function d(){j.readable&&j.resume&&j.resume()}function f(){k||(k=!0,a.end())}function g(){k||(k=!0,"function"==typeof a.destroy&&a.destroy())}function h(a){if(i(),0===e.listenerCount(this,"error"))throw a}function i(){j.removeListener("data",c),a.removeListener("drain",d),j.removeListener("end",f),j.removeListener("close",g),j.removeListener("error",h),a.removeListener("error",h),j.removeListener("end",i),j.removeListener("close",i),a.removeListener("close",i)}var j=this;j.on("data",c),a.on("drain",d),a._isStdio||b&&b.end===!1||(j.on("end",f),j.on("close",g));var k=!1;return j.on("error",h),a.on("error",h),j.on("end",i),j.on("close",i),a.on("close",i),a.emit("pipe",j),a}},{events:42,inherits:53,"readable-stream/duplex.js":57,"readable-stream/passthrough.js":68,"readable-stream/readable.js":69,"readable-stream/transform.js":70,"readable-stream/writable.js":71}],49:[function(a,b,c){function d(a){if(a&&!i(a))throw new Error("Unknown encoding: "+a)}function e(a){return a.toString(this.encoding)}function f(a){this.charReceived=a.length%2,this.charLength=this.charReceived?2:0}function g(a){this.charReceived=a.length%3,this.charLength=this.charReceived?3:0}var h=a("buffer").Buffer,i=h.isEncoding||function(a){switch(a&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},j=c.StringDecoder=function(a){switch(this.encoding=(a||"utf8").toLowerCase().replace(/[-_]/,""),d(a),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=f;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=g;break;default:return void(this.write=e)}this.charBuffer=new h(6),this.charReceived=0,this.charLength=0};j.prototype.write=function(a){for(var b="";this.charLength;){var c=a.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:a.length;if(a.copy(this.charBuffer,this.charReceived,0,c),this.charReceived+=c,this.charReceived<this.charLength)return"";a=a.slice(c,a.length),b=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var d=b.charCodeAt(b.length-1);if(!(d>=55296&&56319>=d)){if(this.charReceived=this.charLength=0,0===a.length)return b;break}this.charLength+=this.surrogateSize,b=""}this.detectIncompleteChar(a);var e=a.length;this.charLength&&(a.copy(this.charBuffer,0,a.length-this.charReceived,e),e-=this.charReceived),b+=a.toString(this.encoding,0,e);var e=b.length-1,d=b.charCodeAt(e);if(d>=55296&&56319>=d){var f=this.surrogateSize;return this.charLength+=f,this.charReceived+=f,this.charBuffer.copy(this.charBuffer,f,0,f),a.copy(this.charBuffer,0,0,f),b.substring(0,e)}return b},j.prototype.detectIncompleteChar=function(a){for(var b=a.length>=3?3:a.length;b>0;b--){var c=a[a.length-b];if(1==b&&c>>5==6){this.charLength=2;break}if(2>=b&&c>>4==14){this.charLength=3;break}if(3>=b&&c>>3==30){this.charLength=4;break}}this.charReceived=b},j.prototype.end=function(a){var b="";if(a&&a.length&&(b=this.write(a)),this.charReceived){var c=this.charReceived,d=this.charBuffer,e=this.encoding;b+=d.slice(0,c).toString(e)}return b}},{buffer:38}],50:[function(a,b,c){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],51:[function(a,b,c){(function(b,d){function e(a,b){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(b)?d.showHidden=b:b&&c._extend(d,b),v(d.showHidden)&&(d.showHidden=!1),
v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a,b){return a}function h(a){var b={};return a.forEach(function(a,c){b[a]=!0}),b}function i(a,b,d){if(a.customInspect&&b&&A(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,b);if(f)return f;var g=Object.keys(b),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),z(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(b);if(0===g.length){if(A(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(w(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(y(b))return a.stylize(Date.prototype.toString.call(b),"date");if(z(b))return k(b)}var r="",s=!1,u=["{","}"];if(o(b)&&(s=!0,u=["[","]"]),A(b)){var v=b.name?": "+b.name:"";r=" [Function"+v+"]"}if(w(b)&&(r=" "+RegExp.prototype.toString.call(b)),y(b)&&(r=" "+Date.prototype.toUTCString.call(b)),z(b)&&(r=" "+k(b)),0===g.length&&(!s||0==b.length))return u[0]+r+u[1];if(0>d)return w(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var x;return x=s?l(a,b,d,p,g):g.map(function(c){return m(a,b,d,p,c,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)F(b,String(g))?f.push(m(a,b,c,d,String(g),!0)):f.push("");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a){return 10>a?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;c.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(b){return"[Circular]"}default:return a}}),h=d[c];f>c;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},c.deprecate=function(a,e){function f(){if(!g){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),g=!0}return a.apply(this,arguments)}if(v(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(b.noDeprecation===!0)return a;var g=!1;return f};var H,I={};c.debuglog=function(a){if(v(H)&&(H=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){var d=b.pid;I[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else I[a]=function(){};return I[a]},c.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=o,c.isBoolean=p,c.isNull=q,c.isNullOrUndefined=r,c.isNumber=s,c.isString=t,c.isSymbol=u,c.isUndefined=v,c.isRegExp=w,c.isObject=x,c.isDate=y,c.isError=z,c.isFunction=A,c.isPrimitive=B,c.isBuffer=a("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":50,_process:44,inherits:53}],52:[function(require,module,exports){(function(process,global){!function(){"use strict";var Faye={VERSION:"1.1.2",BAYEUX_VERSION:"1.0",ID_LENGTH:160,JSONP_CALLBACK:"jsonpcallback",CONNECTION_TYPES:["long-polling","cross-origin-long-polling","callback-polling","websocket","eventsource","in-process"],MANDATORY_CONNECTION_TYPES:["long-polling","callback-polling","in-process"],ENV:"undefined"!=typeof window?window:global,extend:function(a,b,c){if(!b)return a;for(var d in b)b.hasOwnProperty(d)&&(a.hasOwnProperty(d)&&c===!1||a[d]!==b[d]&&(a[d]=b[d]));return a},random:function(a){a=a||this.ID_LENGTH;for(var b=Math.ceil(a*Math.log(2)/Math.log(36)),c=csprng(a,36);c.length<b;)c="0"+c;return c},validateOptions:function(a,b){for(var c in a)if(this.indexOf(b,c)<0)throw new Error("Unrecognized option: "+c)},clientIdFromMessages:function(a){var b=this.filter([].concat(a),function(a){return"/meta/connect"===a.channel});return b[0]&&b[0].clientId},copyObject:function(a){var b,c,d;if(a instanceof Array){for(b=[],c=a.length;c--;)b[c]=Faye.copyObject(a[c]);return b}if("object"==typeof a){b=null===a?null:{};for(d in a)b[d]=Faye.copyObject(a[d]);return b}return a},commonElement:function(a,b){for(var c=0,d=a.length;d>c;c++)if(-1!==this.indexOf(b,a[c]))return a[c];return null},indexOf:function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},map:function(a,b,c){if(a.map)return a.map(b,c);var d=[];if(a instanceof Array)for(var e=0,f=a.length;f>e;e++)d.push(b.call(c||null,a[e],e));else for(var g in a)a.hasOwnProperty(g)&&d.push(b.call(c||null,g,a[g]));return d},filter:function(a,b,c){if(a.filter)return a.filter(b,c);for(var d=[],e=0,f=a.length;f>e;e++)b.call(c||null,a[e],e)&&d.push(a[e]);return d},asyncEach:function(a,b,c,d){var e=a.length,f=-1,g=0,h=!1,i=function(){return g-=1,f+=1,f===e?c&&c.call(d):void b(a[f],k)},j=function(){if(!h){for(h=!0;g>0;)i();h=!1}},k=function(){g+=1,j()};k()},toJSON:function(a){return this.stringify?this.stringify(a,function(a,b){return this[a]instanceof Array?this[a]:b}):JSON.stringify(a)}};"undefined"!=typeof module?module.exports=Faye:"undefined"!=typeof window&&(window.Faye=Faye),Faye.Class=function(a,b){"function"!=typeof a&&(b=a,a=Object);var c=function(){return this.initialize?this.initialize.apply(this,arguments)||this:this},d=function(){};return d.prototype=a.prototype,c.prototype=new d,Faye.extend(c.prototype,b),c},function(){function a(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(b===a[c])return c;return-1}var b=Faye.EventEmitter=function(){},c="function"==typeof Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};b.prototype.emit=function(a){if("error"===a&&(!this._events||!this._events.error||c(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var b=this._events[a];if(!b)return!1;if("function"==typeof b){switch(arguments.length){case 1:b.call(this);break;case 2:b.call(this,arguments[1]);break;case 3:b.call(this,arguments[1],arguments[2]);break;default:var d=Array.prototype.slice.call(arguments,1);b.apply(this,d)}return!0}if(c(b)){for(var d=Array.prototype.slice.call(arguments,1),e=b.slice(),f=0,g=e.length;g>f;f++)e[f].apply(this,d);return!0}return!1},b.prototype.addListener=function(a,b){if("function"!=typeof b)throw new Error("addListener only takes instances of Function");return this._events||(this._events={}),this.emit("newListener",a,b),this._events[a]?c(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,this},b.prototype.on=b.prototype.addListener,b.prototype.once=function(a,b){var c=this;return c.on(a,function d(){c.removeListener(a,d),b.apply(this,arguments)}),this},b.prototype.removeListener=function(b,d){if("function"!=typeof d)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[b])return this;var e=this._events[b];if(c(e)){var f=a(e,d);if(0>f)return this;e.splice(f,1),0==e.length&&delete this._events[b]}else this._events[b]===d&&delete this._events[b];return this},b.prototype.removeAllListeners=function(a){return 0===arguments.length?(this._events={},this):(a&&this._events&&this._events[a]&&(this._events[a]=null),this)},b.prototype.listeners=function(a){return this._events||(this._events={}),this._events[a]||(this._events[a]=[]),c(this._events[a])||(this._events[a]=[this._events[a]]),this._events[a]}}(),Faye.Namespace=Faye.Class({initialize:function(){this._used={}},exists:function(a){return this._used.hasOwnProperty(a)},generate:function(){for(var a=Faye.random();this._used.hasOwnProperty(a);)a=Faye.random();return this._used[a]=a},release:function(a){delete this._used[a]}}),function(){var a,b=setTimeout;a="function"==typeof setImmediate?function(a){setImmediate(a)}:"object"==typeof process&&process.nextTick?function(a){process.nextTick(a)}:function(a){b(a,0)};var c=0,d=1,e=2,f=function(a){return a},g=function(a){throw a},h=function(a){if(this._state=c,this._onFulfilled=[],this._onRejected=[],"function"==typeof a){var b=this;a(function(a){m(b,a)},function(a){o(b,a)})}};h.prototype.then=function(a,b){var c=new h;return i(this,a,c),j(this,b,c),c};var i=function(a,b,e){"function"!=typeof b&&(b=f);var g=function(a){k(b,a,e)};a._state===c?a._onFulfilled.push(g):a._state===d&&g(a._value)},j=function(a,b,d){"function"!=typeof b&&(b=g);var f=function(a){k(b,a,d)};a._state===c?a._onRejected.push(f):a._state===e&&f(a._reason)},k=function(b,c,d){a(function(){l(b,c,d)})},l=function(a,b,c){var d;try{d=a(b)}catch(e){return o(c,e)}d===c?o(c,new TypeError("Recursive promise chain detected")):m(c,d)},m=h.fulfill=h.resolve=function(a,b){var c,d,e=!1;try{if(c=typeof b,d=null!==b&&("function"===c||"object"===c)&&b.then,"function"!=typeof d)return n(a,b);d.call(b,function(b){e^(e=!0)&&m(a,b)},function(b){e^(e=!0)&&o(a,b)})}catch(f){if(!(e^(e=!0)))return;o(a,f)}},n=function(a,b){if(a._state===c){a._state=d,a._value=b,a._onRejected=[];for(var e,f=a._onFulfilled;e=f.shift();)e(b)}},o=h.reject=function(a,b){if(a._state===c){a._state=e,a._reason=b,a._onFulfilled=[];for(var d,f=a._onRejected;d=f.shift();)d(b)}};h.all=function(a){return new h(function(b,c){var d,e=[],f=a.length;if(0===f)return b(e);for(d=0;f>d;d++)(function(a,d){h.fulfilled(a).then(function(a){e[d]=a,0===--f&&b(e)},c)})(a[d],d)})},h.defer=a,h.deferred=h.pending=function(){var a={};return a.promise=new h(function(b,c){a.fulfill=a.resolve=b,a.reject=c}),a},h.fulfilled=h.resolved=function(a){return new h(function(b,c){b(a)})},h.rejected=function(a){return new h(function(b,c){c(a)})},"undefined"==typeof Faye?module.exports=h:Faye.Promise=h}(),Faye.Set=Faye.Class({initialize:function(){this._index={}},add:function(a){var b=void 0!==a.id?a.id:a;return this._index.hasOwnProperty(b)?!1:(this._index[b]=a,!0)},forEach:function(a,b){for(var c in this._index)this._index.hasOwnProperty(c)&&a.call(b,this._index[c])},isEmpty:function(){for(var a in this._index)if(this._index.hasOwnProperty(a))return!1;return!0},member:function(a){for(var b in this._index)if(this._index[b]===a)return!0;return!1},remove:function(a){var b=void 0!==a.id?a.id:a,c=this._index[b];return delete this._index[b],c},toArray:function(){var a=[];return this.forEach(function(b){a.push(b)}),a}}),Faye.URI={isURI:function(a){return a&&a.protocol&&a.host&&a.path},isSameOrigin:function(a){var b=Faye.ENV.location;return a.protocol===b.protocol&&a.hostname===b.hostname&&a.port===b.port},parse:function(a){if("string"!=typeof a)return a;var b,c,d,e,f,g,h={},i=function(b,c){a=a.replace(c,function(a){return h[b]=a,""}),h[b]=h[b]||""};for(i("protocol",/^[a-z]+\:/i),i("host",/^\/\/[^\/\?#]+/),/^\//.test(a)||h.host||(a=Faye.ENV.location.pathname.replace(/[^\/]*$/,"")+a),i("pathname",/^[^\?#]*/),i("search",/^\?[^#]*/),i("hash",/^#.*/),h.protocol=h.protocol||Faye.ENV.location.protocol,h.host?(h.host=h.host.substr(2),b=h.host.split(":"),h.hostname=b[0],h.port=b[1]||""):(h.host=Faye.ENV.location.host,h.hostname=Faye.ENV.location.hostname,h.port=Faye.ENV.location.port),h.pathname=h.pathname||"/",h.path=h.pathname+h.search,c=h.search.replace(/^\?/,""),d=c?c.split("&"):[],g={},e=0,f=d.length;f>e;e++)b=d[e].split("="),g[decodeURIComponent(b[0]||"")]=decodeURIComponent(b[1]||"");return h.query=g,h.href=this.stringify(h),h},stringify:function(a){var b=a.protocol+"//"+a.hostname;return a.port&&(b+=":"+a.port),b+=a.pathname+this.queryString(a.query)+(a.hash||"")},queryString:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return 0===b.length?"":"?"+b.join("&")}},Faye.Error=Faye.Class({initialize:function(a,b,c){this.code=a,this.params=Array.prototype.slice.call(b),this.message=c},toString:function(){return this.code+":"+this.params.join(",")+":"+this.message}}),Faye.Error.parse=function(a){if(a=a||"",!Faye.Grammar.ERROR.test(a))return new this(null,[],a);var b=a.split(":"),c=parseInt(b[0]),d=b[1].split(","),a=b[2];return new this(c,d,a)},Faye.Error.versionMismatch=function(){return new this(300,arguments,"Version mismatch").toString()},Faye.Error.conntypeMismatch=function(){return new this(301,arguments,"Connection types not supported").toString()},Faye.Error.extMismatch=function(){return new this(302,arguments,"Extension mismatch").toString()},Faye.Error.badRequest=function(){return new this(400,arguments,"Bad request").toString()},Faye.Error.clientUnknown=function(){return new this(401,arguments,"Unknown client").toString()},Faye.Error.parameterMissing=function(){return new this(402,arguments,"Missing required parameter").toString()},Faye.Error.channelForbidden=function(){return new this(403,arguments,"Forbidden channel").toString()},Faye.Error.channelUnknown=function(){return new this(404,arguments,"Unknown channel").toString()},Faye.Error.channelInvalid=function(){return new this(405,arguments,"Invalid channel").toString()},Faye.Error.extUnknown=function(){return new this(406,arguments,"Unknown extension").toString()},Faye.Error.publishFailed=function(){return new this(407,arguments,"Failed to publish").toString()},Faye.Error.serverError=function(){return new this(500,arguments,"Internal server error").toString()},Faye.Deferrable={then:function(a,b){var c=this;return this._promise||(this._promise=new Faye.Promise(function(a,b){c._fulfill=a,c._reject=b})),0===arguments.length?this._promise:this._promise.then(a,b)},callback:function(a,b){return this.then(function(c){a.call(b,c)})},errback:function(a,b){return this.then(null,function(c){a.call(b,c)})},timeout:function(a,b){this.then();var c=this;this._timer=Faye.ENV.setTimeout(function(){c._reject(b)},1e3*a)},setDeferredStatus:function(a,b){this._timer&&Faye.ENV.clearTimeout(this._timer),this.then(),"succeeded"===a?this._fulfill(b):"failed"===a?this._reject(b):delete this._promise}},Faye.Publisher={countListeners:function(a){return this.listeners(a).length},bind:function(a,b,c){var d=Array.prototype.slice,e=function(){b.apply(c,d.call(arguments))};return this._listeners=this._listeners||[],this._listeners.push([a,b,c,e]),this.on(a,e)},unbind:function(a,b,c){this._listeners=this._listeners||[];for(var d,e=this._listeners.length;e--;)d=this._listeners[e],d[0]===a&&(!b||d[1]===b&&d[2]===c)&&(this._listeners.splice(e,1),this.removeListener(a,d[3]))}},Faye.extend(Faye.Publisher,Faye.EventEmitter.prototype),Faye.Publisher.trigger=Faye.Publisher.emit,Faye.Timeouts={addTimeout:function(a,b,c,d){if(this._timeouts=this._timeouts||{},!this._timeouts.hasOwnProperty(a)){var e=this;this._timeouts[a]=Faye.ENV.setTimeout(function(){delete e._timeouts[a],c.call(d)},1e3*b)}},removeTimeout:function(a){this._timeouts=this._timeouts||{};var b=this._timeouts[a];b&&(Faye.ENV.clearTimeout(b),delete this._timeouts[a])},removeAllTimeouts:function(){this._timeouts=this._timeouts||{};for(var a in this._timeouts)this.removeTimeout(a)}},Faye.Logging={LOG_LEVELS:{fatal:4,error:3,warn:2,info:1,debug:0},writeLog:function(a,b){if(Faye.logger){var c=Array.prototype.slice.apply(a),d="[Faye",e=this.className,f=c.shift().replace(/\?/g,function(){try{return Faye.toJSON(c.shift())}catch(a){return"[Object]"}});for(var g in Faye)e||"function"==typeof Faye[g]&&this instanceof Faye[g]&&(e=g);e&&(d+="."+e),d+="] ","function"==typeof Faye.logger[b]?Faye.logger[b](d+f):"function"==typeof Faye.logger&&Faye.logger(d+f)}}},function(){for(var a in Faye.Logging.LOG_LEVELS)(function(a){Faye.Logging[a]=function(){this.writeLog(arguments,a)}})(a)}(),Faye.Grammar={CHANNEL_NAME:/^\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*$/,CHANNEL_PATTERN:/^(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*\/\*{1,2}$/,ERROR:/^([0-9][0-9][0-9]:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*(,(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)*:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*|[0-9][0-9][0-9]::(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)$/,VERSION:/^([0-9])+(\.(([a-z]|[A-Z])|[0-9])(((([a-z]|[A-Z])|[0-9])|\-|\_))*)*$/},Faye.Extensible={addExtension:function(a){this._extensions=this._extensions||[],this._extensions.push(a),a.added&&a.added(this)},removeExtension:function(a){if(this._extensions)for(var b=this._extensions.length;b--;)this._extensions[b]===a&&(this._extensions.splice(b,1),a.removed&&a.removed(this))},pipeThroughExtensions:function(a,b,c,d,e){if(this.debug("Passing through ? extensions: ?",a,b),!this._extensions)return d.call(e,b);var f=this._extensions.slice(),g=function(b){if(!b)return d.call(e,b);var h=f.shift();if(!h)return d.call(e,b);var i=h[a];return i?void(i.length>=3?h[a](b,c,g):h[a](b,g)):g(b)};g(b)}},Faye.extend(Faye.Extensible,Faye.Logging),Faye.Channel=Faye.Class({initialize:function(a){this.id=this.name=a},push:function(a){this.trigger("message",a)},isUnused:function(){return 0===this.countListeners("message")}}),Faye.extend(Faye.Channel.prototype,Faye.Publisher),Faye.extend(Faye.Channel,{HANDSHAKE:"/meta/handshake",CONNECT:"/meta/connect",SUBSCRIBE:"/meta/subscribe",UNSUBSCRIBE:"/meta/unsubscribe",DISCONNECT:"/meta/disconnect",META:"meta",SERVICE:"service",expand:function(a){var b=this.parse(a),c=["/**",a],d=b.slice();d[d.length-1]="*",c.push(this.unparse(d));for(var e=1,f=b.length;f>e;e++)d=b.slice(0,e),d.push("**"),c.push(this.unparse(d));return c},isValid:function(a){return Faye.Grammar.CHANNEL_NAME.test(a)||Faye.Grammar.CHANNEL_PATTERN.test(a)},parse:function(a){return this.isValid(a)?a.split("/").slice(1):null},unparse:function(a){return"/"+a.join("/")},isMeta:function(a){var b=this.parse(a);return b?b[0]===this.META:null},isService:function(a){var b=this.parse(a);return b?b[0]===this.SERVICE:null},isSubscribable:function(a){return this.isValid(a)?!this.isMeta(a)&&!this.isService(a):null},Set:Faye.Class({initialize:function(){this._channels={}},getKeys:function(){var a=[];for(var b in this._channels)a.push(b);return a},remove:function(a){delete this._channels[a]},hasSubscription:function(a){return this._channels.hasOwnProperty(a)},subscribe:function(a,b,c){for(var d,e=0,f=a.length;f>e;e++){d=a[e];var g=this._channels[d]=this._channels[d]||new Faye.Channel(d);b&&g.bind("message",b,c)}},unsubscribe:function(a,b,c){var d=this._channels[a];return d?(d.unbind("message",b,c),d.isUnused()?(this.remove(a),!0):!1):!1},distributeMessage:function(a){for(var b=Faye.Channel.expand(a.channel),c=0,d=b.length;d>c;c++){var e=this._channels[b[c]];e&&e.trigger("message",a.data)}}})}),Faye.Publication=Faye.Class(Faye.Deferrable),Faye.Subscription=Faye.Class({initialize:function(a,b,c,d){this._client=a,this._channels=b,this._callback=c,this._context=d,this._cancelled=!1},cancel:function(){this._cancelled||(this._client.unsubscribe(this._channels,this._callback,this._context),this._cancelled=!0)},unsubscribe:function(){this.cancel()}}),Faye.extend(Faye.Subscription.prototype,Faye.Deferrable),Faye.Client=Faye.Class({UNCONNECTED:1,CONNECTING:2,CONNECTED:3,DISCONNECTED:4,HANDSHAKE:"handshake",RETRY:"retry",NONE:"none",CONNECTION_TIMEOUT:60,DEFAULT_ENDPOINT:"/bayeux",INTERVAL:0,initialize:function(a,b){this.info("New client created for ?",a),b=b||{},Faye.validateOptions(b,["interval","timeout","endpoints","proxy","retry","scheduler","websocketExtensions","tls","ca"]),this._endpoint=a||this.DEFAULT_ENDPOINT,this._channels=new Faye.Channel.Set,this._dispatcher=new Faye.Dispatcher(this,this._endpoint,b),this._messageId=0,this._state=this.UNCONNECTED,this._responseCallbacks={},this._advice={reconnect:this.RETRY,interval:1e3*(b.interval||this.INTERVAL),timeout:1e3*(b.timeout||this.CONNECTION_TIMEOUT)},this._dispatcher.timeout=this._advice.timeout/1e3,this._dispatcher.bind("message",this._receiveMessage,this),Faye.Event&&void 0!==Faye.ENV.onbeforeunload&&Faye.Event.on(Faye.ENV,"beforeunload",function(){Faye.indexOf(this._dispatcher._disabled,"autodisconnect")<0&&this.disconnect()},this)},addWebsocketExtension:function(a){return this._dispatcher.addWebsocketExtension(a)},disable:function(a){return this._dispatcher.disable(a)},setHeader:function(a,b){return this._dispatcher.setHeader(a,b)},handshake:function(a,b){if(this._advice.reconnect!==this.NONE&&this._state===this.UNCONNECTED){this._state=this.CONNECTING;var c=this;this.info("Initiating handshake with ?",Faye.URI.stringify(this._endpoint)),this._dispatcher.selectTransport(Faye.MANDATORY_CONNECTION_TYPES),this._sendMessage({channel:Faye.Channel.HANDSHAKE,version:Faye.BAYEUX_VERSION,supportedConnectionTypes:this._dispatcher.getConnectionTypes()},{},function(d){d.successful?(this._state=this.CONNECTED,this._dispatcher.clientId=d.clientId,this._dispatcher.selectTransport(d.supportedConnectionTypes),this.info("Handshake successful: ?",this._dispatcher.clientId),this.subscribe(this._channels.getKeys(),!0),a&&Faye.Promise.defer(function(){a.call(b)})):(this.info("Handshake unsuccessful"),Faye.ENV.setTimeout(function(){c.handshake(a,b)},1e3*this._dispatcher.retry),this._state=this.UNCONNECTED)},this)}},connect:function(a,b){if(this._advice.reconnect!==this.NONE&&this._state!==this.DISCONNECTED){if(this._state===this.UNCONNECTED)return this.handshake(function(){this.connect(a,b)},this);this.callback(a,b),this._state===this.CONNECTED&&(this.info("Calling deferred actions for ?",this._dispatcher.clientId),this.setDeferredStatus("succeeded"),this.setDeferredStatus("unknown"),this._connectRequest||(this._connectRequest=!0,this.info("Initiating connection for ?",this._dispatcher.clientId),this._sendMessage({channel:Faye.Channel.CONNECT,clientId:this._dispatcher.clientId,connectionType:this._dispatcher.connectionType},{},this._cycleConnection,this)))}},disconnect:function(){if(this._state===this.CONNECTED){this._state=this.DISCONNECTED,this.info("Disconnecting ?",this._dispatcher.clientId);var a=new Faye.Publication;return this._sendMessage({channel:Faye.Channel.DISCONNECT,clientId:this._dispatcher.clientId},{},function(b){b.successful?(this._dispatcher.close(),a.setDeferredStatus("succeeded")):a.setDeferredStatus("failed",Faye.Error.parse(b.error))},this),this.info("Clearing channel listeners for ?",this._dispatcher.clientId),this._channels=new Faye.Channel.Set,a}},subscribe:function(a,b,c){if(a instanceof Array)return Faye.map(a,function(a){return this.subscribe(a,b,c)},this);var d=new Faye.Subscription(this,a,b,c),e=b===!0,f=this._channels.hasSubscription(a);return f&&!e?(this._channels.subscribe([a],b,c),d.setDeferredStatus("succeeded"),d):(this.connect(function(){this.info("Client ? attempting to subscribe to ?",this._dispatcher.clientId,a),e||this._channels.subscribe([a],b,c),this._sendMessage({channel:Faye.Channel.SUBSCRIBE,clientId:this._dispatcher.clientId,subscription:a},{},function(e){if(!e.successful)return d.setDeferredStatus("failed",Faye.Error.parse(e.error)),this._channels.unsubscribe(a,b,c);var f=[].concat(e.subscription);this.info("Subscription acknowledged for ? to ?",this._dispatcher.clientId,f),d.setDeferredStatus("succeeded")},this)},this),d)},unsubscribe:function(a,b,c){if(a instanceof Array)return Faye.map(a,function(a){return this.unsubscribe(a,b,c)},this);var d=this._channels.unsubscribe(a,b,c);d&&this.connect(function(){this.info("Client ? attempting to unsubscribe from ?",this._dispatcher.clientId,a),this._sendMessage({channel:Faye.Channel.UNSUBSCRIBE,clientId:this._dispatcher.clientId,subscription:a},{},function(a){if(a.successful){var b=[].concat(a.subscription);this.info("Unsubscription acknowledged for ? from ?",this._dispatcher.clientId,b)}},this)},this)},publish:function(a,b,c){Faye.validateOptions(c||{},["attempts","deadline"]);var d=new Faye.Publication;return this.connect(function(){this.info("Client ? queueing published message to ?: ?",this._dispatcher.clientId,a,b),this._sendMessage({channel:a,data:b,clientId:this._dispatcher.clientId},c,function(a){a.successful?d.setDeferredStatus("succeeded"):d.setDeferredStatus("failed",Faye.Error.parse(a.error))},this)},this),d},_sendMessage:function(a,b,c,d){a.id=this._generateMessageId();var e=this._advice.timeout?1.2*this._advice.timeout/1e3:1.2*this._dispatcher.retry;this.pipeThroughExtensions("outgoing",a,null,function(a){a&&(c&&(this._responseCallbacks[a.id]=[c,d]),this._dispatcher.sendMessage(a,e,b||{}))},this)},_generateMessageId:function(){return this._messageId+=1,this._messageId>=Math.pow(2,32)&&(this._messageId=0),this._messageId.toString(36)},_receiveMessage:function(a){var b,c=a.id;void 0!==a.successful&&(b=this._responseCallbacks[c],delete this._responseCallbacks[c]),this.pipeThroughExtensions("incoming",a,null,function(a){a&&(a.advice&&this._handleAdvice(a.advice),this._deliverMessage(a),b&&b[0].call(b[1],a))},this)},_handleAdvice:function(a){Faye.extend(this._advice,a),this._dispatcher.timeout=this._advice.timeout/1e3,this._advice.reconnect===this.HANDSHAKE&&this._state!==this.DISCONNECTED&&(this._state=this.UNCONNECTED,this._dispatcher.clientId=null,this._cycleConnection())},_deliverMessage:function(a){a.channel&&void 0!==a.data&&(this.info("Client ? calling listeners for ? with ?",this._dispatcher.clientId,a.channel,a.data),this._channels.distributeMessage(a))},_cycleConnection:function(){this._connectRequest&&(this._connectRequest=null,this.info("Closed connection for ?",this._dispatcher.clientId));var a=this;Faye.ENV.setTimeout(function(){a.connect()},this._advice.interval)}}),Faye.extend(Faye.Client.prototype,Faye.Deferrable),Faye.extend(Faye.Client.prototype,Faye.Publisher),Faye.extend(Faye.Client.prototype,Faye.Logging),Faye.extend(Faye.Client.prototype,Faye.Extensible),Faye.Dispatcher=Faye.Class({MAX_REQUEST_SIZE:2048,DEFAULT_RETRY:5,UP:1,DOWN:2,initialize:function(a,b,c){this._client=a,this.endpoint=Faye.URI.parse(b),this._alternates=c.endpoints||{},this.cookies=Faye.Cookies&&new Faye.Cookies.CookieJar,this._disabled=[],this._envelopes={},this.headers={},this.retry=c.retry||this.DEFAULT_RETRY,this._scheduler=c.scheduler||Faye.Scheduler,this._state=0,this.transports={},this.wsExtensions=[],this.proxy=c.proxy||{},"string"==typeof this._proxy&&(this._proxy={origin:this._proxy});var d=c.websocketExtensions;if(d){d=[].concat(d);for(var e=0,f=d.length;f>e;e++)this.addWebsocketExtension(d[e])}this.tls=c.tls||{},this.tls.ca=this.tls.ca||c.ca;for(var g in this._alternates)this._alternates[g]=Faye.URI.parse(this._alternates[g]);this.maxRequestSize=this.MAX_REQUEST_SIZE},endpointFor:function(a){return this._alternates[a]||this.endpoint},addWebsocketExtension:function(a){this.wsExtensions.push(a)},disable:function(a){this._disabled.push(a)},setHeader:function(a,b){this.headers[a]=b},close:function(){var a=this._transport;delete this._transport,a&&a.close()},getConnectionTypes:function(){return Faye.Transport.getConnectionTypes()},selectTransport:function(a){Faye.Transport.get(this,a,this._disabled,function(a){this.debug("Selected ? transport for ?",a.connectionType,Faye.URI.stringify(a.endpoint)),a!==this._transport&&(this._transport&&this._transport.close(),this._transport=a,this.connectionType=a.connectionType)},this)},sendMessage:function(a,b,c){c=c||{};var d,e=a.id,f=c.attempts,g=c.deadline&&(new Date).getTime()+1e3*c.deadline,h=this._envelopes[e];h||(d=new this._scheduler(a,{timeout:b,interval:this.retry,attempts:f,deadline:g}),h=this._envelopes[e]={message:a,scheduler:d}),this._sendEnvelope(h)},_sendEnvelope:function(a){if(this._transport&&!a.request&&!a.timer){var b=a.message,c=a.scheduler,d=this;if(!c.isDeliverable())return c.abort(),void delete this._envelopes[b.id];a.timer=Faye.ENV.setTimeout(function(){d.handleError(b)},1e3*c.getTimeout()),c.send(),a.request=this._transport.sendMessage(b)}},handleResponse:function(a){var b=this._envelopes[a.id];void 0!==a.successful&&b&&(b.scheduler.succeed(),delete this._envelopes[a.id],Faye.ENV.clearTimeout(b.timer)),this.trigger("message",a),this._state!==this.UP&&(this._state=this.UP,this._client.trigger("transport:up"))},handleError:function(a,b){var c=this._envelopes[a.id],d=c&&c.request,e=this;if(d){d.then(function(a){a&&a.abort&&a.abort()});var f=c.scheduler;f.fail(),Faye.ENV.clearTimeout(c.timer),c.request=c.timer=null,b?this._sendEnvelope(c):c.timer=Faye.ENV.setTimeout(function(){c.timer=null,e._sendEnvelope(c)},1e3*f.getInterval()),this._state!==this.DOWN&&(this._state=this.DOWN,this._client.trigger("transport:down"))}}}),Faye.extend(Faye.Dispatcher.prototype,Faye.Publisher),Faye.extend(Faye.Dispatcher.prototype,Faye.Logging),Faye.Scheduler=function(a,b){this.message=a,this.options=b,this.attempts=0},Faye.extend(Faye.Scheduler.prototype,{getTimeout:function(){return this.options.timeout},getInterval:function(){return this.options.interval},isDeliverable:function(){var a=this.options.attempts,b=this.attempts,c=this.options.deadline,d=(new Date).getTime();return void 0!==a&&b>=a?!1:void 0!==c&&d>c?!1:!0},send:function(){this.attempts+=1},succeed:function(){},
fail:function(){},abort:function(){}}),Faye.Transport=Faye.extend(Faye.Class({DEFAULT_PORTS:{"http:":80,"https:":443,"ws:":80,"wss:":443},SECURE_PROTOCOLS:["https:","wss:"],MAX_DELAY:0,batching:!0,initialize:function(a,b){this._dispatcher=a,this.endpoint=b,this._outbox=[],this._proxy=Faye.extend({},this._dispatcher.proxy),!this._proxy.origin&&Faye.NodeAdapter&&(this._proxy.origin=Faye.indexOf(this.SECURE_PROTOCOLS,this.endpoint.protocol)>=0?process.env.HTTPS_PROXY||process.env.https_proxy:process.env.HTTP_PROXY||process.env.http_proxy)},close:function(){},encode:function(a){return""},sendMessage:function(a){return this.debug("Client ? sending message to ?: ?",this._dispatcher.clientId,Faye.URI.stringify(this.endpoint),a),this.batching?(this._outbox.push(a),this._promise=this._promise||new Faye.Promise,this._flushLargeBatch(),a.channel===Faye.Channel.HANDSHAKE?(this.addTimeout("publish",.01,this._flush,this),this._promise):(a.channel===Faye.Channel.CONNECT&&(this._connectMessage=a),this.addTimeout("publish",this.MAX_DELAY,this._flush,this),this._promise)):Faye.Promise.fulfilled(this.request([a]))},_flush:function(){this.removeTimeout("publish"),this._outbox.length>1&&this._connectMessage&&(this._connectMessage.advice={timeout:0}),Faye.Promise.fulfill(this._promise,this.request(this._outbox)),delete this._promise,this._connectMessage=null,this._outbox=[]},_flushLargeBatch:function(){var a=this.encode(this._outbox);if(!(a.length<this._dispatcher.maxRequestSize)){var b=this._outbox.pop();this._flush(),b&&this._outbox.push(b)}},_receive:function(a){if(a){a=[].concat(a),this.debug("Client ? received from ? via ?: ?",this._dispatcher.clientId,Faye.URI.stringify(this.endpoint),this.connectionType,a);for(var b=0,c=a.length;c>b;b++)this._dispatcher.handleResponse(a[b])}},_handleError:function(a,b){a=[].concat(a),this.debug("Client ? failed to send to ? via ?: ?",this._dispatcher.clientId,Faye.URI.stringify(this.endpoint),this.connectionType,a);for(var c=0,d=a.length;d>c;c++)this._dispatcher.handleError(a[c])},_getCookies:function(){var a=this._dispatcher.cookies,b=Faye.URI.stringify(this.endpoint);return a?Faye.map(a.getCookiesSync(b),function(a){return a.cookieString()}).join("; "):""},_storeCookies:function(a){var b,c=this._dispatcher.cookies,d=Faye.URI.stringify(this.endpoint);if(a&&c){a=[].concat(a);for(var e=0,f=a.length;f>e;e++)b=Faye.Cookies.Cookie.parse(a[e]),c.setCookieSync(b,d)}}}),{get:function(a,b,c,d,e){var f=a.endpoint;Faye.asyncEach(this._transports,function(f,g){var h=f[0],i=f[1],j=a.endpointFor(h);return Faye.indexOf(c,h)>=0?g():Faye.indexOf(b,h)<0?(i.isUsable(a,j,function(){}),g()):void i.isUsable(a,j,function(b){if(!b)return g();var c=i.hasOwnProperty("create")?i.create(a,j):new i(a,j);d.call(e,c)})},function(){throw new Error("Could not find a usable connection type for "+Faye.URI.stringify(f))})},register:function(a,b){this._transports.push([a,b]),b.prototype.connectionType=a},getConnectionTypes:function(){return Faye.map(this._transports,function(a){return a[0]})},_transports:[]}),Faye.extend(Faye.Transport.prototype,Faye.Logging),Faye.extend(Faye.Transport.prototype,Faye.Timeouts),Faye.Event={_registry:[],on:function(a,b,c,d){var e=function(){c.call(d)};a.addEventListener?a.addEventListener(b,e,!1):a.attachEvent("on"+b,e),this._registry.push({_element:a,_type:b,_callback:c,_context:d,_handler:e})},detach:function(a,b,c,d){for(var e,f=this._registry.length;f--;)e=this._registry[f],a&&a!==e._element||b&&b!==e._type||c&&c!==e._callback||d&&d!==e._context||(e._element.removeEventListener?e._element.removeEventListener(e._type,e._handler,!1):e._element.detachEvent("on"+e._type,e._handler),this._registry.splice(f,1),e=null)}},void 0!==Faye.ENV.onunload&&Faye.Event.on(Faye.ENV,"unload",Faye.Event.detach,Faye.Event),"object"!=typeof JSON&&(JSON={}),function(){function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;Faye.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})},"function"!=typeof JSON.stringify&&(JSON.stringify=Faye.stringify),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),Faye.Transport.WebSocket=Faye.extend(Faye.Class(Faye.Transport,{UNCONNECTED:1,CONNECTING:2,CONNECTED:3,batching:!1,isUsable:function(a,b){this.callback(function(){a.call(b,!0)}),this.errback(function(){a.call(b,!1)}),this.connect()},request:function(a){this._pending=this._pending||new Faye.Set;for(var b=0,c=a.length;c>b;b++)this._pending.add(a[b]);var d=new Faye.Promise;return this.callback(function(b){b&&1===b.readyState&&(b.send(Faye.toJSON(a)),Faye.Promise.fulfill(d,b))},this),this.connect(),{abort:function(){d.then(function(a){a.close()})}}},connect:function(){if(!Faye.Transport.WebSocket._unloaded&&(this._state=this._state||this.UNCONNECTED,this._state===this.UNCONNECTED)){this._state=this.CONNECTING;var a=this._createSocket();if(!a)return this.setDeferredStatus("failed");var b=this;a.onopen=function(){a.headers&&b._storeCookies(a.headers["set-cookie"]),b._socket=a,b._state=b.CONNECTED,b._everConnected=!0,b._ping(),b.setDeferredStatus("succeeded",a)};var c=!1;a.onclose=a.onerror=function(){if(!c){c=!0;var d=b._state===b.CONNECTED;a.onopen=a.onclose=a.onerror=a.onmessage=null,delete b._socket,b._state=b.UNCONNECTED,b.removeTimeout("ping"),b.setDeferredStatus("unknown");var e=b._pending?b._pending.toArray():[];delete b._pending,d?b._handleError(e,!0):b._everConnected?b._handleError(e):b.setDeferredStatus("failed")}},a.onmessage=function(a){var c=JSON.parse(a.data);if(c){c=[].concat(c);for(var d=0,e=c.length;e>d;d++)void 0!==c[d].successful&&b._pending.remove(c[d]);b._receive(c)}}}},close:function(){this._socket&&this._socket.close()},_createSocket:function(){var a=Faye.Transport.WebSocket.getSocketUrl(this.endpoint),b=this._dispatcher.headers,c=this._dispatcher.wsExtensions,d=this._getCookies(),e=this._dispatcher.tls,f={extensions:c,headers:b,proxy:this._proxy,tls:e};return""!==d&&(f.headers.Cookie=d),Faye.WebSocket?new Faye.WebSocket.Client(a,[],f):Faye.ENV.MozWebSocket?new MozWebSocket(a):Faye.ENV.WebSocket?new WebSocket(a):void 0},_ping:function(){this._socket&&(this._socket.send("[]"),this.addTimeout("ping",this._dispatcher.timeout/2,this._ping,this))}}),{PROTOCOLS:{"http:":"ws:","https:":"wss:"},create:function(a,b){var c=a.transports.websocket=a.transports.websocket||{};return c[b.href]=c[b.href]||new this(a,b),c[b.href]},getSocketUrl:function(a){return a=Faye.copyObject(a),a.protocol=this.PROTOCOLS[a.protocol],Faye.URI.stringify(a)},isUsable:function(a,b,c,d){this.create(a,b).isUsable(c,d)}}),Faye.extend(Faye.Transport.WebSocket.prototype,Faye.Deferrable),Faye.Transport.register("websocket",Faye.Transport.WebSocket),Faye.Event&&void 0!==Faye.ENV.onbeforeunload&&Faye.Event.on(Faye.ENV,"beforeunload",function(){Faye.Transport.WebSocket._unloaded=!0}),Faye.Transport.EventSource=Faye.extend(Faye.Class(Faye.Transport,{initialize:function(a,b){if(Faye.Transport.prototype.initialize.call(this,a,b),!Faye.ENV.EventSource)return this.setDeferredStatus("failed");this._xhr=new Faye.Transport.XHR(a,b),b=Faye.copyObject(b),b.pathname+="/"+a.clientId;var c=new EventSource(Faye.URI.stringify(b)),d=this;c.onopen=function(){d._everConnected=!0,d.setDeferredStatus("succeeded")},c.onerror=function(){d._everConnected?d._handleError([]):(d.setDeferredStatus("failed"),c.close())},c.onmessage=function(a){d._receive(JSON.parse(a.data))},this._socket=c},close:function(){this._socket&&(this._socket.onopen=this._socket.onerror=this._socket.onmessage=null,this._socket.close(),delete this._socket)},isUsable:function(a,b){this.callback(function(){a.call(b,!0)}),this.errback(function(){a.call(b,!1)})},encode:function(a){return this._xhr.encode(a)},request:function(a){return this._xhr.request(a)}}),{isUsable:function(a,b,c,d){var e=a.clientId;return e?void Faye.Transport.XHR.isUsable(a,b,function(e){return e?void this.create(a,b).isUsable(c,d):c.call(d,!1)},this):c.call(d,!1)},create:function(a,b){var c=a.transports.eventsource=a.transports.eventsource||{},d=a.clientId,e=Faye.copyObject(b);return e.pathname+="/"+(d||""),e=Faye.URI.stringify(e),c[e]=c[e]||new this(a,b),c[e]}}),Faye.extend(Faye.Transport.EventSource.prototype,Faye.Deferrable),Faye.Transport.register("eventsource",Faye.Transport.EventSource),Faye.Transport.XHR=Faye.extend(Faye.Class(Faye.Transport,{encode:function(a){return Faye.toJSON(a)},request:function(a){var b=this.endpoint.href,c=Faye.ENV.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest,d=this;c.open("POST",b,!0),c.setRequestHeader("Content-Type","application/json"),c.setRequestHeader("Pragma","no-cache"),c.setRequestHeader("X-Requested-With","XMLHttpRequest");var e=this._dispatcher.headers;for(var f in e)e.hasOwnProperty(f)&&c.setRequestHeader(f,e[f]);var g=function(){c.abort()};return void 0!==Faye.ENV.onbeforeunload&&Faye.Event.on(Faye.ENV,"beforeunload",g),c.onreadystatechange=function(){if(c&&4===c.readyState){var b=null,e=c.status,f=c.responseText,h=e>=200&&300>e||304===e||1223===e;if(void 0!==Faye.ENV.onbeforeunload&&Faye.Event.detach(Faye.ENV,"beforeunload",g),c.onreadystatechange=function(){},c=null,!h)return d._handleError(a);try{b=JSON.parse(f)}catch(i){}b?d._receive(b):d._handleError(a)}},c.send(this.encode(a)),c}}),{isUsable:function(a,b,c,d){c.call(d,Faye.URI.isSameOrigin(b))}}),Faye.Transport.register("long-polling",Faye.Transport.XHR),Faye.Transport.CORS=Faye.extend(Faye.Class(Faye.Transport,{encode:function(a){return"message="+encodeURIComponent(Faye.toJSON(a))},request:function(a){var b,c=Faye.ENV.XDomainRequest?XDomainRequest:XMLHttpRequest,d=new c,e=++Faye.Transport.CORS._id,f=this._dispatcher.headers,g=this;if(d.open("POST",Faye.URI.stringify(this.endpoint),!0),d.setRequestHeader){d.setRequestHeader("Pragma","no-cache");for(b in f)f.hasOwnProperty(b)&&d.setRequestHeader(b,f[b])}var h=function(){return d?(Faye.Transport.CORS._pending.remove(e),d.onload=d.onerror=d.ontimeout=d.onprogress=null,void(d=null)):!1};return d.onload=function(){var b=null;try{b=JSON.parse(d.responseText)}catch(c){}h(),b?g._receive(b):g._handleError(a)},d.onerror=d.ontimeout=function(){h(),g._handleError(a)},d.onprogress=function(){},c===Faye.ENV.XDomainRequest&&Faye.Transport.CORS._pending.add({id:e,xhr:d}),d.send(this.encode(a)),d}}),{_id:0,_pending:new Faye.Set,isUsable:function(a,b,c,d){if(Faye.URI.isSameOrigin(b))return c.call(d,!1);if(Faye.ENV.XDomainRequest)return c.call(d,b.protocol===Faye.ENV.location.protocol);if(Faye.ENV.XMLHttpRequest){var e=new Faye.ENV.XMLHttpRequest;return c.call(d,void 0!==e.withCredentials)}return c.call(d,!1)}}),Faye.Transport.register("cross-origin-long-polling",Faye.Transport.CORS),Faye.Transport.JSONP=Faye.extend(Faye.Class(Faye.Transport,{encode:function(a){var b=Faye.copyObject(this.endpoint);return b.query.message=Faye.toJSON(a),b.query.jsonp="__jsonp"+Faye.Transport.JSONP._cbCount+"__",Faye.URI.stringify(b)},request:function(a){var b=document.getElementsByTagName("head")[0],c=document.createElement("script"),d=Faye.Transport.JSONP.getCallbackName(),e=Faye.copyObject(this.endpoint),f=this;e.query.message=Faye.toJSON(a),e.query.jsonp=d;var g=function(){if(!Faye.ENV[d])return!1;Faye.ENV[d]=void 0;try{delete Faye.ENV[d]}catch(a){}c.parentNode.removeChild(c)};return Faye.ENV[d]=function(a){g(),f._receive(a)},c.type="text/javascript",c.src=Faye.URI.stringify(e),b.appendChild(c),c.onerror=function(){g(),f._handleError(a)},{abort:g}}}),{_cbCount:0,getCallbackName:function(){return this._cbCount+=1,"__jsonp"+this._cbCount+"__"},isUsable:function(a,b,c,d){c.call(d,!0)}}),Faye.Transport.register("callback-polling",Faye.Transport.JSONP)}()}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:44}],53:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],54:[function(a,b,c){"use strict";function d(a){function b(a){return null===i?void k.push(a):void g(function(){var b=i?a.onFulfilled:a.onRejected;if(null===b)return void(i?a.resolve:a.reject)(j);var c;try{c=b(j)}catch(d){return void a.reject(d)}a.resolve(c)})}function c(a){try{if(a===l)throw new TypeError("A promise cannot be resolved with itself.");if(a&&("object"==typeof a||"function"==typeof a)){var b=a.then;if("function"==typeof b)return void f(b.bind(a),c,d)}i=!0,j=a,h()}catch(e){d(e)}}function d(a){i=!1,j=a,h()}function h(){for(var a=0,c=k.length;c>a;a++)b(k[a]);k=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");var i=null,j=null,k=[],l=this;this.then=function(a,c){return new l.constructor(function(d,f){b(new e(a,c,d,f))})},f(a,c,d)}function e(a,b,c,d){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.resolve=c,this.reject=d}function f(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){if(d)return;d=!0,c(e)}}var g=a("asap");b.exports=d},{asap:56}],55:[function(a,b,c){"use strict";function d(a){this.then=function(b){return"function"!=typeof b?this:new e(function(c,d){f(function(){try{c(b(a))}catch(e){d(e)}})})}}var e=a("./core.js"),f=a("asap");b.exports=e,d.prototype=e.prototype;var g=new d(!0),h=new d(!1),i=new d(null),j=new d(void 0),k=new d(0),l=new d("");e.resolve=function(a){if(a instanceof e)return a;if(null===a)return i;if(void 0===a)return j;if(a===!0)return g;if(a===!1)return h;if(0===a)return k;if(""===a)return l;if("object"==typeof a||"function"==typeof a)try{var b=a.then;if("function"==typeof b)return new e(b.bind(a))}catch(c){return new e(function(a,b){b(c)})}return new d(a)},e.all=function(a){var b=Array.prototype.slice.call(a);return new e(function(a,c){function d(f,g){try{if(g&&("object"==typeof g||"function"==typeof g)){var h=g.then;if("function"==typeof h)return void h.call(g,function(a){d(f,a)},c)}b[f]=g,0===--e&&a(b)}catch(i){c(i)}}if(0===b.length)return a([]);for(var e=b.length,f=0;f<b.length;f++)d(f,b[f])})},e.reject=function(a){return new e(function(b,c){c(a)})},e.race=function(a){return new e(function(b,c){a.forEach(function(a){e.resolve(a).then(b,c)})})},e.prototype["catch"]=function(a){return this.then(null,a)}},{"./core.js":54,asap:56}],56:[function(a,b,c){(function(a){function c(){for(;e.next;){e=e.next;var a=e.task;e.task=void 0;var b=e.domain;b&&(e.domain=void 0,b.enter());try{a()}catch(d){if(i)throw b&&b.exit(),setTimeout(c,0),b&&b.enter(),d;setTimeout(function(){throw d},0)}b&&b.exit()}g=!1}function d(b){f=f.next={task:b,domain:i&&a.domain,next:null},g||(g=!0,h())}var e={task:void 0,next:null},f=e,g=!1,h=void 0,i=!1;if("undefined"!=typeof a&&a.nextTick)i=!0,h=function(){a.nextTick(c)};else if("function"==typeof setImmediate)h="undefined"!=typeof window?setImmediate.bind(window,c):function(){setImmediate(c)};else if("undefined"!=typeof MessageChannel){var j=new MessageChannel;j.port1.onmessage=c,h=function(){j.port2.postMessage(0)}}else h=function(){setTimeout(c,0)};b.exports=d}).call(this,a("_process"))},{_process:44}],57:[function(a,b,c){b.exports=a("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":58}],58:[function(a,b,c){"use strict";function d(a){return this instanceof d?(j.call(this,a),k.call(this,a),a&&a.readable===!1&&(this.readable=!1),a&&a.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",e)):new d(a)}function e(){this.allowHalfOpen||this._writableState.ended||h(f,this)}function f(a){a.end()}var g=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b};b.exports=d;var h=a("process-nextick-args"),i=a("core-util-is");i.inherits=a("inherits");var j=a("./_stream_readable"),k=a("./_stream_writable");i.inherits(d,j);for(var l=g(k.prototype),m=0;m<l.length;m++){var n=l[m];d.prototype[n]||(d.prototype[n]=k.prototype[n])}},{"./_stream_readable":60,"./_stream_writable":62,"core-util-is":63,inherits:53,"process-nextick-args":65}],59:[function(a,b,c){"use strict";function d(a){return this instanceof d?void e.call(this,a):new d(a)}b.exports=d;var e=a("./_stream_transform"),f=a("core-util-is");f.inherits=a("inherits"),f.inherits(d,e),d.prototype._transform=function(a,b,c){c(null,a)}},{"./_stream_transform":61,"core-util-is":63,inherits:53}],60:[function(a,b,c){(function(c){"use strict";function d(b,c){var d=a("./_stream_duplex");b=b||{},this.objectMode=!!b.objectMode,c instanceof d&&(this.objectMode=this.objectMode||!!b.readableObjectMode);var e=b.highWaterMark,f=this.objectMode?16:16384;this.highWaterMark=e||0===e?e:f,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.defaultEncoding=b.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(G||(G=a("string_decoder/").StringDecoder),this.decoder=new G(b.encoding),this.encoding=b.encoding)}function e(b){a("./_stream_duplex");return this instanceof e?(this._readableState=new d(b,this),this.readable=!0,b&&"function"==typeof b.read&&(this._read=b.read),void D.call(this)):new e(b)}function f(a,b,c,d,e){var f=j(b,c);if(f)a.emit("error",f);else if(null===c)b.reading=!1,k(a,b);else if(b.objectMode||c&&c.length>0)if(b.ended&&!e){var h=new Error("stream.push() after EOF");a.emit("error",h)}else if(b.endEmitted&&e){var h=new Error("stream.unshift() after end event");a.emit("error",h)}else!b.decoder||e||d||(c=b.decoder.write(c)),e||(b.reading=!1),b.flowing&&0===b.length&&!b.sync?(a.emit("data",c),a.read(0)):(b.length+=b.objectMode?1:c.length,e?b.buffer.unshift(c):b.buffer.push(c),b.needReadable&&l(a)),n(a,b);else e||(b.reading=!1);return g(b)}function g(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function h(a){if(a>=H)a=H;else{a--;for(var b=1;32>b;b<<=1)a|=a>>b;a++}return a}function i(a,b){return 0===b.length&&b.ended?0:b.objectMode?0===a?0:1:null===a||isNaN(a)?b.flowing&&b.buffer.length?b.buffer[0].length:b.length:0>=a?0:(a>b.highWaterMark&&(b.highWaterMark=h(a)),a>b.length?b.ended?b.length:(b.needReadable=!0,0):a)}function j(a,b){var c=null;return B.isBuffer(b)||"string"==typeof b||null===b||void 0===b||a.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c}function k(a,b){if(!b.ended){if(b.decoder){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0,l(a)}}function l(a){var b=a._readableState;b.needReadable=!1,b.emittedReadable||(F("emitReadable",b.flowing),b.emittedReadable=!0,b.sync?z(m,a):m(a))}function m(a){F("emit readable"),a.emit("readable"),t(a)}function n(a,b){b.readingMore||(b.readingMore=!0,z(o,a,b))}function o(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(F("maybeReadMore read 0"),a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function p(a){return function(){var b=a._readableState;F("pipeOnDrain",b.awaitDrain),b.awaitDrain&&b.awaitDrain--,0===b.awaitDrain&&C.listenerCount(a,"data")&&(b.flowing=!0,t(a))}}function q(a){F("readable nexttick read 0"),a.read(0)}function r(a,b){b.resumeScheduled||(b.resumeScheduled=!0,z(s,a,b))}function s(a,b){b.reading||(F("resume read 0"),a.read(0)),b.resumeScheduled=!1,a.emit("resume"),t(a),b.flowing&&!b.reading&&a.read(0)}function t(a){var b=a._readableState;if(F("flow",b.flowing),b.flowing)do var c=a.read();while(null!==c&&b.flowing)}function u(a,b){var c,d=b.buffer,e=b.length,f=!!b.decoder,g=!!b.objectMode;if(0===d.length)return null;if(0===e)c=null;else if(g)c=d.shift();else if(!a||a>=e)c=f?d.join(""):B.concat(d,e),d.length=0;else if(a<d[0].length){var h=d[0];c=h.slice(0,a),d[0]=h.slice(a)}else if(a===d[0].length)c=d.shift();else{c=f?"":new B(a);for(var i=0,j=0,k=d.length;k>j&&a>i;j++){var h=d[0],l=Math.min(a-i,h.length);f?c+=h.slice(0,l):h.copy(c,i,0,l),l<h.length?d[0]=h.slice(l):d.shift(),i+=l}}return c}function v(a){var b=a._readableState;if(b.length>0)throw new Error("endReadable called on non-empty stream");b.endEmitted||(b.ended=!0,z(w,b,a))}function w(a,b){a.endEmitted||0!==a.length||(a.endEmitted=!0,b.readable=!1,b.emit("end"))}function x(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)}function y(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}b.exports=e;var z=a("process-nextick-args"),A=a("isarray"),B=a("buffer").Buffer;e.ReadableState=d;var C=a("events").EventEmitter;C.listenerCount||(C.listenerCount=function(a,b){return a.listeners(b).length});var D;!function(){try{D=a("stream")}catch(b){}finally{D||(D=a("events").EventEmitter)}}();var B=a("buffer").Buffer,E=a("core-util-is");E.inherits=a("inherits");var F=a("util");F=F&&F.debuglog?F.debuglog("stream"):function(){};var G;E.inherits(e,D),e.prototype.push=function(a,b){var c=this._readableState;return c.objectMode||"string"!=typeof a||(b=b||c.defaultEncoding,b!==c.encoding&&(a=new B(a,b),b="")),f(this,c,a,b,!1)},e.prototype.unshift=function(a){var b=this._readableState;return f(this,b,a,"",!0)},e.prototype.isPaused=function(){return this._readableState.flowing===!1},e.prototype.setEncoding=function(b){return G||(G=a("string_decoder/").StringDecoder),this._readableState.decoder=new G(b),this._readableState.encoding=b,this};var H=8388608;e.prototype.read=function(a){F("read",a);var b=this._readableState,c=a;if(("number"!=typeof a||a>0)&&(b.emittedReadable=!1),0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return F("read: emitReadable",b.length,b.ended),0===b.length&&b.ended?v(this):l(this),null;if(a=i(a,b),0===a&&b.ended)return 0===b.length&&v(this),null;var d=b.needReadable;F("need readable",d),(0===b.length||b.length-a<b.highWaterMark)&&(d=!0,F("length less than watermark",d)),(b.ended||b.reading)&&(d=!1,F("reading or ended",d)),d&&(F("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1),d&&!b.reading&&(a=i(c,b));var e;return e=a>0?u(a,b):null,null===e&&(b.needReadable=!0,a=0),b.length-=a,0!==b.length||b.ended||(b.needReadable=!0),c!==a&&b.ended&&0===b.length&&v(this),null!==e&&this.emit("data",e),e},e.prototype._read=function(a){this.emit("error",new Error("not implemented"))},e.prototype.pipe=function(a,b){function d(a){F("onunpipe"),a===l&&f()}function e(){F("onend"),a.end()}function f(){F("cleanup"),a.removeListener("close",i),a.removeListener("finish",j),a.removeListener("drain",q),a.removeListener("error",h),a.removeListener("unpipe",d),l.removeListener("end",e),l.removeListener("end",f),l.removeListener("data",g),!m.awaitDrain||a._writableState&&!a._writableState.needDrain||q()}function g(b){F("ondata");var c=a.write(b);!1===c&&(F("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,l.pause())}function h(b){F("onerror",b),k(),a.removeListener("error",h),0===C.listenerCount(a,"error")&&a.emit("error",b)}function i(){a.removeListener("finish",j),k()}function j(){F("onfinish"),a.removeListener("close",i),k()}function k(){F("unpipe"),l.unpipe(a)}var l=this,m=this._readableState;switch(m.pipesCount){case 0:m.pipes=a;break;case 1:m.pipes=[m.pipes,a];break;default:m.pipes.push(a)}m.pipesCount+=1,F("pipe count=%d opts=%j",m.pipesCount,b);var n=(!b||b.end!==!1)&&a!==c.stdout&&a!==c.stderr,o=n?e:f;m.endEmitted?z(o):l.once("end",o),a.on("unpipe",d);var q=p(l);return a.on("drain",q),l.on("data",g),a._events&&a._events.error?A(a._events.error)?a._events.error.unshift(h):a._events.error=[h,a._events.error]:a.on("error",h),a.once("close",i),a.once("finish",j),a.emit("pipe",l),m.flowing||(F("pipe resume"),l.resume()),a},e.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount)return a&&a!==b.pipes?this:(a||(a=b.pipes),b.pipes=null,b.pipesCount=0,b.flowing=!1,a&&a.emit("unpipe",this),this);if(!a){var c=b.pipes,d=b.pipesCount;b.pipes=null,b.pipesCount=0,b.flowing=!1;for(var e=0;d>e;e++)c[e].emit("unpipe",this);return this}var e=y(b.pipes,a);return-1===e?this:(b.pipes.splice(e,1),b.pipesCount-=1,1===b.pipesCount&&(b.pipes=b.pipes[0]),a.emit("unpipe",this),this)},e.prototype.on=function(a,b){var c=D.prototype.on.call(this,a,b);if("data"===a&&!1!==this._readableState.flowing&&this.resume(),"readable"===a&&this.readable){var d=this._readableState;d.readableListening||(d.readableListening=!0,d.emittedReadable=!1,d.needReadable=!0,d.reading?d.length&&l(this,d):z(q,this))}return c},e.prototype.addListener=e.prototype.on,e.prototype.resume=function(){var a=this._readableState;return a.flowing||(F("resume"),a.flowing=!0,r(this,a)),this},e.prototype.pause=function(){return F("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(F("pause"),this._readableState.flowing=!1,this.emit("pause")),this},e.prototype.wrap=function(a){var b=this._readableState,c=!1,d=this;a.on("end",function(){if(F("wrapped end"),b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)}),a.on("data",function(e){if(F("wrapped data"),b.decoder&&(e=b.decoder.write(e)),(!b.objectMode||null!==e&&void 0!==e)&&(b.objectMode||e&&e.length)){var f=d.push(e);f||(c=!0,a.pause())}});for(var e in a)void 0===this[e]&&"function"==typeof a[e]&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));var f=["error","close","destroy","pause","resume"];return x(f,function(b){a.on(b,d.emit.bind(d,b))}),d._read=function(b){F("wrapped _read",b),c&&(c=!1,a.resume())},d},e._fromList=u}).call(this,a("_process"))},{"./_stream_duplex":58,_process:44,buffer:38,"core-util-is":63,events:42,inherits:53,isarray:64,"process-nextick-args":65,"string_decoder/":66,util:37}],61:[function(a,b,c){"use strict";function d(a){this.afterTransform=function(b,c){return e(a,b,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function e(a,b,c){var d=a._transformState;d.transforming=!1;var e=d.writecb;if(!e)return a.emit("error",new Error("no writecb in Transform class"));d.writechunk=null,d.writecb=null,null!==c&&void 0!==c&&a.push(c),e&&e(b);var f=a._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&a._read(f.highWaterMark)}function f(a){if(!(this instanceof f))return new f(a);h.call(this,a),this._transformState=new d(this);var b=this;this._readableState.needReadable=!0,this._readableState.sync=!1,a&&("function"==typeof a.transform&&(this._transform=a.transform),"function"==typeof a.flush&&(this._flush=a.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(a){g(b,a)}):g(b)})}function g(a,b){if(b)return a.emit("error",b);var c=a._writableState,d=a._transformState;if(c.length)throw new Error("calling transform done when ws.length != 0");if(d.transforming)throw new Error("calling transform done when still transforming");return a.push(null)}b.exports=f;var h=a("./_stream_duplex"),i=a("core-util-is");i.inherits=a("inherits"),i.inherits(f,h),f.prototype.push=function(a,b){return this._transformState.needTransform=!1,h.prototype.push.call(this,a,b)},f.prototype._transform=function(a,b,c){throw new Error("not implemented")},f.prototype._write=function(a,b,c){var d=this._transformState;if(d.writecb=c,d.writechunk=a,d.writeencoding=b,!d.transforming){var e=this._readableState;(d.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},f.prototype._read=function(a){var b=this._transformState;null!==b.writechunk&&b.writecb&&!b.transforming?(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform)):b.needTransform=!0}},{"./_stream_duplex":58,"core-util-is":63,inherits:53}],62:[function(a,b,c){"use strict";function d(){}function e(a,b,c){this.chunk=a,this.encoding=b,this.callback=c,this.next=null}function f(b,c){var d=a("./_stream_duplex");b=b||{},this.objectMode=!!b.objectMode,c instanceof d&&(this.objectMode=this.objectMode||!!b.writableObjectMode);var e=b.highWaterMark,f=this.objectMode?16:16384;this.highWaterMark=e||0===e?e:f,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var g=b.decodeStrings===!1;this.decodeStrings=!g,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){o(c,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function g(b){var c=a("./_stream_duplex");return this instanceof g||this instanceof c?(this._writableState=new f(b,this),this.writable=!0,b&&("function"==typeof b.write&&(this._write=b.write),"function"==typeof b.writev&&(this._writev=b.writev)),void z.call(this)):new g(b)}function h(a,b){var c=new Error("write after end");a.emit("error",c),w(b,c)}function i(a,b,c,d){var e=!0;if(!x.isBuffer(c)&&"string"!=typeof c&&null!==c&&void 0!==c&&!b.objectMode){var f=new TypeError("Invalid non-string/buffer chunk");a.emit("error",f),w(d,f),e=!1}return e}function j(a,b,c){return a.objectMode||a.decodeStrings===!1||"string"!=typeof b||(b=new x(b,c)),
b}function k(a,b,c,d,f){c=j(b,c,d),x.isBuffer(c)&&(d="buffer");var g=b.objectMode?1:c.length;b.length+=g;var h=b.length<b.highWaterMark;if(h||(b.needDrain=!0),b.writing||b.corked){var i=b.lastBufferedRequest;b.lastBufferedRequest=new e(c,d,f),i?i.next=b.lastBufferedRequest:b.bufferedRequest=b.lastBufferedRequest}else l(a,b,!1,g,c,d,f);return h}function l(a,b,c,d,e,f,g){b.writelen=d,b.writecb=g,b.writing=!0,b.sync=!0,c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite),b.sync=!1}function m(a,b,c,d,e){--b.pendingcb,c?w(e,d):e(d),a._writableState.errorEmitted=!0,a.emit("error",d)}function n(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function o(a,b){var c=a._writableState,d=c.sync,e=c.writecb;if(n(c),b)m(a,c,d,b,e);else{var f=s(c);f||c.corked||c.bufferProcessing||!c.bufferedRequest||r(a,c),d?w(p,a,c,f,e):p(a,c,f,e)}}function p(a,b,c,d){c||q(a,b),b.pendingcb--,d(),u(a,b)}function q(a,b){0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function r(a,b){b.bufferProcessing=!0;var c=b.bufferedRequest;if(a._writev&&c&&c.next){for(var d=[],e=[];c;)e.push(c.callback),d.push(c),c=c.next;b.pendingcb++,b.lastBufferedRequest=null,l(a,b,!0,b.length,d,"",function(a){for(var c=0;c<e.length;c++)b.pendingcb--,e[c](a)})}else{for(;c;){var f=c.chunk,g=c.encoding,h=c.callback,i=b.objectMode?1:f.length;if(l(a,b,!1,i,f,g,h),c=c.next,b.writing)break}null===c&&(b.lastBufferedRequest=null)}b.bufferedRequest=c,b.bufferProcessing=!1}function s(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function t(a,b){b.prefinished||(b.prefinished=!0,a.emit("prefinish"))}function u(a,b){var c=s(b);return c&&(0===b.pendingcb?(t(a,b),b.finished=!0,a.emit("finish")):t(a,b)),c}function v(a,b,c){b.ending=!0,u(a,b),c&&(b.finished?w(c):a.once("finish",c)),b.ended=!0}b.exports=g;var w=a("process-nextick-args"),x=a("buffer").Buffer;g.WritableState=f;var y=a("core-util-is");y.inherits=a("inherits");var z;!function(){try{z=a("stream")}catch(b){}finally{z||(z=a("events").EventEmitter)}}();var x=a("buffer").Buffer;y.inherits(g,z),f.prototype.getBuffer=function(){for(var a=this.bufferedRequest,b=[];a;)b.push(a),a=a.next;return b},function(){try{Object.defineProperty(f.prototype,"buffer",{get:a("util-deprecate")(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer() instead.")})}catch(b){}}(),g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},g.prototype.write=function(a,b,c){var e=this._writableState,f=!1;return"function"==typeof b&&(c=b,b=null),x.isBuffer(a)?b="buffer":b||(b=e.defaultEncoding),"function"!=typeof c&&(c=d),e.ended?h(this,c):i(this,e,a,c)&&(e.pendingcb++,f=k(this,e,a,b,c)),f},g.prototype.cork=function(){var a=this._writableState;a.corked++},g.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.bufferedRequest||r(this,a))},g.prototype.setDefaultEncoding=function(a){if("string"==typeof a&&(a=a.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((a+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+a);this._writableState.defaultEncoding=a},g.prototype._write=function(a,b,c){c(new Error("not implemented"))},g.prototype._writev=null,g.prototype.end=function(a,b,c){var d=this._writableState;"function"==typeof a?(c=a,a=null,b=null):"function"==typeof b&&(c=b,b=null),null!==a&&void 0!==a&&this.write(a,b),d.corked&&(d.corked=1,this.uncork()),d.ending||d.finished||v(this,d,c)}},{"./_stream_duplex":58,buffer:38,"core-util-is":63,events:42,inherits:53,"process-nextick-args":65,"util-deprecate":67}],63:[function(a,b,c){(function(a){function b(a){return Array.isArray(a)}function d(a){return"boolean"==typeof a}function e(a){return null===a}function f(a){return null==a}function g(a){return"number"==typeof a}function h(a){return"string"==typeof a}function i(a){return"symbol"==typeof a}function j(a){return void 0===a}function k(a){return l(a)&&"[object RegExp]"===r(a)}function l(a){return"object"==typeof a&&null!==a}function m(a){return l(a)&&"[object Date]"===r(a)}function n(a){return l(a)&&("[object Error]"===r(a)||a instanceof Error)}function o(a){return"function"==typeof a}function p(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function q(b){return a.isBuffer(b)}function r(a){return Object.prototype.toString.call(a)}c.isArray=b,c.isBoolean=d,c.isNull=e,c.isNullOrUndefined=f,c.isNumber=g,c.isString=h,c.isSymbol=i,c.isUndefined=j,c.isRegExp=k,c.isObject=l,c.isDate=m,c.isError=n,c.isFunction=o,c.isPrimitive=p,c.isBuffer=q}).call(this,a("buffer").Buffer)},{buffer:38}],64:[function(a,b,c){b.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],65:[function(a,b,c){(function(a){"use strict";function c(b){for(var c=new Array(arguments.length-1),d=0;d<arguments.length;)c[d++]=arguments[d];a.nextTick(function(){b.apply(null,c)})}b.exports=c}).call(this,a("_process"))},{_process:44}],66:[function(a,b,c){arguments[4][49][0].apply(c,arguments)},{buffer:38,dup:49}],67:[function(a,b,c){(function(a){function c(a,b){function c(){if(!e){if(d("throwDeprecation"))throw new Error(b);d("traceDeprecation")?console.trace(b):console.warn(b),e=!0}return a.apply(this,arguments)}if(d("noDeprecation"))return a;var e=!1;return c}function d(b){if(!a.localStorage)return!1;var c=a.localStorage[b];return null==c?!1:"true"===String(c).toLowerCase()}b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],68:[function(a,b,c){b.exports=a("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":59}],69:[function(a,b,c){var d=function(){try{return a("stream")}catch(b){}}();c=b.exports=a("./lib/_stream_readable.js"),c.Stream=d||c,c.Readable=c,c.Writable=a("./lib/_stream_writable.js"),c.Duplex=a("./lib/_stream_duplex.js"),c.Transform=a("./lib/_stream_transform.js"),c.PassThrough=a("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":58,"./lib/_stream_passthrough.js":59,"./lib/_stream_readable.js":60,"./lib/_stream_transform.js":61,"./lib/_stream_writable.js":62}],70:[function(a,b,c){b.exports=a("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":61}],71:[function(a,b,c){b.exports=a("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":62}],72:[function(a,b,c){(function(c){function d(a){return this instanceof d?(i.call(this,a),j.call(this,a),a&&a.readable===!1&&(this.readable=!1),a&&a.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",e)):new d(a)}function e(){this.allowHalfOpen||this._writableState.ended||c.nextTick(this.end.bind(this))}function f(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)}b.exports=d;var g=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b},h=a("core-util-is");h.inherits=a("inherits");var i=a("./_stream_readable"),j=a("./_stream_writable");h.inherits(d,i),f(g(j.prototype),function(a){d.prototype[a]||(d.prototype[a]=j.prototype[a])})}).call(this,a("_process"))},{"./_stream_readable":73,"./_stream_writable":75,_process:44,"core-util-is":76,inherits:53}],73:[function(a,b,c){(function(c){function d(b,c){var d=a("./_stream_duplex");b=b||{};var e=b.highWaterMark,f=b.objectMode?16:16384;this.highWaterMark=e||0===e?e:f,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!b.objectMode,c instanceof d&&(this.objectMode=this.objectMode||!!b.readableObjectMode),this.defaultEncoding=b.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(C||(C=a("string_decoder/").StringDecoder),this.decoder=new C(b.encoding),this.encoding=b.encoding)}function e(b){a("./_stream_duplex");return this instanceof e?(this._readableState=new d(b,this),this.readable=!0,void A.call(this)):new e(b)}function f(a,b,c,d,e){var f=j(b,c);if(f)a.emit("error",f);else if(B.isNullOrUndefined(c))b.reading=!1,b.ended||k(a,b);else if(b.objectMode||c&&c.length>0)if(b.ended&&!e){var h=new Error("stream.push() after EOF");a.emit("error",h)}else if(b.endEmitted&&e){var h=new Error("stream.unshift() after end event");a.emit("error",h)}else!b.decoder||e||d||(c=b.decoder.write(c)),e||(b.reading=!1),b.flowing&&0===b.length&&!b.sync?(a.emit("data",c),a.read(0)):(b.length+=b.objectMode?1:c.length,e?b.buffer.unshift(c):b.buffer.push(c),b.needReadable&&l(a)),n(a,b);else e||(b.reading=!1);return g(b)}function g(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function h(a){if(a>=E)a=E;else{a--;for(var b=1;32>b;b<<=1)a|=a>>b;a++}return a}function i(a,b){return 0===b.length&&b.ended?0:b.objectMode?0===a?0:1:isNaN(a)||B.isNull(a)?b.flowing&&b.buffer.length?b.buffer[0].length:b.length:0>=a?0:(a>b.highWaterMark&&(b.highWaterMark=h(a)),a>b.length?b.ended?b.length:(b.needReadable=!0,0):a)}function j(a,b){var c=null;return B.isBuffer(b)||B.isString(b)||B.isNullOrUndefined(b)||a.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c}function k(a,b){if(b.decoder&&!b.ended){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0,l(a)}function l(a){var b=a._readableState;b.needReadable=!1,b.emittedReadable||(D("emitReadable",b.flowing),b.emittedReadable=!0,b.sync?c.nextTick(function(){m(a)}):m(a))}function m(a){D("emit readable"),a.emit("readable"),s(a)}function n(a,b){b.readingMore||(b.readingMore=!0,c.nextTick(function(){o(a,b)}))}function o(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(D("maybeReadMore read 0"),a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function p(a){return function(){var b=a._readableState;D("pipeOnDrain",b.awaitDrain),b.awaitDrain&&b.awaitDrain--,0===b.awaitDrain&&z.listenerCount(a,"data")&&(b.flowing=!0,s(a))}}function q(a,b){b.resumeScheduled||(b.resumeScheduled=!0,c.nextTick(function(){r(a,b)}))}function r(a,b){b.resumeScheduled=!1,a.emit("resume"),s(a),b.flowing&&!b.reading&&a.read(0)}function s(a){var b=a._readableState;if(D("flow",b.flowing),b.flowing)do var c=a.read();while(null!==c&&b.flowing)}function t(a,b){var c,d=b.buffer,e=b.length,f=!!b.decoder,g=!!b.objectMode;if(0===d.length)return null;if(0===e)c=null;else if(g)c=d.shift();else if(!a||a>=e)c=f?d.join(""):y.concat(d,e),d.length=0;else if(a<d[0].length){var h=d[0];c=h.slice(0,a),d[0]=h.slice(a)}else if(a===d[0].length)c=d.shift();else{c=f?"":new y(a);for(var i=0,j=0,k=d.length;k>j&&a>i;j++){var h=d[0],l=Math.min(a-i,h.length);f?c+=h.slice(0,l):h.copy(c,i,0,l),l<h.length?d[0]=h.slice(l):d.shift(),i+=l}}return c}function u(a){var b=a._readableState;if(b.length>0)throw new Error("endReadable called on non-empty stream");b.endEmitted||(b.ended=!0,c.nextTick(function(){b.endEmitted||0!==b.length||(b.endEmitted=!0,a.readable=!1,a.emit("end"))}))}function v(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)}function w(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}b.exports=e;var x=a("isarray"),y=a("buffer").Buffer;e.ReadableState=d;var z=a("events").EventEmitter;z.listenerCount||(z.listenerCount=function(a,b){return a.listeners(b).length});var A=a("stream"),B=a("core-util-is");B.inherits=a("inherits");var C,D=a("util");D=D&&D.debuglog?D.debuglog("stream"):function(){},B.inherits(e,A),e.prototype.push=function(a,b){var c=this._readableState;return B.isString(a)&&!c.objectMode&&(b=b||c.defaultEncoding,b!==c.encoding&&(a=new y(a,b),b="")),f(this,c,a,b,!1)},e.prototype.unshift=function(a){var b=this._readableState;return f(this,b,a,"",!0)},e.prototype.setEncoding=function(b){return C||(C=a("string_decoder/").StringDecoder),this._readableState.decoder=new C(b),this._readableState.encoding=b,this};var E=8388608;e.prototype.read=function(a){D("read",a);var b=this._readableState,c=a;if((!B.isNumber(a)||a>0)&&(b.emittedReadable=!1),0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return D("read: emitReadable",b.length,b.ended),0===b.length&&b.ended?u(this):l(this),null;if(a=i(a,b),0===a&&b.ended)return 0===b.length&&u(this),null;var d=b.needReadable;D("need readable",d),(0===b.length||b.length-a<b.highWaterMark)&&(d=!0,D("length less than watermark",d)),(b.ended||b.reading)&&(d=!1,D("reading or ended",d)),d&&(D("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1),d&&!b.reading&&(a=i(c,b));var e;return e=a>0?t(a,b):null,B.isNull(e)&&(b.needReadable=!0,a=0),b.length-=a,0!==b.length||b.ended||(b.needReadable=!0),c!==a&&b.ended&&0===b.length&&u(this),B.isNull(e)||this.emit("data",e),e},e.prototype._read=function(a){this.emit("error",new Error("not implemented"))},e.prototype.pipe=function(a,b){function d(a){D("onunpipe"),a===l&&f()}function e(){D("onend"),a.end()}function f(){D("cleanup"),a.removeListener("close",i),a.removeListener("finish",j),a.removeListener("drain",q),a.removeListener("error",h),a.removeListener("unpipe",d),l.removeListener("end",e),l.removeListener("end",f),l.removeListener("data",g),!m.awaitDrain||a._writableState&&!a._writableState.needDrain||q()}function g(b){D("ondata");var c=a.write(b);!1===c&&(D("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,l.pause())}function h(b){D("onerror",b),k(),a.removeListener("error",h),0===z.listenerCount(a,"error")&&a.emit("error",b)}function i(){a.removeListener("finish",j),k()}function j(){D("onfinish"),a.removeListener("close",i),k()}function k(){D("unpipe"),l.unpipe(a)}var l=this,m=this._readableState;switch(m.pipesCount){case 0:m.pipes=a;break;case 1:m.pipes=[m.pipes,a];break;default:m.pipes.push(a)}m.pipesCount+=1,D("pipe count=%d opts=%j",m.pipesCount,b);var n=(!b||b.end!==!1)&&a!==c.stdout&&a!==c.stderr,o=n?e:f;m.endEmitted?c.nextTick(o):l.once("end",o),a.on("unpipe",d);var q=p(l);return a.on("drain",q),l.on("data",g),a._events&&a._events.error?x(a._events.error)?a._events.error.unshift(h):a._events.error=[h,a._events.error]:a.on("error",h),a.once("close",i),a.once("finish",j),a.emit("pipe",l),m.flowing||(D("pipe resume"),l.resume()),a},e.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount)return a&&a!==b.pipes?this:(a||(a=b.pipes),b.pipes=null,b.pipesCount=0,b.flowing=!1,a&&a.emit("unpipe",this),this);if(!a){var c=b.pipes,d=b.pipesCount;b.pipes=null,b.pipesCount=0,b.flowing=!1;for(var e=0;d>e;e++)c[e].emit("unpipe",this);return this}var e=w(b.pipes,a);return-1===e?this:(b.pipes.splice(e,1),b.pipesCount-=1,1===b.pipesCount&&(b.pipes=b.pipes[0]),a.emit("unpipe",this),this)},e.prototype.on=function(a,b){var d=A.prototype.on.call(this,a,b);if("data"===a&&!1!==this._readableState.flowing&&this.resume(),"readable"===a&&this.readable){var e=this._readableState;if(!e.readableListening)if(e.readableListening=!0,e.emittedReadable=!1,e.needReadable=!0,e.reading)e.length&&l(this,e);else{var f=this;c.nextTick(function(){D("readable nexttick read 0"),f.read(0)})}}return d},e.prototype.addListener=e.prototype.on,e.prototype.resume=function(){var a=this._readableState;return a.flowing||(D("resume"),a.flowing=!0,a.reading||(D("resume read 0"),this.read(0)),q(this,a)),this},e.prototype.pause=function(){return D("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(D("pause"),this._readableState.flowing=!1,this.emit("pause")),this},e.prototype.wrap=function(a){var b=this._readableState,c=!1,d=this;a.on("end",function(){if(D("wrapped end"),b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)}),a.on("data",function(e){if(D("wrapped data"),b.decoder&&(e=b.decoder.write(e)),e&&(b.objectMode||e.length)){var f=d.push(e);f||(c=!0,a.pause())}});for(var e in a)B.isFunction(a[e])&&B.isUndefined(this[e])&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));var f=["error","close","destroy","pause","resume"];return v(f,function(b){a.on(b,d.emit.bind(d,b))}),d._read=function(b){D("wrapped _read",b),c&&(c=!1,a.resume())},d},e._fromList=t}).call(this,a("_process"))},{"./_stream_duplex":72,_process:44,buffer:38,"core-util-is":76,events:42,inherits:53,isarray:77,stream:48,"string_decoder/":78,util:37}],74:[function(a,b,c){function d(a,b){this.afterTransform=function(a,c){return e(b,a,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function e(a,b,c){var d=a._transformState;d.transforming=!1;var e=d.writecb;if(!e)return a.emit("error",new Error("no writecb in Transform class"));d.writechunk=null,d.writecb=null,i.isNullOrUndefined(c)||a.push(c),e&&e(b);var f=a._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&a._read(f.highWaterMark)}function f(a){if(!(this instanceof f))return new f(a);h.call(this,a),this._transformState=new d(a,this);var b=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){i.isFunction(this._flush)?this._flush(function(a){g(b,a)}):g(b)})}function g(a,b){if(b)return a.emit("error",b);var c=a._writableState,d=a._transformState;if(c.length)throw new Error("calling transform done when ws.length != 0");if(d.transforming)throw new Error("calling transform done when still transforming");return a.push(null)}b.exports=f;var h=a("./_stream_duplex"),i=a("core-util-is");i.inherits=a("inherits"),i.inherits(f,h),f.prototype.push=function(a,b){return this._transformState.needTransform=!1,h.prototype.push.call(this,a,b)},f.prototype._transform=function(a,b,c){throw new Error("not implemented")},f.prototype._write=function(a,b,c){var d=this._transformState;if(d.writecb=c,d.writechunk=a,d.writeencoding=b,!d.transforming){var e=this._readableState;(d.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},f.prototype._read=function(a){var b=this._transformState;i.isNull(b.writechunk)||!b.writecb||b.transforming?b.needTransform=!0:(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform))}},{"./_stream_duplex":72,"core-util-is":76,inherits:53}],75:[function(a,b,c){(function(c){function d(a,b,c){this.chunk=a,this.encoding=b,this.callback=c}function e(b,c){var d=a("./_stream_duplex");b=b||{};var e=b.highWaterMark,f=b.objectMode?16:16384;this.highWaterMark=e||0===e?e:f,this.objectMode=!!b.objectMode,c instanceof d&&(this.objectMode=this.objectMode||!!b.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var g=b.decodeStrings===!1;this.decodeStrings=!g,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){n(c,a)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function f(b){var c=a("./_stream_duplex");return this instanceof f||this instanceof c?(this._writableState=new e(b,this),this.writable=!0,void x.call(this)):new f(b)}function g(a,b,d){var e=new Error("write after end");a.emit("error",e),c.nextTick(function(){d(e)})}function h(a,b,d,e){var f=!0;if(!(w.isBuffer(d)||w.isString(d)||w.isNullOrUndefined(d)||b.objectMode)){var g=new TypeError("Invalid non-string/buffer chunk");a.emit("error",g),c.nextTick(function(){e(g)}),f=!1}return f}function i(a,b,c){return!a.objectMode&&a.decodeStrings!==!1&&w.isString(b)&&(b=new v(b,c)),b}function j(a,b,c,e,f){c=i(b,c,e),w.isBuffer(c)&&(e="buffer");var g=b.objectMode?1:c.length;b.length+=g;var h=b.length<b.highWaterMark;return h||(b.needDrain=!0),b.writing||b.corked?b.buffer.push(new d(c,e,f)):k(a,b,!1,g,c,e,f),h}function k(a,b,c,d,e,f,g){b.writelen=d,b.writecb=g,b.writing=!0,b.sync=!0,c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite),b.sync=!1}function l(a,b,d,e,f){d?c.nextTick(function(){b.pendingcb--,f(e)}):(b.pendingcb--,f(e)),a._writableState.errorEmitted=!0,a.emit("error",e)}function m(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function n(a,b){var d=a._writableState,e=d.sync,f=d.writecb;if(m(d),b)l(a,d,e,b,f);else{var g=r(a,d);g||d.corked||d.bufferProcessing||!d.buffer.length||q(a,d),e?c.nextTick(function(){o(a,d,g,f)}):o(a,d,g,f)}}function o(a,b,c,d){c||p(a,b),b.pendingcb--,d(),t(a,b)}function p(a,b){0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function q(a,b){if(b.bufferProcessing=!0,a._writev&&b.buffer.length>1){for(var c=[],d=0;d<b.buffer.length;d++)c.push(b.buffer[d].callback);b.pendingcb++,k(a,b,!0,b.length,b.buffer,"",function(a){for(var d=0;d<c.length;d++)b.pendingcb--,c[d](a)}),b.buffer=[]}else{for(var d=0;d<b.buffer.length;d++){var e=b.buffer[d],f=e.chunk,g=e.encoding,h=e.callback,i=b.objectMode?1:f.length;if(k(a,b,!1,i,f,g,h),b.writing){d++;break}}d<b.buffer.length?b.buffer=b.buffer.slice(d):b.buffer.length=0}b.bufferProcessing=!1}function r(a,b){return b.ending&&0===b.length&&!b.finished&&!b.writing}function s(a,b){b.prefinished||(b.prefinished=!0,a.emit("prefinish"))}function t(a,b){var c=r(a,b);return c&&(0===b.pendingcb?(s(a,b),b.finished=!0,a.emit("finish")):s(a,b)),c}function u(a,b,d){b.ending=!0,t(a,b),d&&(b.finished?c.nextTick(d):a.once("finish",d)),b.ended=!0}b.exports=f;var v=a("buffer").Buffer;f.WritableState=e;var w=a("core-util-is");w.inherits=a("inherits");var x=a("stream");w.inherits(f,x),f.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},f.prototype.write=function(a,b,c){var d=this._writableState,e=!1;return w.isFunction(b)&&(c=b,b=null),w.isBuffer(a)?b="buffer":b||(b=d.defaultEncoding),w.isFunction(c)||(c=function(){}),d.ended?g(this,d,c):h(this,d,a,c)&&(d.pendingcb++,e=j(this,d,a,b,c)),e},f.prototype.cork=function(){var a=this._writableState;a.corked++},f.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.buffer.length||q(this,a))},f.prototype._write=function(a,b,c){c(new Error("not implemented"))},f.prototype._writev=null,f.prototype.end=function(a,b,c){var d=this._writableState;w.isFunction(a)?(c=a,a=null,b=null):w.isFunction(b)&&(c=b,b=null),w.isNullOrUndefined(a)||this.write(a,b),d.corked&&(d.corked=1,this.uncork()),d.ending||d.finished||u(this,d,c)}}).call(this,a("_process"))},{"./_stream_duplex":72,_process:44,buffer:38,"core-util-is":76,inherits:53,stream:48}],76:[function(a,b,c){arguments[4][63][0].apply(c,arguments)},{buffer:38,dup:63}],77:[function(a,b,c){arguments[4][64][0].apply(c,arguments)},{dup:64}],78:[function(a,b,c){arguments[4][49][0].apply(c,arguments)},{buffer:38,dup:49}],79:[function(a,b,c){arguments[4][70][0].apply(c,arguments)},{"./lib/_stream_transform.js":74,dup:70}],80:[function(a,b,c){function d(){for(var a={},b=0;b<arguments.length;b++){var c=arguments[b];for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}return a}b.exports=d},{}],81:[function(a,b,c){(function(c){function d(a){g.call(this,a),this._destroyed=!1}function e(a,b,c){c(null,a)}function f(a){return function(b,c,d){return"function"==typeof b&&(d=c,c=b,b={}),"function"!=typeof c&&(c=e),"function"!=typeof d&&(d=null),a(b,c,d)}}var g=a("readable-stream/transform"),h=a("util").inherits,i=a("xtend");h(d,g),d.prototype.destroy=function(a){if(!this._destroyed){this._destroyed=!0;var b=this;c.nextTick(function(){a&&b.emit("error",a),b.emit("close")})}},b.exports=f(function(a,b,c){var e=new d(a);return e._transform=b,c&&(e._flush=c),e}),b.exports.ctor=f(function(a,b,c){function e(b){return this instanceof e?(this.options=i(a,b),void d.call(this,this.options)):new e(b)}return h(e,d),e.prototype._transform=b,c&&(e.prototype._flush=c),e}),b.exports.obj=f(function(a,b,c){var e=new d(i({objectMode:!0,highWaterMark:16},a));return e._transform=b,c&&(e._flush=c),e})}).call(this,a("_process"))},{_process:44,"readable-stream/transform":79,util:51,xtend:80}],82:[function(a,b,c){(function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&g>f;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=v(d,f,4);var g=!C(c)&&u.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function d(a){return function(b,c,d){c=w(c,d);for(var e=B(b),f=a>0?0:e-1;f>=0&&e>f;f+=a)if(c(b[f],f,b))return f;return-1}}function e(a,b,c){return function(d,e,f){var g=0,h=B(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(m.call(d,g,h),u.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&h>f;f+=a)if(d[f]===e)return f;return-1}}function f(a,b){var c=H.length,d=a.constructor,e=u.isFunction(d)&&d.prototype||j,f="constructor";for(u.has(a,f)&&!u.contains(b,f)&&b.push(f);c--;)f=H[c],f in a&&a[f]!==e[f]&&!u.contains(b,f)&&b.push(f)}var g=this,h=g._,i=Array.prototype,j=Object.prototype,k=Function.prototype,l=i.push,m=i.slice,n=j.toString,o=j.hasOwnProperty,p=Array.isArray,q=Object.keys,r=k.bind,s=Object.create,t=function(){},u=function(a){return a instanceof u?a:this instanceof u?void(this._wrapped=a):new u(a)};"undefined"!=typeof c?("undefined"!=typeof b&&b.exports&&(c=b.exports=u),c._=u):g._=u,u.VERSION="1.8.3";var v=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},w=function(a,b,c){return null==a?u.identity:u.isFunction(a)?v(a,b,c):u.isObject(a)?u.matcher(a):u.property(a)};u.iteratee=function(a,b){return w(a,b,1/0)};var x=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;for(var e=1;d>e;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;h>i;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},y=function(a){if(!u.isObject(a))return{};if(s)return s(a);t.prototype=a;var b=new t;return t.prototype=null,b},z=function(a){return function(b){return null==b?void 0:b[a]}},A=Math.pow(2,53)-1,B=z("length"),C=function(a){var b=B(a);return"number"==typeof b&&b>=0&&A>=b};u.each=u.forEach=function(a,b,c){b=v(b,c);var d,e;if(C(a))for(d=0,e=a.length;e>d;d++)b(a[d],d,a);else{var f=u.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},u.map=u.collect=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=Array(e),g=0;e>g;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},u.reduce=u.foldl=u.inject=a(1),u.reduceRight=u.foldr=a(-1),u.find=u.detect=function(a,b,c){var d;return d=C(a)?u.findIndex(a,b,c):u.findKey(a,b,c),void 0!==d&&-1!==d?a[d]:void 0},u.filter=u.select=function(a,b,c){var d=[];return b=w(b,c),u.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},u.reject=function(a,b,c){return u.filter(a,u.negate(w(b)),c)},u.every=u.all=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},u.some=u.any=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},u.contains=u.includes=u.include=function(a,b,c,d){return C(a)||(a=u.values(a)),("number"!=typeof c||d)&&(c=0),u.indexOf(a,b,c)>=0},u.invoke=function(a,b){var c=m.call(arguments,2),d=u.isFunction(b);return u.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},u.pluck=function(a,b){return u.map(a,u.property(b))},u.where=function(a,b){return u.filter(a,u.matcher(b))},u.findWhere=function(a,b){return u.find(a,u.matcher(b))},u.max=function(a,b,c){var d,e,f=-(1/0),g=-(1/0);if(null==b&&null!=a){a=C(a)?a:u.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=w(b,c),u.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-(1/0)&&f===-(1/0))&&(f=a,g=e)});return f},u.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=C(a)?a:u.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=w(b,c),u.each(a,function(a,c,d){e=b(a,c,d),(g>e||e===1/0&&f===1/0)&&(f=a,g=e)});return f},u.shuffle=function(a){for(var b,c=C(a)?a:u.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=u.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},u.sample=function(a,b,c){return null==b||c?(C(a)||(a=u.values(a)),a[u.random(a.length-1)]):u.shuffle(a).slice(0,Math.max(0,b))},u.sortBy=function(a,b,c){return b=w(b,c),u.pluck(u.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var D=function(a){return function(b,c,d){var e={};return c=w(c,d),u.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};u.groupBy=D(function(a,b,c){u.has(a,c)?a[c].push(b):a[c]=[b]}),u.indexBy=D(function(a,b,c){a[c]=b}),u.countBy=D(function(a,b,c){u.has(a,c)?a[c]++:a[c]=1}),u.toArray=function(a){return a?u.isArray(a)?m.call(a):C(a)?u.map(a,u.identity):u.values(a):[]},u.size=function(a){return null==a?0:C(a)?a.length:u.keys(a).length},u.partition=function(a,b,c){b=w(b,c);var d=[],e=[];return u.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},u.first=u.head=u.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:u.initial(a,a.length-b)},u.initial=function(a,b,c){return m.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},u.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:u.rest(a,Math.max(0,a.length-b))},u.rest=u.tail=u.drop=function(a,b,c){return m.call(a,null==b||c?1:b)},u.compact=function(a){return u.filter(a,u.identity)};var E=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=B(a);h>g;g++){var i=a[g];if(C(i)&&(u.isArray(i)||u.isArguments(i))){b||(i=E(i,b,c));var j=0,k=i.length;for(e.length+=k;k>j;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};u.flatten=function(a,b){return E(a,b,!1)},u.without=function(a){return u.difference(a,m.call(arguments,1))},u.uniq=u.unique=function(a,b,c,d){u.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=w(c,d));for(var e=[],f=[],g=0,h=B(a);h>g;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?u.contains(f,j)||(f.push(j),e.push(i)):u.contains(e,i)||e.push(i)}return e},u.union=function(){return u.uniq(E(arguments,!0,!0))},u.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=B(a);e>d;d++){var f=a[d];if(!u.contains(b,f)){for(var g=1;c>g&&u.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},u.difference=function(a){var b=E(arguments,!0,!0,1);return u.filter(a,function(a){return!u.contains(b,a)})},u.zip=function(){return u.unzip(arguments)},u.unzip=function(a){for(var b=a&&u.max(a,B).length||0,c=Array(b),d=0;b>d;d++)c[d]=u.pluck(a,d);return c},u.object=function(a,b){for(var c={},d=0,e=B(a);e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},u.findIndex=d(1),u.findLastIndex=d(-1),u.sortedIndex=function(a,b,c,d){c=w(c,d,1);for(var e=c(b),f=0,g=B(a);g>f;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},u.indexOf=e(1,u.findIndex,u.sortedIndex),u.lastIndexOf=e(-1,u.findLastIndex),u.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var F=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=y(a.prototype),g=a.apply(f,e);return u.isObject(g)?g:f};u.bind=function(a,b){if(r&&a.bind===r)return r.apply(a,m.call(arguments,1));if(!u.isFunction(a))throw new TypeError("Bind must be called on a function");var c=m.call(arguments,2),d=function(){return F(a,d,b,this,c.concat(m.call(arguments)))};return d},u.partial=function(a){var b=m.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;e>g;g++)f[g]=b[g]===u?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return F(a,c,this,this,f)};return c},u.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");
for(b=1;d>b;b++)c=arguments[b],a[c]=u.bind(a[c],a);return a},u.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return u.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},u.delay=function(a,b){var c=m.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},u.defer=u.partial(u.delay,u,1),u.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:u.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=u.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},u.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=u.now()-g;b>j&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=u.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},u.wrap=function(a,b){return u.partial(b,a)},u.negate=function(a){return function(){return!a.apply(this,arguments)}},u.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},u.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},u.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}},u.once=u.partial(u.before,2);var G=!{toString:null}.propertyIsEnumerable("toString"),H=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];u.keys=function(a){if(!u.isObject(a))return[];if(q)return q(a);var b=[];for(var c in a)u.has(a,c)&&b.push(c);return G&&f(a,b),b},u.allKeys=function(a){if(!u.isObject(a))return[];var b=[];for(var c in a)b.push(c);return G&&f(a,b),b},u.values=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},u.mapObject=function(a,b,c){b=w(b,c);for(var d,e=u.keys(a),f=e.length,g={},h=0;f>h;h++)d=e[h],g[d]=b(a[d],d,a);return g},u.pairs=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},u.invert=function(a){for(var b={},c=u.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},u.functions=u.methods=function(a){var b=[];for(var c in a)u.isFunction(a[c])&&b.push(c);return b.sort()},u.extend=x(u.allKeys),u.extendOwn=u.assign=x(u.keys),u.findKey=function(a,b,c){b=w(b,c);for(var d,e=u.keys(a),f=0,g=e.length;g>f;f++)if(d=e[f],b(a[d],d,a))return d},u.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;u.isFunction(b)?(e=u.allKeys(g),d=v(b,c)):(e=E(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;i>h;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},u.omit=function(a,b,c){if(u.isFunction(b))b=u.negate(b);else{var d=u.map(E(arguments,!1,!1,1),String);b=function(a,b){return!u.contains(d,b)}}return u.pick(a,b,c)},u.defaults=x(u.allKeys,!0),u.create=function(a,b){var c=y(a);return b&&u.extendOwn(c,b),c},u.clone=function(a){return u.isObject(a)?u.isArray(a)?a.slice():u.extend({},a):a},u.tap=function(a,b){return b(a),a},u.isMatch=function(a,b){var c=u.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;d>f;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var I=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof u&&(a=a._wrapped),b instanceof u&&(b=b._wrapped);var e=n.call(a);if(e!==n.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(u.isFunction(g)&&g instanceof g&&u.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!I(a[i],b[i],c,d))return!1}else{var j,k=u.keys(a);if(i=k.length,u.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!u.has(b,j)||!I(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};u.isEqual=function(a,b){return I(a,b)},u.isEmpty=function(a){return null==a?!0:C(a)&&(u.isArray(a)||u.isString(a)||u.isArguments(a))?0===a.length:0===u.keys(a).length},u.isElement=function(a){return!(!a||1!==a.nodeType)},u.isArray=p||function(a){return"[object Array]"===n.call(a)},u.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},u.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){u["is"+a]=function(b){return n.call(b)==="[object "+a+"]"}}),u.isArguments(arguments)||(u.isArguments=function(a){return u.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(u.isFunction=function(a){return"function"==typeof a||!1}),u.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},u.isNaN=function(a){return u.isNumber(a)&&a!==+a},u.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===n.call(a)},u.isNull=function(a){return null===a},u.isUndefined=function(a){return void 0===a},u.has=function(a,b){return null!=a&&o.call(a,b)},u.noConflict=function(){return g._=h,this},u.identity=function(a){return a},u.constant=function(a){return function(){return a}},u.noop=function(){},u.property=z,u.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},u.matcher=u.matches=function(a){return a=u.extendOwn({},a),function(b){return u.isMatch(b,a)}},u.times=function(a,b,c){var d=Array(Math.max(0,a));b=v(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},u.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},u.now=Date.now||function(){return(new Date).getTime()};var J={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},K=u.invert(J),L=function(a){var b=function(b){return a[b]},c="(?:"+u.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};u.escape=L(J),u.unescape=L(K),u.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),u.isFunction(d)?d.call(a):d};var M=0;u.uniqueId=function(a){var b=++M+"";return a?a+b:b},u.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},P=/\\|'|\r|\n|\u2028|\u2029/g,Q=function(a){return"\\"+O[a]};u.template=function(a,b,c){!b&&c&&(b=c),b=u.defaults({},b,u.templateSettings);var d=RegExp([(b.escape||N).source,(b.interpolate||N).source,(b.evaluate||N).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(P,Q),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,u)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},u.chain=function(a){var b=u(a);return b._chain=!0,b};var R=function(a,b){return a._chain?u(b).chain():b};u.mixin=function(a){u.each(u.functions(a),function(b){var c=u[b]=a[b];u.prototype[b]=function(){var a=[this._wrapped];return l.apply(a,arguments),R(this,c.apply(u,a))}})},u.mixin(u),u.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=i[a];u.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],R(this,c)}}),u.each(["concat","join","slice"],function(a){var b=i[a];u.prototype[a]=function(){return R(this,b.apply(this._wrapped,arguments))}}),u.prototype.value=function(){return this._wrapped},u.prototype.valueOf=u.prototype.toJSON=u.prototype.value,u.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return u})}).call(this)},{}],83:[function(a,b,c){(function(){"use strict";var b;b=a("../lib/xml2js"),c.stripBOM=function(a){return"\ufeff"===a[0]?a.substring(1):a}}).call(this)},{"../lib/xml2js":85}],84:[function(a,b,c){(function(){"use strict";var a;a=new RegExp(/(?!xmlns)^.*:/),c.normalize=function(a){return a.toLowerCase()},c.firstCharLowerCase=function(a){return a.charAt(0).toLowerCase()+a.slice(1)},c.stripPrefix=function(b){return b.replace(a,"")},c.parseNumbers=function(a){return isNaN(a)||(a=a%1===0?parseInt(a,10):parseFloat(a)),a},c.parseBooleans=function(a){return/^(?:true|false)$/i.test(a)&&(a="true"===a.toLowerCase()),a}}).call(this)},{}],85:[function(a,b,c){(function(){"use strict";var b,d,e,f,g,h,i,j,k,l,m=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},n={}.hasOwnProperty,o=function(a,b){return function(){return a.apply(b,arguments)}};k=a("sax"),f=a("events"),d=a("xmlbuilder"),b=a("./bom"),i=a("./processors"),g=function(a){return"object"==typeof a&&null!=a&&0===Object.keys(a).length},h=function(a,b){var c,d,e;for(c=0,d=a.length;d>c;c++)e=a[c],b=e(b);return b},j=function(a){return a.indexOf("&")>=0||a.indexOf(">")>=0||a.indexOf("<")>=0},l=function(a){return"<![CDATA["+e(a)+"]]>"},e=function(a){return a.replace("]]>","]]]]><![CDATA[>")},c.processors=i,c.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,async:!1,strict:!0,attrNameProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,async:!1,strict:!0,attrNameProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}},c.ValidationError=function(a){function b(a){this.message=a}return m(b,a),b}(Error),c.Builder=function(){function a(a){var b,d,e;this.options={},d=c.defaults[.2];for(b in d)n.call(d,b)&&(e=d[b],this.options[b]=e);for(b in a)n.call(a,b)&&(e=a[b],this.options[b]=e)}return a.prototype.buildObject=function(a){var b,e,f,g,h;return b=this.options.attrkey,e=this.options.charkey,1===Object.keys(a).length&&this.options.rootName===c.defaults[.2].rootName?(h=Object.keys(a)[0],a=a[h]):h=this.options.rootName,f=function(a){return function(c,d){var g,h,i,k,m,o;if("object"!=typeof d)a.options.cdata&&j(d)?c.raw(l(d)):c.txt(d);else for(m in d)if(n.call(d,m))if(h=d[m],m===b){if("object"==typeof h)for(g in h)o=h[g],c=c.att(g,o)}else if(m===e)c=a.options.cdata&&j(h)?c.raw(l(h)):c.txt(h);else if(Array.isArray(h))for(k in h)n.call(h,k)&&(i=h[k],c="string"==typeof i?a.options.cdata&&j(i)?c.ele(m).raw(l(i)).up():c.ele(m,i).up():f(c.ele(m),i).up());else c="object"==typeof h?f(c.ele(m),h).up():"string"==typeof h&&a.options.cdata&&j(h)?c.ele(m).raw(l(h)).up():c.ele(m,h.toString()).up();return c}}(this),g=d.create(h,this.options.xmldec,this.options.doctype,{headless:this.options.headless}),f(g,a).end(this.options.renderOpts)},a}(),c.Parser=function(a){function d(a){this.parseString=o(this.parseString,this),this.reset=o(this.reset,this),this.assignOrPush=o(this.assignOrPush,this),this.processAsync=o(this.processAsync,this);var b,d,e;if(!(this instanceof c.Parser))return new c.Parser(a);this.options={},d=c.defaults[.2];for(b in d)n.call(d,b)&&(e=d[b],this.options[b]=e);for(b in a)n.call(a,b)&&(e=a[b],this.options[b]=e);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(i.normalize)),this.reset()}return m(d,a),d.prototype.processAsync=function(){var a;return this.remaining.length<=this.options.chunkSize?(a=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(a),this.saxParser.close()):(a=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(a),setImmediate(this.processAsync))},d.prototype.assignOrPush=function(a,b,c){return b in a?(a[b]instanceof Array||(a[b]=[a[b]]),a[b].push(c)):this.options.explicitArray?a[b]=[c]:a[b]=c},d.prototype.reset=function(){var a,b,c,d;return this.removeAllListeners(),this.saxParser=k.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(a){return function(b){return a.saxParser.resume(),a.saxParser.errThrown?void 0:(a.saxParser.errThrown=!0,a.emit("error",b))}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,d=[],a=this.options.attrkey,b=this.options.charkey,this.saxParser.onopentag=function(c){return function(e){var f,g,i,j,k;if(i={},i[b]="",!c.options.ignoreAttrs){k=e.attributes;for(f in k)n.call(k,f)&&(a in i||c.options.mergeAttrs||(i[a]={}),g=e.attributes[f],j=c.options.attrNameProcessors?h(c.options.attrNameProcessors,f):f,c.options.mergeAttrs?c.assignOrPush(i,j,g):i[a][j]=g)}return i["#name"]=c.options.tagNameProcessors?h(c.options.tagNameProcessors,e.name):e.name,c.options.xmlns&&(i[c.options.xmlnskey]={uri:e.uri,local:e.local}),d.push(i)}}(this),this.saxParser.onclosetag=function(a){return function(){var c,e,f,i,j,k,l,m,o,p,q;if(l=d.pop(),k=l["#name"],a.options.explicitChildren&&a.options.preserveChildrenOrder||delete l["#name"],l.cdata===!0&&(c=l.cdata,delete l.cdata),p=d[d.length-1],l[b].match(/^\s*$/)&&!c?(e=l[b],delete l[b]):(a.options.trim&&(l[b]=l[b].trim()),a.options.normalize&&(l[b]=l[b].replace(/\s{2,}/g," ").trim()),l[b]=a.options.valueProcessors?h(a.options.valueProcessors,l[b]):l[b],1===Object.keys(l).length&&b in l&&!a.EXPLICIT_CHARKEY&&(l=l[b])),g(l)&&(l=""!==a.options.emptyTag?a.options.emptyTag:e),null!=a.options.validator){q="/"+function(){var a,b,c;for(c=[],a=0,b=d.length;b>a;a++)j=d[a],c.push(j["#name"]);return c}().concat(k).join("/");try{l=a.options.validator(q,p&&p[k],l)}catch(r){f=r,a.emit("error",f)}}if(a.options.explicitChildren&&!a.options.mergeAttrs&&"object"==typeof l)if(a.options.preserveChildrenOrder){if(p){p[a.options.childkey]=p[a.options.childkey]||[],m={};for(i in l)n.call(l,i)&&(m[i]=l[i]);p[a.options.childkey].push(m),delete l["#name"],1===Object.keys(l).length&&b in l&&!a.EXPLICIT_CHARKEY&&(l=l[b])}}else j={},a.options.attrkey in l&&(j[a.options.attrkey]=l[a.options.attrkey],delete l[a.options.attrkey]),!a.options.charsAsChildren&&a.options.charkey in l&&(j[a.options.charkey]=l[a.options.charkey],delete l[a.options.charkey]),Object.getOwnPropertyNames(l).length>0&&(j[a.options.childkey]=l),l=j;return d.length>0?a.assignOrPush(p,k,l):(a.options.explicitRoot&&(o=l,l={},l[k]=o),a.resultObject=l,a.saxParser.ended=!0,a.emit("end",a.resultObject))}}(this),c=function(a){return function(c){var e,f;return f=d[d.length-1],f?(f[b]+=c,a.options.explicitChildren&&a.options.preserveChildrenOrder&&a.options.charsAsChildren&&""!==c.replace(/\\n/g,"").trim()&&(f[a.options.childkey]=f[a.options.childkey]||[],e={"#name":"__text__"},e[b]=c,f[a.options.childkey].push(e)),f):void 0}}(this),this.saxParser.ontext=c,this.saxParser.oncdata=function(a){return function(a){var b;return b=c(a),b?b.cdata=!0:void 0}}(this)},d.prototype.parseString=function(a,c){var d;if(null!=c&&"function"==typeof c&&(this.on("end",function(a){return this.reset(),c(null,a)}),this.on("error",function(a){return this.reset(),c(a)})),a=a.toString(),""===a.trim())return this.emit("end",null),!0;try{return a=b.stripBOM(a),this.options.async&&(this.remaining=a,setImmediate(this.processAsync),this.saxParser),this.saxParser.write(a).close()}catch(e){if(d=e,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",d),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw d}},d}(f.EventEmitter),c.parseString=function(a,b,d){var e,f,g;return null!=d?("function"==typeof d&&(e=d),"object"==typeof b&&(f=b)):("function"==typeof b&&(e=b),f={}),g=new c.Parser(f),g.parseString(a,e)}}).call(this)},{"./bom":83,"./processors":84,events:42,sax:86,xmlbuilder:103}],86:[function(a,b,c){(function(b){!function(c){function d(a,b){if(!(this instanceof d))return new d(a,b);var e=this;f(e),e.q=e.c="",e.bufferCheckPosition=c.MAX_BUFFER_LENGTH,e.opt=b||{},e.opt.lowercase=e.opt.lowercase||e.opt.lowercasetags,e.looseCase=e.opt.lowercase?"toLowerCase":"toUpperCase",e.tags=[],e.closed=e.closedRoot=e.sawRoot=!1,e.tag=e.error=null,e.strict=!!a,e.noscript=!(!a&&!e.opt.noscript),e.state=S.BEGIN,e.strictEntities=e.opt.strictEntities,e.ENTITIES=e.strictEntities?Object.create(c.XML_ENTITIES):Object.create(c.ENTITIES),e.attribList=[],e.opt.xmlns&&(e.ns=Object.create(P)),e.trackPosition=e.opt.position!==!1,e.trackPosition&&(e.position=e.line=e.column=0),n(e,"onready")}function e(a){for(var b=Math.max(c.MAX_BUFFER_LENGTH,10),d=0,e=0,f=B.length;f>e;e++){var g=a[B[e]].length;if(g>b)switch(B[e]){case"textNode":p(a);break;case"cdata":o(a,"oncdata",a.cdata),a.cdata="";break;case"script":o(a,"onscript",a.script),a.script="";break;default:r(a,"Max buffer length exceeded: "+B[e])}d=Math.max(d,g)}a.bufferCheckPosition=c.MAX_BUFFER_LENGTH-d+a.position}function f(a){for(var b=0,c=B.length;c>b;b++)a[B[b]]=""}function g(a){p(a),""!==a.cdata&&(o(a,"oncdata",a.cdata),a.cdata=""),""!==a.script&&(o(a,"onscript",a.script),a.script="")}function h(a,b){return new i(a,b)}function i(a,b){if(!(this instanceof i))return new i(a,b);C.apply(this),this._parser=new d(a,b),this.writable=!0,this.readable=!0;var c=this;this._parser.onend=function(){c.emit("end")},this._parser.onerror=function(a){c.emit("error",a),c._parser.error=null},this._decoder=null,E.forEach(function(a){Object.defineProperty(c,"on"+a,{get:function(){return c._parser["on"+a]},set:function(b){return b?void c.on(a,b):(c.removeAllListeners(a),c._parser["on"+a]=b)},enumerable:!0,configurable:!1})})}function j(a){return a.split("").reduce(function(a,b){return a[b]=!0,a},{})}function k(a){return"[object RegExp]"===Object.prototype.toString.call(a)}function l(a,b){return k(a)?!!b.match(a):a[b]}function m(a,b){return!l(a,b)}function n(a,b,c){a[b]&&a[b](c)}function o(a,b,c){a.textNode&&p(a),n(a,b,c)}function p(a){a.textNode=q(a.opt,a.textNode),a.textNode&&n(a,"ontext",a.textNode),a.textNode=""}function q(a,b){return a.trim&&(b=b.trim()),a.normalize&&(b=b.replace(/\s+/g," ")),b}function r(a,b){return p(a),a.trackPosition&&(b+="\nLine: "+a.line+"\nColumn: "+a.column+"\nChar: "+a.c),b=new Error(b),a.error=b,n(a,"onerror",b),a}function s(a){return a.sawRoot&&!a.closedRoot&&t(a,"Unclosed root tag"),a.state!==S.BEGIN&&a.state!==S.BEGIN_WHITESPACE&&a.state!==S.TEXT&&r(a,"Unexpected end"),p(a),a.c="",a.closed=!0,n(a,"onend"),d.call(a,a.strict,a.opt),a}function t(a,b){if("object"!=typeof a||!(a instanceof d))throw new Error("bad call to strictFail");a.strict&&r(a,b)}function u(a){a.strict||(a.tagName=a.tagName[a.looseCase]());var b=a.tags[a.tags.length-1]||a,c=a.tag={name:a.tagName,attributes:{}};a.opt.xmlns&&(c.ns=b.ns),a.attribList.length=0}function v(a,b){var c=a.indexOf(":"),d=0>c?["",a]:a.split(":"),e=d[0],f=d[1];return b&&"xmlns"===a&&(e="xmlns",f=""),{prefix:e,local:f}}function w(a){if(a.strict||(a.attribName=a.attribName[a.looseCase]()),-1!==a.attribList.indexOf(a.attribName)||a.tag.attributes.hasOwnProperty(a.attribName))return a.attribName=a.attribValue="";if(a.opt.xmlns){var b=v(a.attribName,!0),c=b.prefix,d=b.local;if("xmlns"===c)if("xml"===d&&a.attribValue!==N)t(a,"xml: prefix must be bound to "+N+"\nActual: "+a.attribValue);else if("xmlns"===d&&a.attribValue!==O)t(a,"xmlns: prefix must be bound to "+O+"\nActual: "+a.attribValue);else{var e=a.tag,f=a.tags[a.tags.length-1]||a;e.ns===f.ns&&(e.ns=Object.create(f.ns)),e.ns[d]=a.attribValue}a.attribList.push([a.attribName,a.attribValue])}else a.tag.attributes[a.attribName]=a.attribValue,o(a,"onattribute",{name:a.attribName,value:a.attribValue});a.attribName=a.attribValue=""}function x(a,b){if(a.opt.xmlns){var c=a.tag,d=v(a.tagName);c.prefix=d.prefix,c.local=d.local,c.uri=c.ns[d.prefix]||"",c.prefix&&!c.uri&&(t(a,"Unbound namespace prefix: "+JSON.stringify(a.tagName)),c.uri=d.prefix);var e=a.tags[a.tags.length-1]||a;c.ns&&e.ns!==c.ns&&Object.keys(c.ns).forEach(function(b){o(a,"onopennamespace",{prefix:b,uri:c.ns[b]})});for(var f=0,g=a.attribList.length;g>f;f++){var h=a.attribList[f],i=h[0],j=h[1],k=v(i,!0),l=k.prefix,m=k.local,n=""==l?"":c.ns[l]||"",p={name:i,value:j,prefix:l,local:m,uri:n};l&&"xmlns"!=l&&!n&&(t(a,"Unbound namespace prefix: "+JSON.stringify(l)),p.uri=l),a.tag.attributes[i]=p,o(a,"onattribute",p)}a.attribList.length=0}a.tag.isSelfClosing=!!b,a.sawRoot=!0,a.tags.push(a.tag),o(a,"onopentag",a.tag),b||(a.noscript||"script"!==a.tagName.toLowerCase()?a.state=S.TEXT:a.state=S.SCRIPT,a.tag=null,a.tagName=""),a.attribName=a.attribValue="",a.attribList.length=0}function y(a){if(!a.tagName)return t(a,"Weird empty close tag."),a.textNode+="</>",void(a.state=S.TEXT);if(a.script){if("script"!==a.tagName)return a.script+="</"+a.tagName+">",a.tagName="",void(a.state=S.SCRIPT);o(a,"onscript",a.script),a.script=""}var b=a.tags.length,c=a.tagName;a.strict||(c=c[a.looseCase]());for(var d=c;b--;){var e=a.tags[b];if(e.name===d)break;t(a,"Unexpected close tag")}if(0>b)return t(a,"Unmatched closing tag: "+a.tagName),a.textNode+="</"+a.tagName+">",void(a.state=S.TEXT);a.tagName=c;for(var f=a.tags.length;f-->b;){var g=a.tag=a.tags.pop();a.tagName=a.tag.name,o(a,"onclosetag",a.tagName);var h={};for(var i in g.ns)h[i]=g.ns[i];var j=a.tags[a.tags.length-1]||a;a.opt.xmlns&&g.ns!==j.ns&&Object.keys(g.ns).forEach(function(b){var c=g.ns[b];o(a,"onclosenamespace",{prefix:b,uri:c})})}0===b&&(a.closedRoot=!0),a.tagName=a.attribValue=a.attribName="",a.attribList.length=0,a.state=S.TEXT}function z(a){var b,c=a.entity,d=c.toLowerCase(),e="";return a.ENTITIES[c]?a.ENTITIES[c]:a.ENTITIES[d]?a.ENTITIES[d]:(c=d,"#"===c.charAt(0)&&("x"===c.charAt(1)?(c=c.slice(2),b=parseInt(c,16),e=b.toString(16)):(c=c.slice(1),b=parseInt(c,10),e=b.toString(10))),c=c.replace(/^0+/,""),e.toLowerCase()!==c?(t(a,"Invalid character entity"),"&"+a.entity+";"):String.fromCodePoint(b))}function A(a){var b=this;if(this.error)throw this.error;if(b.closed)return r(b,"Cannot write after close. Assign an onready handler.");if(null===a)return s(b);for(var c=0,d="";b.c=d=a.charAt(c++);)switch(b.trackPosition&&(b.position++,"\n"===d?(b.line++,b.column=0):b.column++),b.state){case S.BEGIN:if(b.state=S.BEGIN_WHITESPACE,"\ufeff"===d)continue;case S.BEGIN_WHITESPACE:"<"===d?(b.state=S.OPEN_WAKA,b.startTagPosition=b.position):m(F,d)&&(t(b,"Non-whitespace before first tag."),b.textNode=d,b.state=S.TEXT);continue;case S.TEXT:if(b.sawRoot&&!b.closedRoot){for(var f=c-1;d&&"<"!==d&&"&"!==d;)d=a.charAt(c++),d&&b.trackPosition&&(b.position++,"\n"===d?(b.line++,b.column=0):b.column++);b.textNode+=a.substring(f,c-1)}"<"!==d||b.sawRoot&&b.closedRoot&&!b.strict?(!m(F,d)||b.sawRoot&&!b.closedRoot||t(b,"Text data outside of root node."),"&"===d?b.state=S.TEXT_ENTITY:b.textNode+=d):(b.state=S.OPEN_WAKA,b.startTagPosition=b.position);continue;case S.SCRIPT:"<"===d?b.state=S.SCRIPT_ENDING:b.script+=d;continue;case S.SCRIPT_ENDING:"/"===d?b.state=S.CLOSE_TAG:(b.script+="<"+d,b.state=S.SCRIPT);continue;case S.OPEN_WAKA:if("!"===d)b.state=S.SGML_DECL,b.sgmlDecl="";else if(l(F,d));else if(l(Q,d))b.state=S.OPEN_TAG,b.tagName=d;else if("/"===d)b.state=S.CLOSE_TAG,b.tagName="";else if("?"===d)b.state=S.PROC_INST,b.procInstName=b.procInstBody="";else{if(t(b,"Unencoded <"),b.startTagPosition+1<b.position){var g=b.position-b.startTagPosition;d=new Array(g).join(" ")+d}b.textNode+="<"+d,b.state=S.TEXT}continue;case S.SGML_DECL:(b.sgmlDecl+d).toUpperCase()===L?(o(b,"onopencdata"),b.state=S.CDATA,b.sgmlDecl="",b.cdata=""):b.sgmlDecl+d==="--"?(b.state=S.COMMENT,b.comment="",b.sgmlDecl=""):(b.sgmlDecl+d).toUpperCase()===M?(b.state=S.DOCTYPE,(b.doctype||b.sawRoot)&&t(b,"Inappropriately located doctype declaration"),b.doctype="",b.sgmlDecl=""):">"===d?(o(b,"onsgmldeclaration",b.sgmlDecl),b.sgmlDecl="",b.state=S.TEXT):l(I,d)?(b.state=S.SGML_DECL_QUOTED,b.sgmlDecl+=d):b.sgmlDecl+=d;continue;case S.SGML_DECL_QUOTED:d===b.q&&(b.state=S.SGML_DECL,b.q=""),b.sgmlDecl+=d;continue;case S.DOCTYPE:">"===d?(b.state=S.TEXT,o(b,"ondoctype",b.doctype),b.doctype=!0):(b.doctype+=d,"["===d?b.state=S.DOCTYPE_DTD:l(I,d)&&(b.state=S.DOCTYPE_QUOTED,b.q=d));continue;case S.DOCTYPE_QUOTED:b.doctype+=d,d===b.q&&(b.q="",b.state=S.DOCTYPE);continue;case S.DOCTYPE_DTD:b.doctype+=d,"]"===d?b.state=S.DOCTYPE:l(I,d)&&(b.state=S.DOCTYPE_DTD_QUOTED,b.q=d);continue;case S.DOCTYPE_DTD_QUOTED:b.doctype+=d,d===b.q&&(b.state=S.DOCTYPE_DTD,b.q="");continue;case S.COMMENT:"-"===d?b.state=S.COMMENT_ENDING:b.comment+=d;continue;case S.COMMENT_ENDING:"-"===d?(b.state=S.COMMENT_ENDED,b.comment=q(b.opt,b.comment),b.comment&&o(b,"oncomment",b.comment),b.comment=""):(b.comment+="-"+d,b.state=S.COMMENT);continue;case S.COMMENT_ENDED:">"!==d?(t(b,"Malformed comment"),b.comment+="--"+d,b.state=S.COMMENT):b.state=S.TEXT;continue;case S.CDATA:"]"===d?b.state=S.CDATA_ENDING:b.cdata+=d;continue;case S.CDATA_ENDING:"]"===d?b.state=S.CDATA_ENDING_2:(b.cdata+="]"+d,b.state=S.CDATA);continue;case S.CDATA_ENDING_2:">"===d?(b.cdata&&o(b,"oncdata",b.cdata),o(b,"onclosecdata"),b.cdata="",b.state=S.TEXT):"]"===d?b.cdata+="]":(b.cdata+="]]"+d,b.state=S.CDATA);continue;case S.PROC_INST:"?"===d?b.state=S.PROC_INST_ENDING:l(F,d)?b.state=S.PROC_INST_BODY:b.procInstName+=d;continue;case S.PROC_INST_BODY:if(!b.procInstBody&&l(F,d))continue;"?"===d?b.state=S.PROC_INST_ENDING:b.procInstBody+=d;continue;case S.PROC_INST_ENDING:">"===d?(o(b,"onprocessinginstruction",{name:b.procInstName,body:b.procInstBody}),b.procInstName=b.procInstBody="",b.state=S.TEXT):(b.procInstBody+="?"+d,b.state=S.PROC_INST_BODY);continue;case S.OPEN_TAG:l(R,d)?b.tagName+=d:(u(b),">"===d?x(b):"/"===d?b.state=S.OPEN_TAG_SLASH:(m(F,d)&&t(b,"Invalid character in tag name"),b.state=S.ATTRIB));continue;case S.OPEN_TAG_SLASH:">"===d?(x(b,!0),y(b)):(t(b,"Forward-slash in opening tag not followed by >"),b.state=S.ATTRIB);continue;case S.ATTRIB:if(l(F,d))continue;">"===d?x(b):"/"===d?b.state=S.OPEN_TAG_SLASH:l(Q,d)?(b.attribName=d,b.attribValue="",b.state=S.ATTRIB_NAME):t(b,"Invalid attribute name");continue;case S.ATTRIB_NAME:"="===d?b.state=S.ATTRIB_VALUE:">"===d?(t(b,"Attribute without value"),b.attribValue=b.attribName,w(b),x(b)):l(F,d)?b.state=S.ATTRIB_NAME_SAW_WHITE:l(R,d)?b.attribName+=d:t(b,"Invalid attribute name");continue;case S.ATTRIB_NAME_SAW_WHITE:if("="===d)b.state=S.ATTRIB_VALUE;else{if(l(F,d))continue;t(b,"Attribute without value"),b.tag.attributes[b.attribName]="",b.attribValue="",o(b,"onattribute",{name:b.attribName,value:""}),b.attribName="",">"===d?x(b):l(Q,d)?(b.attribName=d,b.state=S.ATTRIB_NAME):(t(b,"Invalid attribute name"),b.state=S.ATTRIB)}continue;case S.ATTRIB_VALUE:if(l(F,d))continue;l(I,d)?(b.q=d,b.state=S.ATTRIB_VALUE_QUOTED):(t(b,"Unquoted attribute value"),b.state=S.ATTRIB_VALUE_UNQUOTED,b.attribValue=d);continue;case S.ATTRIB_VALUE_QUOTED:if(d!==b.q){"&"===d?b.state=S.ATTRIB_VALUE_ENTITY_Q:b.attribValue+=d;continue}w(b),b.q="",b.state=S.ATTRIB_VALUE_CLOSED;continue;case S.ATTRIB_VALUE_CLOSED:l(F,d)?b.state=S.ATTRIB:">"===d?x(b):"/"===d?b.state=S.OPEN_TAG_SLASH:l(Q,d)?(t(b,"No whitespace between attributes"),b.attribName=d,b.attribValue="",b.state=S.ATTRIB_NAME):t(b,"Invalid attribute name");continue;case S.ATTRIB_VALUE_UNQUOTED:if(m(K,d)){"&"===d?b.state=S.ATTRIB_VALUE_ENTITY_U:b.attribValue+=d;continue}w(b),">"===d?x(b):b.state=S.ATTRIB;continue;case S.CLOSE_TAG:if(b.tagName)">"===d?y(b):l(R,d)?b.tagName+=d:b.script?(b.script+="</"+b.tagName,b.tagName="",b.state=S.SCRIPT):(m(F,d)&&t(b,"Invalid tagname in closing tag"),b.state=S.CLOSE_TAG_SAW_WHITE);else{if(l(F,d))continue;m(Q,d)?b.script?(b.script+="</"+d,b.state=S.SCRIPT):t(b,"Invalid tagname in closing tag."):b.tagName=d}continue;case S.CLOSE_TAG_SAW_WHITE:if(l(F,d))continue;">"===d?y(b):t(b,"Invalid characters in closing tag");continue;case S.TEXT_ENTITY:case S.ATTRIB_VALUE_ENTITY_Q:case S.ATTRIB_VALUE_ENTITY_U:switch(b.state){case S.TEXT_ENTITY:var h=S.TEXT,i="textNode";break;case S.ATTRIB_VALUE_ENTITY_Q:var h=S.ATTRIB_VALUE_QUOTED,i="attribValue";break;case S.ATTRIB_VALUE_ENTITY_U:var h=S.ATTRIB_VALUE_UNQUOTED,i="attribValue"}";"===d?(b[i]+=z(b),b.entity="",b.state=h):l(J,d)?b.entity+=d:(t(b,"Invalid character entity"),b[i]+="&"+b.entity+d,b.entity="",b.state=h);continue;default:throw new Error(b,"Unknown state: "+b.state)}return b.position>=b.bufferCheckPosition&&e(b),b}c.parser=function(a,b){return new d(a,b)},c.SAXParser=d,c.SAXStream=i,c.createStream=h,c.MAX_BUFFER_LENGTH=65536;var B=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];c.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(a){function b(){this.__proto__=a}return b.prototype=a,new b}),Object.getPrototypeOf||(Object.getPrototypeOf=function(a){return a.__proto__}),Object.keys||(Object.keys=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}),d.prototype={end:function(){s(this)},write:A,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){g(this)}};try{var C=a("stream").Stream}catch(D){var C=function(){}}var E=c.EVENTS.filter(function(a){return"error"!==a&&"end"!==a});i.prototype=Object.create(C.prototype,{constructor:{value:i}}),i.prototype.write=function(c){if("function"==typeof b&&"function"==typeof b.isBuffer&&b.isBuffer(c)){if(!this._decoder){var d=a("string_decoder").StringDecoder;this._decoder=new d("utf8")}c=this._decoder.write(c)}return this._parser.write(c.toString()),this.emit("data",c),!0},i.prototype.end=function(a){return a&&a.length&&this.write(a),this._parser.end(),!0},i.prototype.on=function(a,b){var c=this;return c._parser["on"+a]||-1===E.indexOf(a)||(c._parser["on"+a]=function(){var b=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);b.splice(0,0,a),c.emit.apply(c,b)}),C.prototype.on.call(c,a,b)};var F="\r\n	 ",G="0124356789",H="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",I="'\"",J=G+H+"#",K=F+">",L="[CDATA[",M="DOCTYPE",N="http://www.w3.org/XML/1998/namespace",O="http://www.w3.org/2000/xmlns/",P={xml:N,xmlns:O};F=j(F),G=j(G),H=j(H);var Q=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,R=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;I=j(I),J=j(J),K=j(K);var S=0;c.STATE={BEGIN:S++,BEGIN_WHITESPACE:S++,TEXT:S++,TEXT_ENTITY:S++,OPEN_WAKA:S++,SGML_DECL:S++,SGML_DECL_QUOTED:S++,DOCTYPE:S++,DOCTYPE_QUOTED:S++,DOCTYPE_DTD:S++,DOCTYPE_DTD_QUOTED:S++,COMMENT_STARTING:S++,COMMENT:S++,COMMENT_ENDING:S++,COMMENT_ENDED:S++,CDATA:S++,CDATA_ENDING:S++,CDATA_ENDING_2:S++,PROC_INST:S++,PROC_INST_BODY:S++,PROC_INST_ENDING:S++,OPEN_TAG:S++,OPEN_TAG_SLASH:S++,
ATTRIB:S++,ATTRIB_NAME:S++,ATTRIB_NAME_SAW_WHITE:S++,ATTRIB_VALUE:S++,ATTRIB_VALUE_QUOTED:S++,ATTRIB_VALUE_CLOSED:S++,ATTRIB_VALUE_UNQUOTED:S++,ATTRIB_VALUE_ENTITY_Q:S++,ATTRIB_VALUE_ENTITY_U:S++,CLOSE_TAG:S++,CLOSE_TAG_SAW_WHITE:S++,SCRIPT:S++,SCRIPT_ENDING:S++},c.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},c.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(c.ENTITIES).forEach(function(a){var b=c.ENTITIES[a],d="number"==typeof b?String.fromCharCode(b):b;c.ENTITIES[a]=d});for(var S in c.STATE)c.STATE[c.STATE[S]]=S;S=c.STATE,String.fromCodePoint||!function(){var a=String.fromCharCode,b=Math.floor,c=function(){var c,d,e=16384,f=[],g=-1,h=arguments.length;if(!h)return"";for(var i="";++g<h;){var j=Number(arguments[g]);if(!isFinite(j)||0>j||j>1114111||b(j)!=j)throw RangeError("Invalid code point: "+j);65535>=j?f.push(j):(j-=65536,c=(j>>10)+55296,d=j%1024+56320,f.push(c,d)),(g+1==h||f.length>e)&&(i+=a.apply(null,f),f.length=0)}return i};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:c,configurable:!0,writable:!0}):String.fromCodePoint=c}()}("undefined"==typeof c?sax={}:c)}).call(this,a("buffer").Buffer)},{buffer:38,stream:48,string_decoder:49}],87:[function(a,b,c){(function(){var c,d;d=a("lodash/object/create"),b.exports=c=function(){function a(a,b,c){if(this.stringify=a.stringify,null==b)throw new Error("Missing attribute name of element "+a.name);if(null==c)throw new Error("Missing attribute value for attribute "+b+" of element "+a.name);this.name=this.stringify.attName(b),this.value=this.stringify.attValue(c)}return a.prototype.clone=function(){return d(a.prototype,this)},a.prototype.toString=function(a,b){return" "+this.name+'="'+this.value+'"'},a}()}).call(this)},{"lodash/object/create":157}],88:[function(a,b,c){(function(){var c,d,e,f,g;g=a("./XMLStringifier"),d=a("./XMLDeclaration"),e=a("./XMLDocType"),f=a("./XMLElement"),b.exports=c=function(){function a(a,b){var c,d;if(null==a)throw new Error("Root element needs a name");null==b&&(b={}),this.options=b,this.stringify=new g(b),d=new f(this,"doc"),c=d.element(a),c.isRoot=!0,c.documentObject=this,this.rootObject=c,b.headless||(c.declaration(b),(null!=b.pubID||null!=b.sysID)&&c.doctype(b))}return a.prototype.root=function(){return this.rootObject},a.prototype.end=function(a){return this.toString(a)},a.prototype.toString=function(a){var b,c,d,e,f,g,h,i;return e=(null!=a?a.pretty:void 0)||!1,b=null!=(g=null!=a?a.indent:void 0)?g:"  ",d=null!=(h=null!=a?a.offset:void 0)?h:0,c=null!=(i=null!=a?a.newline:void 0)?i:"\n",f="",null!=this.xmldec&&(f+=this.xmldec.toString(a)),null!=this.doctype&&(f+=this.doctype.toString(a)),f+=this.rootObject.toString(a),e&&f.slice(-c.length)===c&&(f=f.slice(0,-c.length)),f},a}()}).call(this)},{"./XMLDeclaration":95,"./XMLDocType":96,"./XMLElement":97,"./XMLStringifier":101}],89:[function(a,b,c){(function(){var c,d,e,f=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g={}.hasOwnProperty;e=a("lodash/object/create"),d=a("./XMLNode"),b.exports=c=function(a){function b(a,c){if(b.__super__.constructor.call(this,a),null==c)throw new Error("Missing CDATA text");this.text=this.stringify.cdata(c)}return f(b,a),b.prototype.clone=function(){return e(b.prototype,this)},b.prototype.toString=function(a,b){var c,d,e,f,g,h,i,j,k;return f=(null!=a?a.pretty:void 0)||!1,c=null!=(h=null!=a?a.indent:void 0)?h:"  ",e=null!=(i=null!=a?a.offset:void 0)?i:0,d=null!=(j=null!=a?a.newline:void 0)?j:"\n",b||(b=0),k=new Array(b+e+1).join(c),g="",f&&(g+=k),g+="<![CDATA["+this.text+"]]>",f&&(g+=d),g},b}(d)}).call(this)},{"./XMLNode":98,"lodash/object/create":157}],90:[function(a,b,c){(function(){var c,d,e,f=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g={}.hasOwnProperty;e=a("lodash/object/create"),d=a("./XMLNode"),b.exports=c=function(a){function b(a,c){if(b.__super__.constructor.call(this,a),null==c)throw new Error("Missing comment text");this.text=this.stringify.comment(c)}return f(b,a),b.prototype.clone=function(){return e(b.prototype,this)},b.prototype.toString=function(a,b){var c,d,e,f,g,h,i,j,k;return f=(null!=a?a.pretty:void 0)||!1,c=null!=(h=null!=a?a.indent:void 0)?h:"  ",e=null!=(i=null!=a?a.offset:void 0)?i:0,d=null!=(j=null!=a?a.newline:void 0)?j:"\n",b||(b=0),k=new Array(b+e+1).join(c),g="",f&&(g+=k),g+="<!-- "+this.text+" -->",f&&(g+=d),g},b}(d)}).call(this)},{"./XMLNode":98,"lodash/object/create":157}],91:[function(a,b,c){(function(){var c,d;d=a("lodash/object/create"),b.exports=c=function(){function a(a,b,c,d,e,f){if(this.stringify=a.stringify,null==b)throw new Error("Missing DTD element name");if(null==c)throw new Error("Missing DTD attribute name");if(!d)throw new Error("Missing DTD attribute type");if(!e)throw new Error("Missing DTD attribute default");if(0!==e.indexOf("#")&&(e="#"+e),!e.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT");if(f&&!e.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT");this.elementName=this.stringify.eleName(b),this.attributeName=this.stringify.attName(c),this.attributeType=this.stringify.dtdAttType(d),this.defaultValue=this.stringify.dtdAttDefault(f),this.defaultValueType=e}return a.prototype.clone=function(){return d(a.prototype,this)},a.prototype.toString=function(a,b){var c,d,e,f,g,h,i,j,k;return f=(null!=a?a.pretty:void 0)||!1,c=null!=(h=null!=a?a.indent:void 0)?h:"  ",e=null!=(i=null!=a?a.offset:void 0)?i:0,d=null!=(j=null!=a?a.newline:void 0)?j:"\n",b||(b=0),k=new Array(b+e+1).join(c),g="",f&&(g+=k),g+="<!ATTLIST "+this.elementName+" "+this.attributeName+" "+this.attributeType,"#DEFAULT"!==this.defaultValueType&&(g+=" "+this.defaultValueType),this.defaultValue&&(g+=' "'+this.defaultValue+'"'),g+=">",f&&(g+=d),g},a}()}).call(this)},{"lodash/object/create":157}],92:[function(a,b,c){(function(){var c,d,e;d=a("lodash/object/create"),e=a("lodash/lang/isArray"),b.exports=c=function(){function a(a,b,c){if(this.stringify=a.stringify,null==b)throw new Error("Missing DTD element name");c||(c="(#PCDATA)"),e(c)&&(c="("+c.join(",")+")"),this.name=this.stringify.eleName(b),this.value=this.stringify.dtdElementValue(c)}return a.prototype.clone=function(){return d(a.prototype,this)},a.prototype.toString=function(a,b){var c,d,e,f,g,h,i,j,k;return f=(null!=a?a.pretty:void 0)||!1,c=null!=(h=null!=a?a.indent:void 0)?h:"  ",e=null!=(i=null!=a?a.offset:void 0)?i:0,d=null!=(j=null!=a?a.newline:void 0)?j:"\n",b||(b=0),k=new Array(b+e+1).join(c),g="",f&&(g+=k),g+="<!ELEMENT "+this.name+" "+this.value+">",f&&(g+=d),g},a}()}).call(this)},{"lodash/lang/isArray":149,"lodash/object/create":157}],93:[function(a,b,c){(function(){var c,d,e;d=a("lodash/object/create"),e=a("lodash/lang/isObject"),b.exports=c=function(){function a(a,b,c,d){if(this.stringify=a.stringify,null==c)throw new Error("Missing entity name");if(null==d)throw new Error("Missing entity value");if(this.pe=!!b,this.name=this.stringify.eleName(c),e(d)){if(!d.pubID&&!d.sysID)throw new Error("Public and/or system identifiers are required for an external entity");if(d.pubID&&!d.sysID)throw new Error("System identifier is required for a public external entity");if(null!=d.pubID&&(this.pubID=this.stringify.dtdPubID(d.pubID)),null!=d.sysID&&(this.sysID=this.stringify.dtdSysID(d.sysID)),null!=d.nData&&(this.nData=this.stringify.dtdNData(d.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity")}else this.value=this.stringify.dtdEntityValue(d)}return a.prototype.clone=function(){return d(a.prototype,this)},a.prototype.toString=function(a,b){var c,d,e,f,g,h,i,j,k;return f=(null!=a?a.pretty:void 0)||!1,c=null!=(h=null!=a?a.indent:void 0)?h:"  ",e=null!=(i=null!=a?a.offset:void 0)?i:0,d=null!=(j=null!=a?a.newline:void 0)?j:"\n",b||(b=0),k=new Array(b+e+1).join(c),g="",f&&(g+=k),g+="<!ENTITY",this.pe&&(g+=" %"),g+=" "+this.name,this.value?g+=' "'+this.value+'"':(this.pubID&&this.sysID?g+=' PUBLIC "'+this.pubID+'" "'+this.sysID+'"':this.sysID&&(g+=' SYSTEM "'+this.sysID+'"'),this.nData&&(g+=" NDATA "+this.nData)),g+=">",f&&(g+=d),g},a}()}).call(this)},{"lodash/lang/isObject":153,"lodash/object/create":157}],94:[function(a,b,c){(function(){var c,d;d=a("lodash/object/create"),b.exports=c=function(){function a(a,b,c){if(this.stringify=a.stringify,null==b)throw new Error("Missing notation name");if(!c.pubID&&!c.sysID)throw new Error("Public or system identifiers are required for an external entity");this.name=this.stringify.eleName(b),null!=c.pubID&&(this.pubID=this.stringify.dtdPubID(c.pubID)),null!=c.sysID&&(this.sysID=this.stringify.dtdSysID(c.sysID))}return a.prototype.clone=function(){return d(a.prototype,this)},a.prototype.toString=function(a,b){var c,d,e,f,g,h,i,j,k;return f=(null!=a?a.pretty:void 0)||!1,c=null!=(h=null!=a?a.indent:void 0)?h:"  ",e=null!=(i=null!=a?a.offset:void 0)?i:0,d=null!=(j=null!=a?a.newline:void 0)?j:"\n",b||(b=0),k=new Array(b+e+1).join(c),g="",f&&(g+=k),g+="<!NOTATION "+this.name,this.pubID&&this.sysID?g+=' PUBLIC "'+this.pubID+'" "'+this.sysID+'"':this.pubID?g+=' PUBLIC "'+this.pubID+'"':this.sysID&&(g+=' SYSTEM "'+this.sysID+'"'),g+=">",f&&(g+=d),g},a}()}).call(this)},{"lodash/object/create":157}],95:[function(a,b,c){(function(){var c,d,e,f,g=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},h={}.hasOwnProperty;e=a("lodash/object/create"),f=a("lodash/lang/isObject"),d=a("./XMLNode"),b.exports=c=function(a){function b(a,c,d,e){var g;b.__super__.constructor.call(this,a),f(c)&&(g=c,c=g.version,d=g.encoding,e=g.standalone),c||(c="1.0"),null!=c&&(this.version=this.stringify.xmlVersion(c)),null!=d&&(this.encoding=this.stringify.xmlEncoding(d)),null!=e&&(this.standalone=this.stringify.xmlStandalone(e))}return g(b,a),b.prototype.clone=function(){return e(b.prototype,this)},b.prototype.toString=function(a,b){var c,d,e,f,g,h,i,j,k;return f=(null!=a?a.pretty:void 0)||!1,c=null!=(h=null!=a?a.indent:void 0)?h:"  ",e=null!=(i=null!=a?a.offset:void 0)?i:0,d=null!=(j=null!=a?a.newline:void 0)?j:"\n",b||(b=0),k=new Array(b+e+1).join(c),g="",f&&(g+=k),g+="<?xml",null!=this.version&&(g+=' version="'+this.version+'"'),null!=this.encoding&&(g+=' encoding="'+this.encoding+'"'),null!=this.standalone&&(g+=' standalone="'+this.standalone+'"'),g+="?>",f&&(g+=d),g},b}(d)}).call(this)},{"./XMLNode":98,"lodash/lang/isObject":153,"lodash/object/create":157}],96:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l;k=a("lodash/object/create"),l=a("lodash/lang/isObject"),c=a("./XMLCData"),d=a("./XMLComment"),e=a("./XMLDTDAttList"),g=a("./XMLDTDEntity"),f=a("./XMLDTDElement"),h=a("./XMLDTDNotation"),j=a("./XMLProcessingInstruction"),b.exports=i=function(){function a(a,b,c){var d,e;this.documentObject=a,this.stringify=this.documentObject.stringify,this.children=[],l(b)&&(d=b,b=d.pubID,c=d.sysID),null==c&&(e=[b,c],c=e[0],b=e[1]),null!=b&&(this.pubID=this.stringify.dtdPubID(b)),null!=c&&(this.sysID=this.stringify.dtdSysID(c))}return a.prototype.clone=function(){return k(a.prototype,this)},a.prototype.element=function(a,b){var c;return c=new f(this,a,b),this.children.push(c),this},a.prototype.attList=function(a,b,c,d,f){var g;return g=new e(this,a,b,c,d,f),this.children.push(g),this},a.prototype.entity=function(a,b){var c;return c=new g(this,!1,a,b),this.children.push(c),this},a.prototype.pEntity=function(a,b){var c;return c=new g(this,!0,a,b),this.children.push(c),this},a.prototype.notation=function(a,b){var c;return c=new h(this,a,b),this.children.push(c),this},a.prototype.cdata=function(a){var b;return b=new c(this,a),this.children.push(b),this},a.prototype.comment=function(a){var b;return b=new d(this,a),this.children.push(b),this},a.prototype.instruction=function(a,b){var c;return c=new j(this,a,b),this.children.push(c),this},a.prototype.root=function(){return this.documentObject.root()},a.prototype.document=function(){return this.documentObject},a.prototype.toString=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o;if(i=(null!=a?a.pretty:void 0)||!1,e=null!=(k=null!=a?a.indent:void 0)?k:"  ",h=null!=(l=null!=a?a.offset:void 0)?l:0,g=null!=(m=null!=a?a.newline:void 0)?m:"\n",b||(b=0),o=new Array(b+h+1).join(e),j="",i&&(j+=o),j+="<!DOCTYPE "+this.root().name,this.pubID&&this.sysID?j+=' PUBLIC "'+this.pubID+'" "'+this.sysID+'"':this.sysID&&(j+=' SYSTEM "'+this.sysID+'"'),this.children.length>0){for(j+=" [",i&&(j+=g),n=this.children,d=0,f=n.length;f>d;d++)c=n[d],j+=c.toString(a,b+1);j+="]"}return j+=">",i&&(j+=g),j},a.prototype.ele=function(a,b){return this.element(a,b)},a.prototype.att=function(a,b,c,d,e){return this.attList(a,b,c,d,e)},a.prototype.ent=function(a,b){return this.entity(a,b)},a.prototype.pent=function(a,b){return this.pEntity(a,b)},a.prototype.not=function(a,b){return this.notation(a,b)},a.prototype.dat=function(a){return this.cdata(a)},a.prototype.com=function(a){return this.comment(a)},a.prototype.ins=function(a,b){return this.instruction(a,b)},a.prototype.up=function(){return this.root()},a.prototype.doc=function(){return this.document()},a}()}).call(this)},{"./XMLCData":89,"./XMLComment":90,"./XMLDTDAttList":91,"./XMLDTDElement":92,"./XMLDTDEntity":93,"./XMLDTDNotation":94,"./XMLProcessingInstruction":99,"lodash/lang/isObject":153,"lodash/object/create":157}],97:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l=function(a,b){function c(){this.constructor=a}for(var d in b)m.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},m={}.hasOwnProperty;g=a("lodash/object/create"),k=a("lodash/lang/isObject"),i=a("lodash/lang/isArray"),j=a("lodash/lang/isFunction"),h=a("lodash/collection/every"),e=a("./XMLNode"),c=a("./XMLAttribute"),f=a("./XMLProcessingInstruction"),b.exports=d=function(a){function b(a,c,d){if(b.__super__.constructor.call(this,a),null==c)throw new Error("Missing element name");this.name=this.stringify.eleName(c),this.children=[],this.instructions=[],this.attributes={},null!=d&&this.attribute(d)}return l(b,a),b.prototype.clone=function(){var a,c,d,e,f,h,i,j;d=g(b.prototype,this),d.isRoot&&(d.documentObject=null),d.attributes={},i=this.attributes;for(c in i)m.call(i,c)&&(a=i[c],d.attributes[c]=a.clone());for(d.instructions=[],j=this.instructions,e=0,f=j.length;f>e;e++)h=j[e],d.instructions.push(h.clone());return d.children=[],this.children.forEach(function(a){var b;return b=a.clone(),b.parent=d,d.children.push(b)}),d},b.prototype.attribute=function(a,b){var d,e;if(null!=a&&(a=a.valueOf()),k(a))for(d in a)m.call(a,d)&&(e=a[d],this.attribute(d,e));else j(b)&&(b=b.apply()),this.options.skipNullAttributes&&null==b||(this.attributes[a]=new c(this,a,b));return this},b.prototype.removeAttribute=function(a){var b,c,d;if(null==a)throw new Error("Missing attribute name");if(a=a.valueOf(),i(a))for(c=0,d=a.length;d>c;c++)b=a[c],delete this.attributes[b];else delete this.attributes[a];return this},b.prototype.instruction=function(a,b){var c,d,e,g,h;if(null!=a&&(a=a.valueOf()),null!=b&&(b=b.valueOf()),i(a))for(c=0,h=a.length;h>c;c++)d=a[c],this.instruction(d);else if(k(a))for(d in a)m.call(a,d)&&(e=a[d],this.instruction(d,e));else j(b)&&(b=b.apply()),g=new f(this,a,b),this.instructions.push(g);return this},b.prototype.toString=function(a,b){var c,d,e,f,g,i,j,k,l,n,o,p,q,r,s,t,u,v,w,x;for(p=(null!=a?a.pretty:void 0)||!1,f=null!=(r=null!=a?a.indent:void 0)?r:"  ",o=null!=(s=null!=a?a.offset:void 0)?s:0,n=null!=(t=null!=a?a.newline:void 0)?t:"\n",b||(b=0),x=new Array(b+o+1).join(f),q="",u=this.instructions,e=0,j=u.length;j>e;e++)g=u[e],q+=g.toString(a,b+1);p&&(q+=x),q+="<"+this.name,v=this.attributes;for(l in v)m.call(v,l)&&(c=v[l],q+=c.toString(a));if(0===this.children.length||h(this.children,function(a){return""===a.value}))q+="/>",p&&(q+=n);else if(p&&1===this.children.length&&null!=this.children[0].value)q+=">",q+=this.children[0].value,q+="</"+this.name+">",q+=n;else{for(q+=">",p&&(q+=n),w=this.children,i=0,k=w.length;k>i;i++)d=w[i],q+=d.toString(a,b+1);p&&(q+=x),q+="</"+this.name+">",p&&(q+=n)}return q},b.prototype.att=function(a,b){return this.attribute(a,b)},b.prototype.ins=function(a,b){return this.instruction(a,b)},b.prototype.a=function(a,b){return this.attribute(a,b)},b.prototype.i=function(a,b){return this.instruction(a,b)},b}(e)}).call(this)},{"./XMLAttribute":87,"./XMLNode":98,"./XMLProcessingInstruction":99,"lodash/collection/every":105,"lodash/lang/isArray":149,"lodash/lang/isFunction":151,"lodash/lang/isObject":153,"lodash/object/create":157}],98:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m,n,o={}.hasOwnProperty;n=a("lodash/lang/isObject"),k=a("lodash/lang/isArray"),m=a("lodash/lang/isFunction"),l=a("lodash/lang/isEmpty"),g=null,c=null,d=null,e=null,f=null,i=null,j=null,b.exports=h=function(){function b(b){this.parent=b,this.options=this.parent.options,this.stringify=this.parent.stringify,null===g&&(g=a("./XMLElement"),c=a("./XMLCData"),d=a("./XMLComment"),e=a("./XMLDeclaration"),f=a("./XMLDocType"),i=a("./XMLRaw"),j=a("./XMLText"))}return b.prototype.clone=function(){throw new Error("Cannot clone generic XMLNode")},b.prototype.element=function(a,b,c){var d,e,f,g,h,i,j;if(g=null,null==b&&(b={}),b=b.valueOf(),n(b)||(i=[b,c],c=i[0],b=i[1]),null!=a&&(a=a.valueOf()),k(a))for(e=0,h=a.length;h>e;e++)d=a[e],g=this.element(d);else if(m(a))g=this.element(a.apply());else if(n(a))for(f in a)o.call(a,f)&&(j=a[f],m(j)&&(j=j.apply()),n(j)&&l(j)&&(j=null),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===f.indexOf(this.stringify.convertAttKey)?g=this.attribute(f.substr(this.stringify.convertAttKey.length),j):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===f.indexOf(this.stringify.convertPIKey)?g=this.instruction(f.substr(this.stringify.convertPIKey.length),j):n(j)?!this.options.ignoreDecorators&&this.stringify.convertListKey&&0===f.indexOf(this.stringify.convertListKey)&&k(j)?g=this.element(j):(g=this.element(f),g.element(j)):g=this.element(f,j));else g=!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===a.indexOf(this.stringify.convertTextKey)?this.text(c):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===a.indexOf(this.stringify.convertCDataKey)?this.cdata(c):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===a.indexOf(this.stringify.convertCommentKey)?this.comment(c):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===a.indexOf(this.stringify.convertRawKey)?this.raw(c):this.node(a,b,c);if(null==g)throw new Error("Could not create any elements with: "+a);return g},b.prototype.insertBefore=function(a,b,c){var d,e,f;if(this.isRoot)throw new Error("Cannot insert elements at root level");return e=this.parent.children.indexOf(this),f=this.parent.children.splice(e),d=this.parent.element(a,b,c),Array.prototype.push.apply(this.parent.children,f),d},b.prototype.insertAfter=function(a,b,c){var d,e,f;if(this.isRoot)throw new Error("Cannot insert elements at root level");return e=this.parent.children.indexOf(this),f=this.parent.children.splice(e+1),d=this.parent.element(a,b,c),Array.prototype.push.apply(this.parent.children,f),d},b.prototype.remove=function(){var a,b;if(this.isRoot)throw new Error("Cannot remove the root element");return a=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[a,a-a+1].concat(b=[])),b,this.parent},b.prototype.node=function(a,b,c){var d,e;return null!=a&&(a=a.valueOf()),null==b&&(b={}),b=b.valueOf(),n(b)||(e=[b,c],c=e[0],b=e[1]),d=new g(this,a,b),null!=c&&d.text(c),this.children.push(d),d},b.prototype.text=function(a){var b;return b=new j(this,a),this.children.push(b),this},b.prototype.cdata=function(a){var b;return b=new c(this,a),this.children.push(b),this},b.prototype.comment=function(a){var b;return b=new d(this,a),this.children.push(b),this},b.prototype.raw=function(a){var b;return b=new i(this,a),this.children.push(b),this},b.prototype.declaration=function(a,b,c){var d,f;return d=this.document(),f=new e(d,a,b,c),d.xmldec=f,d.root()},b.prototype.doctype=function(a,b){var c,d;return c=this.document(),d=new f(c,a,b),c.doctype=d,d},b.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},b.prototype.root=function(){var a;if(this.isRoot)return this;for(a=this.parent;!a.isRoot;)a=a.parent;return a},b.prototype.document=function(){return this.root().documentObject},b.prototype.end=function(a){return this.document().toString(a)},b.prototype.prev=function(){var a;if(this.isRoot)throw new Error("Root node has no siblings");if(a=this.parent.children.indexOf(this),1>a)throw new Error("Already at the first node");return this.parent.children[a-1]},b.prototype.next=function(){var a;if(this.isRoot)throw new Error("Root node has no siblings");if(a=this.parent.children.indexOf(this),-1===a||a===this.parent.children.length-1)throw new Error("Already at the last node");return this.parent.children[a+1]},b.prototype.importXMLBuilder=function(a){var b;return b=a.root().clone(),b.parent=this,b.isRoot=!1,this.children.push(b),this},b.prototype.ele=function(a,b,c){return this.element(a,b,c)},b.prototype.nod=function(a,b,c){return this.node(a,b,c)},b.prototype.txt=function(a){return this.text(a)},b.prototype.dat=function(a){return this.cdata(a)},b.prototype.com=function(a){return this.comment(a)},b.prototype.doc=function(){return this.document()},b.prototype.dec=function(a,b,c){return this.declaration(a,b,c)},b.prototype.dtd=function(a,b){return this.doctype(a,b)},b.prototype.e=function(a,b,c){return this.element(a,b,c)},b.prototype.n=function(a,b,c){return this.node(a,b,c)},b.prototype.t=function(a){return this.text(a)},b.prototype.d=function(a){return this.cdata(a)},b.prototype.c=function(a){return this.comment(a)},b.prototype.r=function(a){return this.raw(a)},b.prototype.u=function(){return this.up()},b}()}).call(this)},{"./XMLCData":89,"./XMLComment":90,"./XMLDeclaration":95,"./XMLDocType":96,"./XMLElement":97,"./XMLRaw":100,"./XMLText":102,"lodash/lang/isArray":149,"lodash/lang/isEmpty":150,"lodash/lang/isFunction":151,"lodash/lang/isObject":153}],99:[function(a,b,c){(function(){var c,d;d=a("lodash/object/create"),b.exports=c=function(){function a(a,b,c){if(this.stringify=a.stringify,null==b)throw new Error("Missing instruction target");this.target=this.stringify.insTarget(b),c&&(this.value=this.stringify.insValue(c))}return a.prototype.clone=function(){return d(a.prototype,this)},a.prototype.toString=function(a,b){var c,d,e,f,g,h,i,j,k;return f=(null!=a?a.pretty:void 0)||!1,c=null!=(h=null!=a?a.indent:void 0)?h:"  ",e=null!=(i=null!=a?a.offset:void 0)?i:0,d=null!=(j=null!=a?a.newline:void 0)?j:"\n",b||(b=0),k=new Array(b+e+1).join(c),g="",f&&(g+=k),g+="<?",g+=this.target,this.value&&(g+=" "+this.value),g+="?>",f&&(g+=d),g},a}()}).call(this)},{"lodash/object/create":157}],100:[function(a,b,c){(function(){var c,d,e,f=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g={}.hasOwnProperty;e=a("lodash/object/create"),c=a("./XMLNode"),b.exports=d=function(a){function b(a,c){if(b.__super__.constructor.call(this,a),null==c)throw new Error("Missing raw text");this.value=this.stringify.raw(c)}return f(b,a),b.prototype.clone=function(){return e(b.prototype,this)},b.prototype.toString=function(a,b){var c,d,e,f,g,h,i,j,k;return f=(null!=a?a.pretty:void 0)||!1,c=null!=(h=null!=a?a.indent:void 0)?h:"  ",e=null!=(i=null!=a?a.offset:void 0)?i:0,d=null!=(j=null!=a?a.newline:void 0)?j:"\n",b||(b=0),k=new Array(b+e+1).join(c),g="",f&&(g+=k),g+=this.value,f&&(g+=d),g},b}(c)}).call(this)},{"./XMLNode":98,"lodash/object/create":157}],101:[function(a,b,c){(function(){var a,c=function(a,b){return function(){return a.apply(b,arguments)}},d={}.hasOwnProperty;b.exports=a=function(){function a(a){this.assertLegalChar=c(this.assertLegalChar,this);var b,e,f;this.allowSurrogateChars=null!=a?a.allowSurrogateChars:void 0,e=(null!=a?a.stringify:void 0)||{};for(b in e)d.call(e,b)&&(f=e[b],this[b]=f)}return a.prototype.eleName=function(a){return a=""+a||"",this.assertLegalChar(a)},a.prototype.eleText=function(a){return a=""+a||"",this.assertLegalChar(this.elEscape(a))},a.prototype.cdata=function(a){if(a=""+a||"",a.match(/]]>/))throw new Error("Invalid CDATA text: "+a);return this.assertLegalChar(a)},a.prototype.comment=function(a){if(a=""+a||"",a.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+a);return this.assertLegalChar(a)},a.prototype.raw=function(a){return""+a||""},a.prototype.attName=function(a){return""+a||""},a.prototype.attValue=function(a){return a=""+a||"",this.attEscape(a)},a.prototype.insTarget=function(a){return""+a||""},a.prototype.insValue=function(a){if(a=""+a||"",a.match(/\?>/))throw new Error("Invalid processing instruction value: "+a);return a},a.prototype.xmlVersion=function(a){if(a=""+a||"",!a.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+a);return a},a.prototype.xmlEncoding=function(a){if(a=""+a||"",!a.match(/[A-Za-z](?:[A-Za-z0-9._-]|-)*/))throw new Error("Invalid encoding: "+a);return a},a.prototype.xmlStandalone=function(a){return a?"yes":"no"},a.prototype.dtdPubID=function(a){return""+a||""},a.prototype.dtdSysID=function(a){return""+a||""},a.prototype.dtdElementValue=function(a){return""+a||""},a.prototype.dtdAttType=function(a){return""+a||""},a.prototype.dtdAttDefault=function(a){return null!=a?""+a||"":a},a.prototype.dtdEntityValue=function(a){return""+a||""},a.prototype.dtdNData=function(a){return""+a||""},a.prototype.convertAttKey="@",a.prototype.convertPIKey="?",a.prototype.convertTextKey="#text",a.prototype.convertCDataKey="#cdata",a.prototype.convertCommentKey="#comment",a.prototype.convertRawKey="#raw",a.prototype.convertListKey="#list",a.prototype.assertLegalChar=function(a){var b,c;if(b=this.allowSurrogateChars?/[\u0000-\u0008\u000B-\u000C\u000E-\u001F\uFFFE-\uFFFF]/:/[\u0000-\u0008\u000B-\u000C\u000E-\u001F\uD800-\uDFFF\uFFFE-\uFFFF]/,c=a.match(b))throw new Error("Invalid character ("+c+") in string: "+a+" at index "+c.index);return a},a.prototype.elEscape=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},a.prototype.attEscape=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},a}()}).call(this)},{}],102:[function(a,b,c){(function(){var c,d,e,f=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g={}.hasOwnProperty;e=a("lodash/object/create"),c=a("./XMLNode"),b.exports=d=function(a){function b(a,c){if(b.__super__.constructor.call(this,a),null==c)throw new Error("Missing element text");this.value=this.stringify.eleText(c)}return f(b,a),b.prototype.clone=function(){return e(b.prototype,this)},b.prototype.toString=function(a,b){var c,d,e,f,g,h,i,j,k;return f=(null!=a?a.pretty:void 0)||!1,c=null!=(h=null!=a?a.indent:void 0)?h:"  ",e=null!=(i=null!=a?a.offset:void 0)?i:0,d=null!=(j=null!=a?a.newline:void 0)?j:"\n",b||(b=0),k=new Array(b+e+1).join(c),g="",f&&(g+=k),g+=this.value,f&&(g+=d),g},b}(c)}).call(this)},{"./XMLNode":98,"lodash/object/create":157}],103:[function(a,b,c){(function(){var c,d;d=a("lodash/object/assign"),c=a("./XMLBuilder"),b.exports.create=function(a,b,e,f){return f=d({},b,e,f),new c(a,f).root()}}).call(this)},{"./XMLBuilder":88,"lodash/object/assign":156}],104:[function(a,b,c){function d(a){var b=a?a.length:0;return b?a[b-1]:void 0}b.exports=d},{}],105:[function(a,b,c){function d(a,b,c){var d=h(a)?e:g;return c&&i(a,b,c)&&(b=void 0),("function"!=typeof b||void 0!==c)&&(b=f(b,c,3)),d(a,b)}var e=a("../internal/arrayEvery"),f=a("../internal/baseCallback"),g=a("../internal/baseEvery"),h=a("../lang/isArray"),i=a("../internal/isIterateeCall");b.exports=d},{"../internal/arrayEvery":107,"../internal/baseCallback":111,"../internal/baseEvery":115,"../internal/isIterateeCall":140,"../lang/isArray":149}],106:[function(a,b,c){function d(a,b){if("function"!=typeof a)throw new TypeError(e);return b=f(void 0===b?a.length-1:+b||0,0),function(){for(var c=arguments,d=-1,e=f(c.length-b,0),g=Array(e);++d<e;)g[d]=c[b+d];switch(b){case 0:return a.call(this,g);case 1:return a.call(this,c[0],g);case 2:return a.call(this,c[0],c[1],g)}var h=Array(b+1);for(d=-1;++d<b;)h[d]=c[d];return h[b]=g,a.apply(this,h)}}var e="Expected a function",f=Math.max;b.exports=d},{}],107:[function(a,b,c){function d(a,b){for(var c=-1,d=a.length;++c<d;)if(!b(a[c],c,a))return!1;return!0}b.exports=d},{}],108:[function(a,b,c){function d(a,b){for(var c=-1,d=a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}b.exports=d},{}],109:[function(a,b,c){function d(a,b,c){for(var d=-1,f=e(b),g=f.length;++d<g;){var h=f[d],i=a[h],j=c(i,b[h],h,a,b);(j===j?j===i:i!==i)&&(void 0!==i||h in a)||(a[h]=j)}return a}var e=a("../object/keys");b.exports=d},{"../object/keys":158}],110:[function(a,b,c){function d(a,b){return null==b?a:e(b,f(b),a)}var e=a("./baseCopy"),f=a("../object/keys");b.exports=d},{"../object/keys":158,
"./baseCopy":112}],111:[function(a,b,c){function d(a,b,c){var d=typeof a;return"function"==d?void 0===b?a:g(a,b,c):null==a?h:"object"==d?e(a):void 0===b?i(a):f(a,b)}var e=a("./baseMatches"),f=a("./baseMatchesProperty"),g=a("./bindCallback"),h=a("../utility/identity"),i=a("../utility/property");b.exports=d},{"../utility/identity":161,"../utility/property":162,"./baseMatches":122,"./baseMatchesProperty":123,"./bindCallback":128}],112:[function(a,b,c){function d(a,b,c){c||(c={});for(var d=-1,e=b.length;++d<e;){var f=b[d];c[f]=a[f]}return c}b.exports=d},{}],113:[function(a,b,c){var d=a("../lang/isObject"),e=function(){function a(){}return function(b){if(d(b)){a.prototype=b;var c=new a;a.prototype=void 0}return c||{}}}();b.exports=e},{"../lang/isObject":153}],114:[function(a,b,c){var d=a("./baseForOwn"),e=a("./createBaseEach"),f=e(d);b.exports=f},{"./baseForOwn":117,"./createBaseEach":130}],115:[function(a,b,c){function d(a,b){var c=!0;return e(a,function(a,d,e){return c=!!b(a,d,e)}),c}var e=a("./baseEach");b.exports=d},{"./baseEach":114}],116:[function(a,b,c){var d=a("./createBaseFor"),e=d();b.exports=e},{"./createBaseFor":131}],117:[function(a,b,c){function d(a,b){return e(a,b,f)}var e=a("./baseFor"),f=a("../object/keys");b.exports=d},{"../object/keys":158,"./baseFor":116}],118:[function(a,b,c){function d(a,b,c){if(null!=a){void 0!==c&&c in e(a)&&(b=[c]);for(var d=0,f=b.length;null!=a&&f>d;)a=a[b[d++]];return d&&d==f?a:void 0}}var e=a("./toObject");b.exports=d},{"./toObject":146}],119:[function(a,b,c){function d(a,b,c,h,i,j){return a===b?!0:null==a||null==b||!f(a)&&!g(b)?a!==a&&b!==b:e(a,b,d,c,h,i,j)}var e=a("./baseIsEqualDeep"),f=a("../lang/isObject"),g=a("./isObjectLike");b.exports=d},{"../lang/isObject":153,"./baseIsEqualDeep":120,"./isObjectLike":143}],120:[function(a,b,c){function d(a,b,c,d,m,p,q){var r=h(a),s=h(b),t=k,u=k;r||(t=o.call(a),t==j?t=l:t!=l&&(r=i(a))),s||(u=o.call(b),u==j?u=l:u!=l&&(s=i(b)));var v=t==l,w=u==l,x=t==u;if(x&&!r&&!v)return f(a,b,t);if(!m){var y=v&&n.call(a,"__wrapped__"),z=w&&n.call(b,"__wrapped__");if(y||z)return c(y?a.value():a,z?b.value():b,d,m,p,q)}if(!x)return!1;p||(p=[]),q||(q=[]);for(var A=p.length;A--;)if(p[A]==a)return q[A]==b;p.push(a),q.push(b);var B=(r?e:g)(a,b,c,d,m,p,q);return p.pop(),q.pop(),B}var e=a("./equalArrays"),f=a("./equalByTag"),g=a("./equalObjects"),h=a("../lang/isArray"),i=a("../lang/isTypedArray"),j="[object Arguments]",k="[object Array]",l="[object Object]",m=Object.prototype,n=m.hasOwnProperty,o=m.toString;b.exports=d},{"../lang/isArray":149,"../lang/isTypedArray":155,"./equalArrays":132,"./equalByTag":133,"./equalObjects":134}],121:[function(a,b,c){function d(a,b,c){var d=b.length,g=d,h=!c;if(null==a)return!g;for(a=f(a);d--;){var i=b[d];if(h&&i[2]?i[1]!==a[i[0]]:!(i[0]in a))return!1}for(;++d<g;){i=b[d];var j=i[0],k=a[j],l=i[1];if(h&&i[2]){if(void 0===k&&!(j in a))return!1}else{var m=c?c(k,l,j):void 0;if(!(void 0===m?e(l,k,c,!0):m))return!1}}return!0}var e=a("./baseIsEqual"),f=a("./toObject");b.exports=d},{"./baseIsEqual":119,"./toObject":146}],122:[function(a,b,c){function d(a){var b=f(a);if(1==b.length&&b[0][2]){var c=b[0][0],d=b[0][1];return function(a){return null==a?!1:a[c]===d&&(void 0!==d||c in g(a))}}return function(a){return e(a,b)}}var e=a("./baseIsMatch"),f=a("./getMatchData"),g=a("./toObject");b.exports=d},{"./baseIsMatch":121,"./getMatchData":136,"./toObject":146}],123:[function(a,b,c){function d(a,b){var c=h(a),d=i(a)&&j(b),n=a+"";return a=m(a),function(h){if(null==h)return!1;var i=n;if(h=l(h),(c||!d)&&!(i in h)){if(h=1==a.length?h:e(h,g(a,0,-1)),null==h)return!1;i=k(a),h=l(h)}return h[i]===b?void 0!==b||i in h:f(b,h[i],void 0,!0)}}var e=a("./baseGet"),f=a("./baseIsEqual"),g=a("./baseSlice"),h=a("../lang/isArray"),i=a("./isKey"),j=a("./isStrictComparable"),k=a("../array/last"),l=a("./toObject"),m=a("./toPath");b.exports=d},{"../array/last":104,"../lang/isArray":149,"./baseGet":118,"./baseIsEqual":119,"./baseSlice":126,"./isKey":141,"./isStrictComparable":144,"./toObject":146,"./toPath":147}],124:[function(a,b,c){function d(a){return function(b){return null==b?void 0:b[a]}}b.exports=d},{}],125:[function(a,b,c){function d(a){var b=a+"";return a=f(a),function(c){return e(c,a,b)}}var e=a("./baseGet"),f=a("./toPath");b.exports=d},{"./baseGet":118,"./toPath":147}],126:[function(a,b,c){function d(a,b,c){var d=-1,e=a.length;b=null==b?0:+b||0,0>b&&(b=-b>e?0:e+b),c=void 0===c||c>e?e:+c||0,0>c&&(c+=e),e=b>c?0:c-b>>>0,b>>>=0;for(var f=Array(e);++d<e;)f[d]=a[d+b];return f}b.exports=d},{}],127:[function(a,b,c){function d(a){return null==a?"":a+""}b.exports=d},{}],128:[function(a,b,c){function d(a,b,c){if("function"!=typeof a)return e;if(void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)};case 5:return function(c,d,e,f,g){return a.call(b,c,d,e,f,g)}}return function(){return a.apply(b,arguments)}}var e=a("../utility/identity");b.exports=d},{"../utility/identity":161}],129:[function(a,b,c){function d(a){return g(function(b,c){var d=-1,g=null==b?0:c.length,h=g>2?c[g-2]:void 0,i=g>2?c[2]:void 0,j=g>1?c[g-1]:void 0;for("function"==typeof h?(h=e(h,j,5),g-=2):(h="function"==typeof j?j:void 0,g-=h?1:0),i&&f(c[0],c[1],i)&&(h=3>g?void 0:h,g=1);++d<g;){var k=c[d];k&&a(b,k,h)}return b})}var e=a("./bindCallback"),f=a("./isIterateeCall"),g=a("../function/restParam");b.exports=d},{"../function/restParam":106,"./bindCallback":128,"./isIterateeCall":140}],130:[function(a,b,c){function d(a,b){return function(c,d){var h=c?e(c):0;if(!f(h))return a(c,d);for(var i=b?h:-1,j=g(c);(b?i--:++i<h)&&d(j[i],i,j)!==!1;);return c}}var e=a("./getLength"),f=a("./isLength"),g=a("./toObject");b.exports=d},{"./getLength":135,"./isLength":142,"./toObject":146}],131:[function(a,b,c){function d(a){return function(b,c,d){for(var f=e(b),g=d(b),h=g.length,i=a?h:-1;a?i--:++i<h;){var j=g[i];if(c(f[j],j,f)===!1)break}return b}}var e=a("./toObject");b.exports=d},{"./toObject":146}],132:[function(a,b,c){function d(a,b,c,d,f,g,h){var i=-1,j=a.length,k=b.length;if(j!=k&&!(f&&k>j))return!1;for(;++i<j;){var l=a[i],m=b[i],n=d?d(f?m:l,f?l:m,i):void 0;if(void 0!==n){if(n)continue;return!1}if(f){if(!e(b,function(a){return l===a||c(l,a,d,f,g,h)}))return!1}else if(l!==m&&!c(l,m,d,f,g,h))return!1}return!0}var e=a("./arraySome");b.exports=d},{"./arraySome":108}],133:[function(a,b,c){function d(a,b,c){switch(c){case e:case f:return+a==+b;case g:return a.name==b.name&&a.message==b.message;case h:return a!=+a?b!=+b:a==+b;case i:case j:return a==b+""}return!1}var e="[object Boolean]",f="[object Date]",g="[object Error]",h="[object Number]",i="[object RegExp]",j="[object String]";b.exports=d},{}],134:[function(a,b,c){function d(a,b,c,d,f,h,i){var j=e(a),k=j.length,l=e(b),m=l.length;if(k!=m&&!f)return!1;for(var n=k;n--;){var o=j[n];if(!(f?o in b:g.call(b,o)))return!1}for(var p=f;++n<k;){o=j[n];var q=a[o],r=b[o],s=d?d(f?r:q,f?q:r,o):void 0;if(!(void 0===s?c(q,r,d,f,h,i):s))return!1;p||(p="constructor"==o)}if(!p){var t=a.constructor,u=b.constructor;if(t!=u&&"constructor"in a&&"constructor"in b&&!("function"==typeof t&&t instanceof t&&"function"==typeof u&&u instanceof u))return!1}return!0}var e=a("../object/keys"),f=Object.prototype,g=f.hasOwnProperty;b.exports=d},{"../object/keys":158}],135:[function(a,b,c){var d=a("./baseProperty"),e=d("length");b.exports=e},{"./baseProperty":124}],136:[function(a,b,c){function d(a){for(var b=f(a),c=b.length;c--;)b[c][2]=e(b[c][1]);return b}var e=a("./isStrictComparable"),f=a("../object/pairs");b.exports=d},{"../object/pairs":160,"./isStrictComparable":144}],137:[function(a,b,c){function d(a,b){var c=null==a?void 0:a[b];return e(c)?c:void 0}var e=a("../lang/isNative");b.exports=d},{"../lang/isNative":152}],138:[function(a,b,c){function d(a){return null!=a&&f(e(a))}var e=a("./getLength"),f=a("./isLength");b.exports=d},{"./getLength":135,"./isLength":142}],139:[function(a,b,c){function d(a,b){return a="number"==typeof a||e.test(a)?+a:-1,b=null==b?f:b,a>-1&&a%1==0&&b>a}var e=/^\d+$/,f=9007199254740991;b.exports=d},{}],140:[function(a,b,c){function d(a,b,c){if(!g(c))return!1;var d=typeof b;if("number"==d?e(c)&&f(b,c.length):"string"==d&&b in c){var h=c[b];return a===a?a===h:h!==h}return!1}var e=a("./isArrayLike"),f=a("./isIndex"),g=a("../lang/isObject");b.exports=d},{"../lang/isObject":153,"./isArrayLike":138,"./isIndex":139}],141:[function(a,b,c){function d(a,b){var c=typeof a;if("string"==c&&h.test(a)||"number"==c)return!0;if(e(a))return!1;var d=!g.test(a);return d||null!=b&&a in f(b)}var e=a("../lang/isArray"),f=a("./toObject"),g=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,h=/^\w*$/;b.exports=d},{"../lang/isArray":149,"./toObject":146}],142:[function(a,b,c){function d(a){return"number"==typeof a&&a>-1&&a%1==0&&e>=a}var e=9007199254740991;b.exports=d},{}],143:[function(a,b,c){function d(a){return!!a&&"object"==typeof a}b.exports=d},{}],144:[function(a,b,c){function d(a){return a===a&&!e(a)}var e=a("../lang/isObject");b.exports=d},{"../lang/isObject":153}],145:[function(a,b,c){function d(a){for(var b=i(a),c=b.length,d=c&&a.length,j=!!d&&h(d)&&(f(a)||e(a)),l=-1,m=[];++l<c;){var n=b[l];(j&&g(n,d)||k.call(a,n))&&m.push(n)}return m}var e=a("../lang/isArguments"),f=a("../lang/isArray"),g=a("./isIndex"),h=a("./isLength"),i=a("../object/keysIn"),j=Object.prototype,k=j.hasOwnProperty;b.exports=d},{"../lang/isArguments":148,"../lang/isArray":149,"../object/keysIn":159,"./isIndex":139,"./isLength":142}],146:[function(a,b,c){function d(a){return e(a)?a:Object(a)}var e=a("../lang/isObject");b.exports=d},{"../lang/isObject":153}],147:[function(a,b,c){function d(a){if(f(a))return a;var b=[];return e(a).replace(g,function(a,c,d,e){b.push(d?e.replace(h,"$1"):c||a)}),b}var e=a("./baseToString"),f=a("../lang/isArray"),g=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,h=/\\(\\)?/g;b.exports=d},{"../lang/isArray":149,"./baseToString":127}],148:[function(a,b,c){function d(a){return f(a)&&e(a)&&h.call(a,"callee")&&!i.call(a,"callee")}var e=a("../internal/isArrayLike"),f=a("../internal/isObjectLike"),g=Object.prototype,h=g.hasOwnProperty,i=g.propertyIsEnumerable;b.exports=d},{"../internal/isArrayLike":138,"../internal/isObjectLike":143}],149:[function(a,b,c){var d=a("../internal/getNative"),e=a("../internal/isLength"),f=a("../internal/isObjectLike"),g="[object Array]",h=Object.prototype,i=h.toString,j=d(Array,"isArray"),k=j||function(a){return f(a)&&e(a.length)&&i.call(a)==g};b.exports=k},{"../internal/getNative":137,"../internal/isLength":142,"../internal/isObjectLike":143}],150:[function(a,b,c){function d(a){return null==a?!0:g(a)&&(f(a)||j(a)||e(a)||i(a)&&h(a.splice))?!a.length:!k(a).length}var e=a("./isArguments"),f=a("./isArray"),g=a("../internal/isArrayLike"),h=a("./isFunction"),i=a("../internal/isObjectLike"),j=a("./isString"),k=a("../object/keys");b.exports=d},{"../internal/isArrayLike":138,"../internal/isObjectLike":143,"../object/keys":158,"./isArguments":148,"./isArray":149,"./isFunction":151,"./isString":154}],151:[function(a,b,c){function d(a){return e(a)&&h.call(a)==f}var e=a("./isObject"),f="[object Function]",g=Object.prototype,h=g.toString;b.exports=d},{"./isObject":153}],152:[function(a,b,c){function d(a){return null==a?!1:e(a)?k.test(i.call(a)):f(a)&&g.test(a)}var e=a("./isFunction"),f=a("../internal/isObjectLike"),g=/^\[object .+?Constructor\]$/,h=Object.prototype,i=Function.prototype.toString,j=h.hasOwnProperty,k=RegExp("^"+i.call(j).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");b.exports=d},{"../internal/isObjectLike":143,"./isFunction":151}],153:[function(a,b,c){function d(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}b.exports=d},{}],154:[function(a,b,c){function d(a){return"string"==typeof a||e(a)&&h.call(a)==f}var e=a("../internal/isObjectLike"),f="[object String]",g=Object.prototype,h=g.toString;b.exports=d},{"../internal/isObjectLike":143}],155:[function(a,b,c){function d(a){return f(a)&&e(a.length)&&!!D[F.call(a)]}var e=a("../internal/isLength"),f=a("../internal/isObjectLike"),g="[object Arguments]",h="[object Array]",i="[object Boolean]",j="[object Date]",k="[object Error]",l="[object Function]",m="[object Map]",n="[object Number]",o="[object Object]",p="[object RegExp]",q="[object Set]",r="[object String]",s="[object WeakMap]",t="[object ArrayBuffer]",u="[object Float32Array]",v="[object Float64Array]",w="[object Int8Array]",x="[object Int16Array]",y="[object Int32Array]",z="[object Uint8Array]",A="[object Uint8ClampedArray]",B="[object Uint16Array]",C="[object Uint32Array]",D={};D[u]=D[v]=D[w]=D[x]=D[y]=D[z]=D[A]=D[B]=D[C]=!0,D[g]=D[h]=D[t]=D[i]=D[j]=D[k]=D[l]=D[m]=D[n]=D[o]=D[p]=D[q]=D[r]=D[s]=!1;var E=Object.prototype,F=E.toString;b.exports=d},{"../internal/isLength":142,"../internal/isObjectLike":143}],156:[function(a,b,c){var d=a("../internal/assignWith"),e=a("../internal/baseAssign"),f=a("../internal/createAssigner"),g=f(function(a,b,c){return c?d(a,b,c):e(a,b)});b.exports=g},{"../internal/assignWith":109,"../internal/baseAssign":110,"../internal/createAssigner":129}],157:[function(a,b,c){function d(a,b,c){var d=f(a);return c&&g(a,b,c)&&(b=void 0),b?e(d,b):d}var e=a("../internal/baseAssign"),f=a("../internal/baseCreate"),g=a("../internal/isIterateeCall");b.exports=d},{"../internal/baseAssign":110,"../internal/baseCreate":113,"../internal/isIterateeCall":140}],158:[function(a,b,c){var d=a("../internal/getNative"),e=a("../internal/isArrayLike"),f=a("../lang/isObject"),g=a("../internal/shimKeys"),h=d(Object,"keys"),i=h?function(a){var b=null==a?void 0:a.constructor;return"function"==typeof b&&b.prototype===a||"function"!=typeof a&&e(a)?g(a):f(a)?h(a):[]}:g;b.exports=i},{"../internal/getNative":137,"../internal/isArrayLike":138,"../internal/shimKeys":145,"../lang/isObject":153}],159:[function(a,b,c){function d(a){if(null==a)return[];i(a)||(a=Object(a));var b=a.length;b=b&&h(b)&&(f(a)||e(a))&&b||0;for(var c=a.constructor,d=-1,j="function"==typeof c&&c.prototype===a,l=Array(b),m=b>0;++d<b;)l[d]=d+"";for(var n in a)m&&g(n,b)||"constructor"==n&&(j||!k.call(a,n))||l.push(n);return l}var e=a("../lang/isArguments"),f=a("../lang/isArray"),g=a("../internal/isIndex"),h=a("../internal/isLength"),i=a("../lang/isObject"),j=Object.prototype,k=j.hasOwnProperty;b.exports=d},{"../internal/isIndex":139,"../internal/isLength":142,"../lang/isArguments":148,"../lang/isArray":149,"../lang/isObject":153}],160:[function(a,b,c){function d(a){a=f(a);for(var b=-1,c=e(a),d=c.length,g=Array(d);++b<d;){var h=c[b];g[b]=[h,a[h]]}return g}var e=a("./keys"),f=a("../internal/toObject");b.exports=d},{"../internal/toObject":146,"./keys":158}],161:[function(a,b,c){function d(a){return a}b.exports=d},{}],162:[function(a,b,c){function d(a){return g(a)?e(a):f(a)}var e=a("../internal/baseProperty"),f=a("../internal/basePropertyDeep"),g=a("../internal/isKey");b.exports=d},{"../internal/baseProperty":124,"../internal/basePropertyDeep":125,"../internal/isKey":141}]},{},[11])(11)});
//# sourceMappingURL=jsforce.min.js.map